{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{171:function(t,s,a){\"use strict\";a.r(s);var n=a(0),o=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"content\"},[t._m(0),a(\"p\",[t._v(\"之前, 我们搭建了静态文件服务器.  用户通过在浏览器搜索栏输入 URL 来请求保存在服务器的指定文件.  但是除了提供静态文件, 服务器能做的还有很多很多.  在这一篇, 我们要学会用 Node.js 处理从前端页面的 HTML 表单中提交的信息.\")]),t._m(1),a(\"p\",[t._v('在日常, 我们访问\\b\\b一个站点的不同地址时, 通常页面内容\\b也随之改变.  这是因为\\b服务器为了实现更多的功能, 其会根据\\b请求 URL 的不同而做出不同的处理, 这被称作 \"路由\"')]),t._m(2),a(\"p\",[t._v('假设我们要做一个用于自我介绍的个人网页, 其包含: \"主页\". \"项目介绍页面\", \"关于我页面\".')]),a(\"p\",[t._v(\"那么我们可以像下面代码中那样来搭建路由规则:\")]),t._m(3),a(\"p\",[t._v(\"上面\\b代码根据请求 URL 的不同, 而将请求交给不同的处理代码.  你可以尝试运行服务器, 然后用浏览器去请求相应的 URL, 来看看得到的响应是什么.\")]),t._m(4),a(\"hr\"),t._m(5),t._m(6),a(\"p\",[t._v(\"我们先介绍用 GET 方法提交的表单.  通过 GET 提交的表单内容会组装成『 查询字符串 』嵌入在请求 URL 里.  例如下面这段:\")]),t._m(7),t._m(8),a(\"p\",[t._v(\"上面这段\\b URL 的\\b查询字符串如何解析成 JSON 的话就是:\")]),t._m(9),a(\"p\",[t._v(\"那么再简单了解了基础知识之后呢, 就让我们赶快来写代码吧!\")]),a(\"p\",[t._v(\"首先让我们来写一个有 HTML 表单的页面, 然后命名为 login.html (当然你也可以按照你的想法写代码和命名)\")]),t._m(10),t._m(11),t._m(12),a(\"p\",[t._v(\"我们可以用路由去匹配路径, 当\\b请求 URL 的路径和表单发送的路径相匹配时, 将请求交给特定代码去处理.\")]),t._m(13),a(\"p\",[t._v(\"当\\b运行起服务器\\b之后, 访问 login 页面, 提交表单你看到的应该像是下面这样:\")]),t._m(14),t._m(15),a(\"hr\"),t._m(16),a(\"p\",[t._v(\"说完 GET, 我们再来说说用 POST 方法提交表单.  不同于用 GET 方法时, 提交的内容\\b都包含在 URL 里.  POST 提交的内容全部的都在请求体中.\")]),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),a(\"p\",[t._v(\"现在运行服务器, 提交表单, 看看结果是什么.  应该效果像下图所示:\")]),t._m(23),t._m(24),a(\"hr\"),t._m(25),a(\"p\",[t._v(\"文件上传我们可以很方便的用第三方模块 \"),a(\"a\",{attrs:{href:\"https://www.npmjs.com/package/formidable\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"formidable\"),a(\"OutboundLink\")],1),t._v(\" 来实现.\")]),a(\"p\",[t._v(\"首先用 npm 来安装模块:\")]),t._m(26),t._m(27),t._m(28),a(\"p\",[t._v(\"那么不多废话直接上代码:\")]),t._m(29),a(\"p\",[t._v(\"服务器代码写完后, 让我们写 upload.html 文件:\")]),t._m(30),t._m(31),a(\"p\",[t._v(\"写好后, 运行服务器, 上传一张你喜欢的照片, 看看结果是什么.  以下是我的操作:\")]),t._m(32),t._m(33),a(\"p\",[t._v(\"可以看到照片已经上传到了 uploads 目录\\b下.\")]),t._m(34),a(\"p\",[t._v(\"前面分别用 GET 和 POST 方法提交了表单, 那么这两种方法到底区别是什么呢?\")]),a(\"p\",[t._v(\"先\\b来看看 MDN 对这两个方法的定义:\")]),t._m(35),a(\"p\",[t._v(\"上面\\b说的已经很简洁, 当你想要请求服务器上的资源时用 \\bGET 方法.  发送数据时用 POST 方法.  像我之前用 \\bGET 方法提交登录信息, 是不符合规范的. \\b 实际开发中, 这种行为不允许出现.\")]),a(\"p\",[t._v(\"说完定义, 让我们再来看看这两种方法在表现上有什么不同.\")]),t._m(36)])},[function(){var t=this.$createElement,s=this._self._c||t;return s(\"h1\",{attrs:{id:\"搭建路由-和-处理表单提交\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#搭建路由-和-处理表单提交\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 搭建路由 和 处理表单提交\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"搭建路由\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#搭建路由\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 搭建路由\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"『 路由 』简单来说就是 \"),s(\"strong\",[this._v(\"请求和请求处理代码之间的映射关系\")]),this._v(\".  当服务器为一个特定 URL 挂在了请求处理代码时, 所有针对于这个特定 URL 的请求都会交由其处理.\")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-js extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 引入相关模块\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" http \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"require\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'http'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" url \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"require\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'url'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 搭建 HTTP 服务器\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" server \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" http\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"createServer\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 获取请求 URL, 根据 URL 中的 pathname 来匹配对应的处理方法.\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlObj \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"parse\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlPathname \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" urlObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"pathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"switch\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"urlPathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/main\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 因为返回内容中有中文, 所以别忘了指定编码方式\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain; charset=utf-8\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"主页页面\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/aboutme\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain; charset=utf-8\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"关于我页面\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/projects\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain; charset=utf-8\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"项目介绍页面\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 如果都不匹配就返回 404 \")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"default\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"404\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain; charset=utf-8\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"404 - Not Found\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 在 3000 端口监听请求\")]),t._v(\"\\nserver\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"listen\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"3000\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    console\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"log\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"服务器运行中.\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    console\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"log\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"正在监听 3000 端口:\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/EUUMWC0.gif\",alt:\"123\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"获取-get-表单提交\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#获取-get-表单提交\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 获取 GET 表单提交\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"在学习了路由相关知识之后, 我们再来了解一下如何获取从客户端发过来的 \"),s(\"strong\",[this._v(\"表单提交\")]),this._v(\".\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[this._v(\"https://www.zhihu.com/search?type=content&q=罐装汽水Garrik\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"从 \"),s(\"code\",[this._v(\"?\")]),this._v(\" 问号开始就是这段 URL 的查询字符串; 参数之间用 \"),s(\"code\",[this._v(\"&\")]),this._v(\" 分开; \"),s(\"code\",[this._v(\"=\")]),this._v(\" 等号前面的是参数名, 后面的是参数值.\")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-json extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token property\"}},[t._v('\"type\"')]),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"content\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token property\"}},[t._v('\"q\"')]),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"罐装汽水Garrik\"')]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"p\",[t._v(\"这个表单\\b我想用来提交登录信息, \"),a(\"code\",[t._v(\"form\")]),t._v(\" \\b元素的 \"),a(\"code\",[t._v(\"\\baction\")]),t._v(\" 属性我定义为 \"),a(\"code\",[t._v(\"login\")]),t._v(\", 意思是将请求发送到 \"),a(\"code\",[t._v(\"login\")]),t._v(\" 这段路径下.  \"),a(\"code\",[t._v(\"method\")]),t._v(\" 属性我定义为 \"),a(\"code\",[t._v(\"get\")]),t._v(\", 意思是以 GET 方法提交表单.\")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-html extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"body\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"form\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"action\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"login\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"method\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"get\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n        账户: \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"input\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"type\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"text\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"name\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"username\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"br\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\" \\n        密码: \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"input\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"type\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"text\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"name\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"password\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"br\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"input\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"type\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"submit\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"value\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"提交\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"form\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"body\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"p\",[t._v(\"之后再让我们\\b来写服务器代码.  通过前面的介绍, 你知道我们需要解析 URL 的查询字符串.  做到这点很简单, 只需要在调用 \"),a(\"code\",[t._v(\"url.parse\")]),t._v(\" 函数解析\\b请求 URL 时为其传入第二个参数 \"),a(\"code\",[t._v(\"true\")]),t._v(\".  这个函数就会自动\\b帮你把 URL 的查询字符串解析成一个 JavaScript 对象了, \\b保存在函数\\b返回对象的 \"),a(\"code\",[t._v(\"query\")]),t._v(\" 属性中.  如果没有\\b查询的话属性值就是 \"),a(\"code\",[t._v(\"null\")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-js extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" server \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" http\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"createServer\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 解析请求 URL\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlObj \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"parse\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 获取请求 URL 的路径\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlPathname \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" urlObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"pathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 获取请求 URL 的查询字符串解析成的对象\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" queryObj \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" urlObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"query\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \\n    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 路由\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"switch\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"urlPathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 响应 login 页面\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 我用了静态服务器那篇的模块\\b, \\b不了解的地方可以去那篇参考\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"readStaticFile\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./login.html\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 响应查询对象的 JSON 形式到浏览器 \")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/login\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token constant\"}},[t._v(\"JSON\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"stringify\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"queryObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 错误处理\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"default\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"readStaticFile\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./404.html\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/i4nMxmW.png\",alt:\"Screen Shot 2018-10-09 at 12.49.09 AM\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/XDBIqAB.png\",alt:\"Screen Shot 2018-10-09 at 12.49.20 AM\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"获取-post-表单提交\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#获取-post-表单提交\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 获取 POST 表单提交\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"我们\\b HTTP 服务器 \"),s(\"code\",[this._v(\"http.createServer\")]),this._v(\" 接收的请求对象 \"),s(\"code\",[this._v(\"req\")]),this._v(\" 并没有一个属性\\b内容为请求体.  原因是 POST 请求体\\b可能体积非常大, 如果每次接收请求都包含请求体的话会\\b很耗时.  而且万一遇到了恶意 \\bPOST 请求攻击, 服务器的资源就被大大地浪费了.\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"为了获取 POST \\b请求体, 我们需要手动来操作.  因为 POST 请求数据量可能很大, 所以它被拆分成了很多个小数据块 ( chunk ) 我们通过在服务器\\b监听请求对象 \"),s(\"code\",[this._v(\"\\breq\")]),this._v(\" 的\\b \"),s(\"code\",[this._v(\"'data'\")]),this._v(\" 事件来一个个地接收\\b这些数据块, 并将其\\b拼接在一起.\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"当请求\\b传输完毕, 会触发请求对象 \"),s(\"code\",[this._v(\"req\")]),this._v(\" 的\\b \"),s(\"code\",[this._v(\"'end'\")]),this._v(\" 事件.  我们需要监听它, 事件触发后, 在其\\b事件处理函数中解析 POST 的请求体.\")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-js extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" server \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" http\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"createServer\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlObj \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"parse\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlPathname \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" urlObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"pathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"switch\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"urlPathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"readStaticFile\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./login.html\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/login\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 当请求方法为 POST 时触发\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"method \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"===\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'POST'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 用于保存拼接后的请求体\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" post \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"''\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 'data' 事件触发, 将接受的数据块 chunk 拼接到 post 变量上\")]),t._v(\"\\n                req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'data'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"chunk\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                    post \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"+=\")]),t._v(\" chunk\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 请求\\b完毕, 'end' 事件触发\")]),t._v(\"\\n                req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'end'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// querystring 是 Node.js 自带模块, parse 方法用于将查询字符串解析成对象\")]),t._v(\"\\n                    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" queryObj \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" querystring\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"parse\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"post\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 将接收的 POST 请求体以 \\bJSON 格式响应回\\b客户端\")]),t._v(\"\\n                    res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token constant\"}},[t._v(\"JSON\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"stringify\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"queryObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"default\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"readStaticFile\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./404.html\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"对了, 最重要的一点, 别忘了将 login.html 文件中的表单提交方法从 \"),s(\"code\",[this._v(\"get\")]),this._v(\" 改成 \"),s(\"code\",[this._v(\"post\")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-html extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"body\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"form\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"action\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"login\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"method\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"post\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"\\x3c!-- 省略了 --\\x3e\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"form\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"body\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/7h0VDsV.png\",alt:\"Screen Shot 2018-10-09 at 12.49.09 AM\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/UwoVewr.png\",alt:\"Screen Shot 2018-10-09 at 10.43.14 AM\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"post-文件上传\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#post-文件上传\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" POST 文件上传\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[s(\"span\",{attrs:{class:\"token function\"}},[this._v(\"npm\")]),this._v(\" \"),s(\"span\",{attrs:{class:\"token function\"}},[this._v(\"install\")]),this._v(\" formidable --save\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"formidable 是用于是表单数据解析的模块, 非常适合用于文件上传的处理.  使用该模块时, 先要调用它的 \"),s(\"code\",[this._v(\"IncomingForm\")]),this._v(\" 构造函数初始模块.  \\b该函数\\b\\b返回一个 \"),s(\"code\",[this._v(\"IncomingForm\")]),this._v(\" 实例用于解处理表单提交数据.  之后通过调用该实例的 \"),s(\"code\",[this._v(\"parse\")]),this._v(\" 方法来解析数据.\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"当用户使用表单提交数据时，表单中可能会包含两类数据: 普通表单数据, 文件数据.  \"),s(\"code\",[this._v(\"parse\")]),this._v(\" 方法解析时，会将这两种数据分别放到\"),s(\"code\",[this._v(\"fields\")]),this._v(\" 和 \"),s(\"code\",[this._v(\"files\")]),this._v(\" 这两个回调参数中.\")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-js extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 模块引入\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" formidable \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"require\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'formidable'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" server \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" http\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"createServer\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlObj \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"parse\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"url\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" urlPathname \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" urlObj\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"pathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"switch\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"urlPathname\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"readStaticFile\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./upload.html\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 路由为 '/upload'\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"case\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/upload\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"method \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"===\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'POST'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 初始化 formidable 的 IncomingForm 实例\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" form \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"formidable\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"IncomingForm\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// uploadDir 设置上传文件时临时文件存放的位置\")]),t._v(\"\\n                form\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"uploadDir \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./uploads\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// keepExtensions 属性设置是否保留上传文件的扩展名, 默认为 false\")]),t._v(\"\\n                form\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"keepExtensions \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \\n                \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// 开始解析\")]),t._v(\"\\n                form\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"parse\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"req\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" fields\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" files\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" message \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"文件解析失败\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"else\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" message \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"文件上传成功\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n                    res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"writeHead\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"text/plain;charset=utf-8\"')]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"write\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"message\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                    res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"end\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"default\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"readStaticFile\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./404.html\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"language-html extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"body\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"form\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"action\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"upload\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"enctype\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"multipart/form-data\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"method\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"post\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"input\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"type\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"file\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"name\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"upload\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"br\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"input\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"type\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"submit\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),a(\"span\",{attrs:{class:\"token attr-name\"}},[t._v(\"value\")]),a(\"span\",{attrs:{class:\"token attr-value\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"=\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"提交\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v('\"')])]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"form\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token tag\"}},[a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"body\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"p\",[t._v(\"注意\\b要设置的表单的编码方式 \"),a(\"code\",[t._v(\"enctype\")]),t._v(\" 为 \"),a(\"code\",[t._v('\"multipart/form-data\"')]),t._v(\" 表单数据默认的编码方式为 \"),a(\"code\",[t._v('\"application/x-www-form-urlencoded\"')]),t._v(\" 不可用于文件上传.  在使用包含文件上传控件的表单时，必须使用 \"),a(\"code\",[t._v('\"multipart/form-data\"')]),t._v(\" 这个值.\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/bpItXM7.png\",alt:\"Screen Shot 2018-10-09 at 11.54.45 AM\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"img\",{attrs:{src:\"https://i.imgur.com/GlXAnwX.png\",alt:\"Screen Shot 2018-10-09 at 11.55.17 AM\"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"get-vs-post\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#get-vs-post\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" GET vs POST\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"ul\",[s(\"li\",[this._v(\"『 HTTP GET 方法 』: 请求指定的资源.  使用 GET 的请求应该只用于获取数据\")]),s(\"li\",[this._v(\"『 HTTP POST 方法 』: 发送数据给服务器\")])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"ul\",[s(\"li\",[s(\"p\",[this._v(\"善于观察的你一定已经发现, GET 提交的表单数据显式地添加在了请求 URL 的查询字符串中.  而 POST 把提交的数据放置在了请求体中.  这也体现出为什么 GET\\b 不能用于传输\\b数据, 你总不希望你的账号和密码这么明显地暴露在 URL 里吧.\")])]),s(\"li\",[s(\"p\",[this._v(\"因为浏览器对 \\b\\bURL 的长度都有限制, 所以 GET 方式提交的数据是有大小限制的, 一般不超过 1024 字节.  理论上讲， POST 提交数据时没有大小限制的.  但出于性能考虑, 服务器接收时可能对 POST 传输的数据大小进行限制.\")])])])}],!1,null,null,null);s.default=o.exports}}]);","extractedComments":[]}