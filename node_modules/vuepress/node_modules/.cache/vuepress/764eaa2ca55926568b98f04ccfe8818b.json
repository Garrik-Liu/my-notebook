{"remainingRequest":"/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/xiangliu/Projects/Web/front-end-notebook/docs/ä¸ªäººå¿ƒå¾—/å‰ç«¯æ•™ç¨‹/NodeJs/å…¥é—¨ç¯‡/æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨.md?vue&type=template&id=607b8bc0","dependencies":[{"path":"/Users/xiangliu/Projects/Web/front-end-notebook/docs/ä¸ªäººå¿ƒå¾—/å‰ç«¯æ•™ç¨‹/NodeJs/å…¥é—¨ç¯‡/æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨.md","mtime":1540621111373},{"path":"/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/cache-loader/dist/cjs.js","mtime":1532111594974},{"path":"/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1532111597631},{"path":"/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/cache-loader/dist/cjs.js","mtime":1532111594974},{"path":"/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/vue-loader/lib/index.js","mtime":1532111597630},{"path":"/Users/xiangliu/Projects/Web/front-end-notebook/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1532111597717}],"contextDependencies":[],"result":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._ssrNode(\"<h1 id=\\\"æ­å»ºé™æ€èµ„æºæœåŠ¡å™¨\\\"><a href=\\\"#æ­å»ºé™æ€èµ„æºæœåŠ¡å™¨\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> æ­å»ºé™æ€èµ„æºæœåŠ¡å™¨</h1><p>åœ¨ä¸Šä¸€ç« , æˆ‘ä»¬æ­å»ºäº†ä¸€ä¸ªéå¸¸ç®€å•çš„ &quot;Hello World&quot; æœåŠ¡å™¨.  åœ¨è¿™ä¸€ç« é‡Œ, æˆ‘ä»¬è¦ç»§ç»­ä¸Šä¸€ç« æ‰€å­¦çš„çŸ¥è¯†, è¿›ä¸€æ­¥å°è¯•æ­å»º, æä¾›é™æ€èµ„æºçš„æœåŠ¡å™¨.</p><h2 id=\\\"ä»€ä¹ˆæ˜¯é™æ€èµ„æºæœåŠ¡å™¨\\\"><a href=\\\"#ä»€ä¹ˆæ˜¯é™æ€èµ„æºæœåŠ¡å™¨\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> ä»€ä¹ˆæ˜¯é™æ€èµ„æºæœåŠ¡å™¨?</h2><p>é‚£å…ˆè¯´ä»€ä¹ˆæ˜¯ <strong>é™æ€èµ„æº</strong>, å®ƒæŒ‡çš„æ˜¯<strong>ä¸ä¼šè¢«æœåŠ¡å™¨çš„åŠ¨æ€è¿è¡Œæ‰€æ”¹å˜æˆ–è€…ç”Ÿæˆçš„æ–‡ä»¶</strong>.  å®ƒæœ€åˆåœ¨æœåŠ¡å™¨è¿è¡Œä¹‹å‰æ˜¯ä»€ä¹ˆæ ·å­, åˆ°æœåŠ¡å™¨ç»“æŸè¿è¡Œæ—¶, å®ƒè¿˜æ˜¯é‚£ä¸ªæ ·å­.  æ¯”å¦‚å¹³æ—¶å†™çš„ <code>js</code>, <code>css</code>, <code>html</code> æ–‡ä»¶, éƒ½å¯ä»¥ç®—æ˜¯é™æ€èµ„æº.  é‚£ä¹ˆå¾ˆå®¹æ˜“ç†è§£, é™æ€èµ„æºæœåŠ¡å™¨çš„åŠŸèƒ½å°±æ˜¯å‘å®¢æˆ·ç«¯æä¾›é™æ€èµ„æº.</p><p>è¯ä¸å¤šè¯´, å¼€å§‹å†™ä»£ç :</p><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“, å®ƒå…ˆæ˜¯ä¸€ä¸ª &quot;æœåŠ¡å™¨&quot;.  é‚£æ ¹æ®ä¸Šä¸€ç« çš„æ‰€å­¦, æˆ‘ä»¬è¦å…ˆç”¨ <code>http</code> æ¨¡å—åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨.</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> http <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'http'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// ä¸šåŠ¡é€»è¾‘, ç­‰ä¼šå„¿å†å†™.</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nserver<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;é™æ€èµ„æºæœåŠ¡å™¨è¿è¡Œä¸­.&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£:&quot;</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n</code></pre></div><h2 id=\\\"url-æ¨¡å—\\\"><a href=\\\"#url-æ¨¡å—\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> url æ¨¡å—</h2>\"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"<a href=\\\"http://nodejs.cn/api/url.html\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"url æ¨¡å— - æ–‡æ¡£\"),_c('OutboundLink')],2)]),_vm._ssrNode(\"<p>æœ‰äº† HTTP æœåŠ¡å™¨ä¹‹å, æˆ‘ä»¬å°±å¯ä»¥è·å–ä»å®¢æˆ·ç«¯å‘è¿‡æ¥çš„ HTTP è¯·æ±‚äº†.</p><p>è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å«ç€è¯·æ±‚ URL. å‰æ–‡è¯´è¿‡, URL ç”¨äºå®šä½ç½‘ç»œä¸Šçš„èµ„æº.  å®¢æˆ·ç«¯é€šè¿‡ URL æ¥æŒ‡æ˜æƒ³è¦çš„æœåŠ¡å™¨ä¸Šèµ„æº.  é‚£ä¹ˆæœåŠ¡å™¨ä¸ºäº†ææ¸…æ¥šå®¢æˆ·ç«¯åˆ°åº•æƒ³è¦ä»€ä¹ˆ, æˆ‘ä»¬éœ€è¦å¤„ç†å’Œè§£æ URL.  åœ¨ Node.js ä¸­, æˆ‘ä»¬ä½¿ç”¨ <code>url</code> æ¨¡å—æ¥å®Œæˆè¿™ç±»æ“ä½œ.</p><p>æˆ‘ä»¬çŸ¥é“ URL å­—ç¬¦ä¸²æ˜¯å…·æœ‰ç»“æ„çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«å¤šä¸ªæ„ä¹‰ä¸åŒçš„ç»„æˆéƒ¨åˆ†ã€‚ é€šè¿‡ <code>url.parse()</code> å‡½æ•°, URL å­—ç¬¦ä¸²å¯ä»¥è¢«è§£æä¸ºä¸€ä¸ª URL å¯¹è±¡ï¼Œå…¶å±æ€§å¯¹åº”äºå­—ç¬¦ä¸²çš„å„ç»„æˆéƒ¨åˆ†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º.</p><p><img src=\\\"https://i.imgur.com/9ac97ul.png\\\" alt=\\\"Screen Shot 2018-10-05 at 2.18.56 AM\\\"></p><hr><p>é‚£ä¹ˆå›åˆ°æˆ‘ä»¬çš„é™æ€æ–‡ä»¶æœåŠ¡å™¨ä»£ç .:</p><p>å…ˆåœ¨\\b <code>http.createServer</code> å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰, å¼•å…¥ <code>url</code> æ¨¡å—:</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> url <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'url'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>ç„¶ååœ¨ HTT\\bP æœåŠ¡å™¨é‡Œè§£æè¯·æ±‚ URL.  å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ URL ä½œä¸ºå±æ€§å­˜æ”¾åœ¨ <code>http.createServer</code> çš„å›è°ƒå‡½æ•°å‚æ•°æ‰€æ¥æ”¶çš„è¯·æ±‚å¯¹è±¡é‡Œ, å±æ€§åä¸º <code>url</code>.</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><h2 id=\\\"path-æ¨¡å—\\\"><a href=\\\"#path-æ¨¡å—\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> path æ¨¡å—</h2>\"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"<a href=\\\"https://nodejs.org/api/path.html\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"path æ¨¡å— - æ–‡æ¡£\"),_c('OutboundLink')],2)]),_vm._ssrNode(\"<p>æ¥ä¸‹æ¥ä»è§£æåçš„ URL å¯¹è±¡ <code>urlObj</code> é‡Œå–å¾—è¯·æ±‚ URL ä¸­çš„è·¯å¾„å(pathname).  è·¯å¾„åä¿å­˜åœ¨ <code>pathname</code> å±æ€§é‡Œ.</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> urlPathname <span class=\\\"token operator\\\">=</span> urlObj<span class=\\\"token punctuation\\\">.</span>pathname<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>ä½†æ˜¯å…‰æœ‰ URL å¯¹è±¡é‡Œé¢çš„è·¯å¾„åæ˜¯ä¸å¤Ÿçš„.  æˆ‘ä»¬è¿˜éœ€è¦è·å¾—ç›®æ ‡æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸­æ‰€åœ¨ç›®å½•çš„ç›®å½•å(dirname).</p><p>å‡å¦‚è¯´æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„æ˜¯ä¸‹é¢è¿™æ ·çš„:</p><div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code><span class=\\\"token keyword\\\">.</span>\\nâ”œâ”€â”€ public\\nâ”‚   â”œâ”€â”€ index.css\\nâ”‚   â””â”€â”€ index.html\\nâ””â”€â”€ server.js\\n</code></pre></div><p>æˆ‘ä»¬çš„æœåŠ¡å™¨ä»£ç å†™åœ¨ <code>server.js</code> æ–‡ä»¶é‡Œ.  å®¢æˆ·ç«¯æƒ³è¦è¯·æ±‚ä¿å­˜åœ¨ <code>public</code> ç›®å½•é‡Œçš„ <code>index.html</code> æ–‡ä»¶.  ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ URL çš„æ—¶å€™, ä»–åªçŸ¥é“ä»–æƒ³è¦çš„æ–‡ä»¶å« <code>index.html</code>, ä½†è¿™ä¸ªæ–‡ä»¶åœ¨ HTTP æœåŠ¡å™¨æ‰€åœ¨çš„è®¾å¤‡ä¸­çš„ ã€ ç»å¯¹ä½ç½® ã€æ˜¯ä¸è¢«çŸ¥é“çš„.  æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®© HTTP æœåŠ¡å™¨è‡ªå·±å»å¤„ç†è¿™éƒ¨åˆ†æ“ä½œ.</p><p>åœ¨è¿™é‡Œå°±éœ€è¦ä½¿ç”¨ Node.js è‡ªå¸¦çš„ <code>path</code> æ¨¡å—.  å…¶æä¾›äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸ç›®å½•çš„è·¯å¾„.<br>\\nä½¿ç”¨èµ·æ¥å¾ˆç®€å•, é¦–å…ˆè¿˜æ˜¯åœ¨\\b <code>http.createServer</code> å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰, å¼•å…¥ <code>path</code> æ¨¡å—:</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>ä¹‹åæˆ‘ä»¬ç”¨ <code>path.join</code> è¿™ä¸ªæ–¹æ³•æ¥æŠŠ ç›®æ ‡æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç›®å½•åå’Œè¯·æ±‚ URL ä¸­çš„è·¯å¾„ååˆå¹¶èµ·æ¥.  åœ¨è¿™ä¸ªä¾‹å­ä¸­, å®¢æˆ·ç«¯å¯ä»¥è®¿é—®çš„é™æ€æ–‡ä»¶å…¨éƒ¨åœ¨ <code>public</code> è¿™ä¸ªç›®å½•ä¸­, è€Œ <code>public</code> ç›®å½•åˆåœ¨ <code>server.js</code> æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­.  <code>server.js</code> ä¸­ä¿å­˜çš„æ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨ä»£ç .</p><p>æƒ³è¦è·å¾— <code>server.js</code> æ‰€åœ¨ç›®å½•çš„åœ¨æ•´ä¸ªè®¾å¤‡ä¸­çš„ç»å¯¹è·¯å¾„, æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ä»£ç ä¸­è°ƒç”¨å˜é‡ <code>__dirname</code>, å®ƒæ˜¯å½“å‰æ–‡ä»¶åœ¨è¢«æ¨¡å—åŒ…è£…å™¨åŒ…è£…æ—¶ä¼ å…¥çš„å˜é‡, ä¿å­˜äº†å½“å‰æ¨¡å—çš„ç›®å½•åã€‚</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> urlPathname <span class=\\\"token operator\\\">=</span> urlObj<span class=\\\"token punctuation\\\">.</span>pathname<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> filePathname <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">&quot;/public&quot;</span><span class=\\\"token punctuation\\\">,</span> urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>å¦‚æœä½ æƒ³çš„è¯, ä½ å¯ä»¥ç”¨ <code>console.log(filePathname)</code> æ¥çœ‹çœ‹æœåŠ¡å™¨è¿è¡Œå, ä»å®¢æˆ·ç«¯æ”¶åˆ°çš„è¯·æ±‚ URL ä¼šè¢«è½¬æ¢æˆä»€ä¹ˆæ ·.</p><h2 id=\\\"fs-æ¨¡å—\\\"><a href=\\\"#fs-æ¨¡å—\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> fs æ¨¡å—</h2>\"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"<a href=\\\"http://nodejs.cn/api/fs.html#fs_file_system\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"fs æ¨¡å— - æ–‡æ¡£\"),_c('OutboundLink')],2)]),_vm._ssrNode(\"<p>ç°åœ¨æ¥åˆ°äº†æœ€é‡è¦çš„ä¸€æ­¥, è¯»å–ç›®æ ‡æ–‡ä»¶, å¹¶ä¸”è¿”å›æ–‡ä»¶ç»™å®¢æˆ·ç«¯.</p><p>æˆ‘ä»¬éœ€è¦ç”¨ Node.js è‡ªå¸¦çš„ <code>fs</code> æ¨¡å—ä¸­çš„ <code>fs.write</code> æ–¹æ³•æ¥å®ç°è¿™ä¸€æ­¥.  è¯¥æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç›®æ ‡æ–‡ä»¶çš„è·¯å¾„, æœ€åä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°, å›è°ƒæœ‰ä¸¤ä¸ªå‚æ•° (err, data)ï¼Œå…¶ä¸­ <code>data</code> æ˜¯æ–‡ä»¶çš„å†…å®¹, å¦‚æœå‘ç”Ÿé”™è¯¯çš„è¯ <code>err</code> ä¿å­˜é”™è¯¯ä¿¡æ¯.  <code>fs.write</code> æ–¹æ³•å¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­æŒ‡å®šå­—ç¬¦ç¼–ç , å¦‚æœæœªæŒ‡å®šåˆ™è¿”å›åŸå§‹çš„ buffer.  åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬ä¸è€ƒè™‘è¿™ä¸€é¡¹.</p><p>é‚£ä¹ˆå…·ä½“ä»£ç å¦‚ä¸‹:</p><p>é¦–å…ˆå¼•å…¥ <code>fs</code> æ¨¡å—, æˆ‘å°±ä¸èµ˜è¿°äº†, å‚ç…§å‰é¢å°±å¯ä»¥äº†.  ä¸‹é¢æ˜¯è¯»å–æ–‡ä»¶çš„ä»£ç .</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> urlPathname <span class=\\\"token operator\\\">=</span> urlObj<span class=\\\"token punctuation\\\">.</span>pathname<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> filePathname <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">&quot;/public&quot;</span><span class=\\\"token punctuation\\\">,</span> urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    \\n    fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFile</span><span class=\\\"token punctuation\\\">(</span>filePathname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">,</span> data<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=&gt;</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// å¦‚æœæœ‰é—®é¢˜è¿”å› 404</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">404</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;404 - File is not found!&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// æ²¡é—®é¢˜è¿”å›æ–‡ä»¶å†…å®¹</span>\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>ç°åœ¨æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªåŸºæœ¬çš„ã€ é™æ€æ–‡ä»¶æœåŠ¡å™¨ ã€å¯ä»¥åœ¨å…è®¸å®¢æˆ·ç«¯è¯·æ±‚ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­å…¬å¼€çš„é™æ€æ–‡ä»¶äº†.  ä½ å¯ä»¥å°è¯•å¯åŠ¨æœåŠ¡å™¨, ç„¶åè®©æµè§ˆå™¨ä¸­è®¿é—® <code>http://localhost:3000/index.html</code>.  æˆ‘çš„æ•ˆæœå¦‚ä¸‹:</p><p><img src=\\\"https://i.imgur.com/hWu58TA.png\\\" alt=\\\"Screen Shot 2018-10-06 at 2.22.08 PM\\\"></p><h2 id=\\\"è®¾ç½®-mime-ç±»å‹\\\"><a href=\\\"#è®¾ç½®-mime-ç±»å‹\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> è®¾ç½® MIME ç±»å‹</h2>\"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"<a href=\\\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types#%E8%AE%BE%E7%BD%AE%E6%AD%A3%E7%A1%AE%E7%9A%84MIME%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"MIME æ–‡æ¡£ - MDN\"),_c('OutboundLink')],2),_vm._ssrNode(\"<a href=\\\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"Content-Type æ–‡æ¡£ - MDN\"),_c('OutboundLink')],2)]),_vm._ssrNode(\"<p>å¤šç”¨é€” Internet é‚®ä»¶æ‰©å±•ï¼ˆMIMEï¼‰ç±»å‹æ˜¯ç”¨ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥è¡¨ç¤ºæ–‡æ¡£çš„ &quot;æ€§è´¨&quot; å’Œ &quot;æ ¼å¼&quot;ã€‚ ç®€å•è¯´, æµè§ˆå™¨é€šè¿‡ MIME ç±»å‹æ¥ç¡®å®šå¦‚ä½•å¤„ç†æ–‡æ¡£.  å› æ­¤åœ¨å“åº”å¯¹è±¡çš„å¤´éƒ¨è®¾ç½®æ­£ç¡® MIME ç±»å‹æ˜¯éå¸¸é‡è¦çš„.</p><p>MIME çš„ç»„æˆç»“æ„éå¸¸ç®€å•: ç”±ç±»å‹ä¸å­ç±»å‹ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­é—´ç”¨ <code>'/'</code> åˆ†éš”è€Œç»„æˆ, å…¶ä¸­æ²¡æœ‰ç©ºæ ¼.  MIME ç±»å‹å¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼Œä½†æ˜¯ä¼ ç»Ÿå†™æ³•éƒ½æ˜¯å°å†™.</p><p>ä¾‹å¦‚:</p><ul><li><code>text/plain</code> : æ˜¯æ–‡æœ¬æ–‡ä»¶é»˜è®¤å€¼ã€‚æ„æ€æ˜¯ æœªçŸ¥çš„æ–‡æœ¬æ–‡ä»¶ ï¼Œæµè§ˆå™¨è®¤ä¸ºæ˜¯å¯ä»¥ç›´æ¥å±•ç¤ºçš„.</li><li><code>text/html</code> : æ˜¯æ‰€æœ‰çš„HTMLå†…å®¹éƒ½åº”è¯¥ä½¿ç”¨è¿™ç§ç±»å‹.</li><li><code>image/png</code> : æ˜¯ PNG æ ¼å¼å›¾ç‰‡çš„ MIME ç±»å‹.</li></ul><p>åœ¨æœåŠ¡å™¨ä¸­, æˆ‘ä»¬é€šè¿‡è®¾ç½® <code>Content-Type</code> è¿™ä¸ªå“åº”å¤´éƒ¨çš„å€¼, æ¥æŒ‡ç¤ºå“åº”å›å»çš„èµ„æºçš„ MIME ç±»å‹.  åœ¨ Node.js ä¸­, å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨å“åº”å¯¹è±¡çš„ <code>writeHead</code> æ–¹æ³•æ¥\\bè®¾ç½®\\bå“åº”çŠ¶æ€ç å’Œ\\bå“åº”å¤´éƒ¨.</p><p>å‡å¦‚æˆ‘ä»¬è¦å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ª HTML æ–‡ä»¶, é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä¸‹é¢è¿™æ¡ä»£ç :</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code>res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token string\\\">&quot;Content-Type&quot;</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token string\\\">&quot;text/html&quot;</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>ä½ ä¼šå‘ç°æˆ‘åœ¨ä¸Šé¢çš„é™æ€èµ„æºæœåŠ¡å™¨\\bçš„ä»£ç ä¸­, æ²¡æœ‰è®¾ç½®å“åº”èµ„æºçš„ MIME ç±»å‹.  ä½†å¦‚æœä½ è¯•ç€è¿è¡ŒæœåŠ¡å™¨çš„è¯, ä½ ä¼šå‘ç°\\bé™æ€èµ„æºä¹Ÿä»¥æ­£ç¡®æ–¹å¼è¢«å±•ç¤ºåˆ°äº†\\bæµè§ˆå™¨.</p><p>ä¹‹æ‰€ä»¥ä¼šè¿™æ ·çš„åŸå› æ˜¯åœ¨ç¼ºå¤± MIME ç±»å‹æˆ–å®¢æˆ·ç«¯è®¤ä¸ºæ–‡ä»¶è®¾ç½®äº†é”™è¯¯çš„ MIME ç±»å‹æ—¶ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šé€šè¿‡æŸ¥çœ‹èµ„æºæ¥è¿›è¡ŒçŒœæµ‹ MIME ç±»å‹, å«åš ã€ MIME å—…æ¢ ã€.  ä¸åŒçš„æµè§ˆå™¨åœ¨ä¸åŒçš„æƒ…å†µä¸‹å¯èƒ½ä¼šæ‰§è¡Œä¸åŒçš„æ“ä½œã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯èµ„æºåœ¨æ¯ä¸€ä¸ªæµè§ˆå™¨ä¸‹çš„è¡Œä¸ºä¸€è‡´æ€§, æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è®¾ç½® MIME ç±»å‹.</p><p>é‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–åˆ°\\bå‡†å¤‡å“åº”ç»™å®¢æˆ·ç«¯çš„æ–‡ä»¶çš„ <strong>åç¼€å</strong>.</p><p>è¦åšåˆ°è¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>path</code> æ¨¡å—çš„ <code>parse</code> æ–¹æ³•.  \\bè¿™ä¸ªæ–¹æ³•å¯ä»¥å°†ä¸€æ®µè·¯å¾„è§£ææˆä¸€ä¸ªå¯¹è±¡, å…¶ä¸­çš„å±æ€§å¯¹åº”è·¯å¾„çš„å„ä¸ªéƒ¨ä½.</p><p>ç»§ç»­å†\\båˆšæ‰é™æ€æ–‡ä»¶æœåŠ¡å™¨æ¡ˆä¾‹çš„ä»£ç ä¸Šæ·»åŠ :</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> urlPathname <span class=\\\"token operator\\\">=</span> urlObj<span class=\\\"token punctuation\\\">.</span>pathname<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> filePathname <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">&quot;/public&quot;</span><span class=\\\"token punctuation\\\">,</span> urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    \\n    <span class=\\\"token comment\\\">// è§£æåå¯¹è±¡çš„ ext å±æ€§ä¸­ä¿å­˜ç€ç›®æ ‡æ–‡ä»¶çš„åç¼€å</span>\\n    <span class=\\\"token keyword\\\">var</span> ext <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>ext<span class=\\\"token punctuation\\\">;</span>\\n    \\n    <span class=\\\"token comment\\\">// è¯»å–æ–‡ä»¶çš„ä»£ç ...</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div>\"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"è·å–äº†\\bæ–‡ä»¶åç¼€ä¹‹å, æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾å…¶å¯¹åº”çš„ <strong>MIME ç±»å‹</strong>äº†.  è¿™ä¸€æ­¥å¯ä»¥å¾ˆè½»æ¾çš„ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å— \"),_vm._ssrNode(\"<a href=\\\"https://www.npmjs.com/package/mime\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"MIME\"),_c('OutboundLink')],2),_vm._ssrNode(\" æ¥å®ç°.  ä½ å¯ä»¥è‡ªè¡Œå» NPM ä¸Šå»æŸ¥é˜…å®ƒçš„ä½¿ç”¨æ–‡æ¡£.\")],2),_vm._ssrNode(\"<p>å¯¹äºæˆ‘ä»¬ç›®å‰çš„éœ€æ±‚æ¥è¯´, åªéœ€è¦ç”¨åˆ° MIME æ¨¡å—çš„ <code>getType()</code> æ–¹æ³•.  è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° (\\båç¼€å), è¿”å›å…¶å¯¹åº”çš„ MIME ç±»å‹, å¦‚æœæ²¡æœ‰å°±è¿”å› <code>null</code>.</p><p>ä½¿ç”¨çš„è¯, é¦–å…ˆè¦ç”¨ npm å®‰è£… MIME æ¨¡å— ( å¦‚æœä½ è¿˜æ²¡åˆ›å»º \\bpackage.json æ–‡ä»¶çš„è¯, \\båˆ«å¿˜äº†å…ˆæ‰§è¡Œ <code>npm init</code> )</p><div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code>\\bnpm <span class=\\\"token function\\\">install</span> mime --save\\n</code></pre></div><p>å®‰è£…å®Œæ¯•. å¼•å…¥æ¨¡å—åˆ°æœåŠ¡å™¨ä»£ç ä¸­, ç„¶åæˆ‘ä»¬å°±ç›´æ¥ç”¨åˆšåˆšè·å¾—çš„åç¼€å»æ‰¾åˆ°å…¶å¯¹åº”çš„ MIME ç±»å‹</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> mime <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'mime'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> urlPathname <span class=\\\"token operator\\\">=</span> urlObj<span class=\\\"token punctuation\\\">.</span>pathname<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> filePathname <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">&quot;/public&quot;</span><span class=\\\"token punctuation\\\">,</span> urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    \\n    <span class=\\\"token comment\\\">// è§£æåå¯¹è±¡çš„ ext å±æ€§ä¸­ä¿å­˜ç€ç›®æ ‡æ–‡ä»¶çš„åç¼€å</span>\\n    <span class=\\\"token keyword\\\">var</span> ext <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>ext<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">// è·å–åç¼€å¯¹åº”çš„ MIME ç±»å‹</span>\\n    <span class=\\\"token keyword\\\">var</span> mimeType <span class=\\\"token operator\\\">=</span> mime<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getType</span><span class=\\\"token punctuation\\\">(</span>ext<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    \\n    <span class=\\\"token comment\\\">// è¯»å–æ–‡ä»¶çš„ä»£ç ...</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>å¥½äº†, ç°åœ¨æœ€é‡è¦çš„ä¸œè¥¿ MIME ç±»å‹æˆ‘ä»¬å·²ç»å¾—åˆ°äº†.  æ¥ä¸‹æ¥åªè¦åœ¨å“åº”å¯¹è±¡çš„ <code>writeHead</code> æ–¹æ³•é‡Œè®¾ç½®å¥½ <code>\\bContent-Type</code> å°±è¡Œäº†.</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// ä»£ç çœç•¥...</span>\\n    <span class=\\\"token keyword\\\">var</span> mimeType <span class=\\\"token operator\\\">=</span> mime<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getType</span><span class=\\\"token punctuation\\\">(</span>ext<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFile</span><span class=\\\"token punctuation\\\">(</span>filePathname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">,</span> data<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=&gt;</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// å¦‚æœæœ‰é—®é¢˜è¿”å› 404</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">404</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">&quot;Content-Type&quot;</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">&quot;text/plain&quot;</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;404 - File is not found!&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token comment\\\">// æ²¡é—®é¢˜è¿”å›æ–‡ä»¶å†…å®¹</span>\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token comment\\\">// è®¾ç½®\\bå¥½å“åº”å¤´</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">&quot;Content-Type&quot;</span><span class=\\\"token punctuation\\\">:</span> mimeType <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>é˜¶æ®µæ€§èƒœåˆ© âœŒï¸ ç°åœ¨è¿è¡ŒæœåŠ¡å™¨, åœ¨æµè§ˆå™¨\\bé‡Œè®¿é—®ä¸€ä¸‹ <code>localhost:3000/index.html</code> è¯•è¯•å§!</p><p><img src=\\\"https://i.imgur.com/FpFASxK.png\\\" alt=\\\"Screen_Shot_2018-10-07_at_11_12_19_PM\\\"></p><p>å¯ä»¥çœ‹åˆ°ç°åœ¨ <code>Content-Type</code> \\bå·²ç»è¢«æ­£ç¡®è®¾ç½®äº†!</p><h2 id=\\\"é‡æ„ä»£ç \\\"><a href=\\\"#é‡æ„ä»£ç \\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> é‡æ„ä»£ç </h2><p>ç°åœ¨æ¥çœ‹çœ‹ä½ çš„ä»£ç , æ˜¯ä¸æ˜¯å¼€å§‹æ„Ÿè§‰æœ‰ç‚¹ä¹±ç³Ÿç³Ÿçš„.  æˆ‘æƒ³èªæ˜çš„ä½ å·²ç»å‘ç°, æ•´ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨çš„ä»£ç å°±æ˜¯åœ¨åšä¸€ä»¶äº‹: å“åº”å›å®¢æˆ·ç«¯æƒ³è¦çš„é™æ€æ–‡ä»¶.  è¿™æ®µä»£ç èŒè´£å•ä¸€, ä¸”å¤ç”¨é¢‘ç‡å¾ˆé«˜.  é‚£ä¹ˆæˆ‘ä»¬æœ‰ç†ç”±å°†å…¶å°è£…æˆä¸€ä¸ªæ¨¡å—.</p><p>å…·ä½“çš„è¿‡ç¨‹æˆ‘å°±ä¸èµ˜è¿°äº†. ä»¥ä¸‹æ˜¯æˆ‘çš„æ¨¡å—ä»£ç :</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token comment\\\">// readStaticFile.js</span>\\n\\n<span class=\\\"token comment\\\">// å¼•å…¥ä¾èµ–çš„æ¨¡å—</span>\\n<span class=\\\"token keyword\\\">var</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> fs <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> mime <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'mime'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">readStaticFile</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">,</span> filePathname<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n\\n    <span class=\\\"token keyword\\\">var</span> ext <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>filePathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>ext<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> mimeType <span class=\\\"token operator\\\">=</span> mime<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getType</span><span class=\\\"token punctuation\\\">(</span>ext<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    \\n    <span class=\\\"token comment\\\">// åˆ¤æ–­è·¯å¾„æ˜¯å¦æœ‰åç¼€, æœ‰çš„è¯åˆ™è¯´æ˜å®¢æˆ·ç«¯è¦è¯·æ±‚çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ </span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>ext<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// æ ¹æ®ä¼ å…¥çš„ç›®æ ‡æ–‡ä»¶è·¯å¾„æ¥è¯»å–å¯¹åº”æ–‡ä»¶</span>\\n        fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFile</span><span class=\\\"token punctuation\\\">(</span>filePathname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">,</span> data<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=&gt;</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token comment\\\">// é”™è¯¯å¤„ç†</span>\\n            <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">404</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">&quot;Content-Type&quot;</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">&quot;text/plain&quot;</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;404 - NOT FOUND&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n                res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">writeHead</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">&quot;Content-Type&quot;</span><span class=\\\"token punctuation\\\">:</span> mimeType <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>data<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">end</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// è¿”å› false è¡¨ç¤º, å®¢æˆ·ç«¯æƒ³è¦çš„ æ˜¯ é™æ€æ–‡ä»¶</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// è¿”å› false è¡¨ç¤º, å®¢æˆ·ç«¯æƒ³è¦çš„ ä¸æ˜¯ é™æ€æ–‡ä»¶</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// å¯¼å‡ºå‡½æ•°</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> readStaticFile<span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>ç”¨äºè¯»å–é™æ€æ–‡ä»¶çš„æ¨¡å— <code>readStaticFile</code> å°è£…å¥½äº†ä¹‹å.  æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ç›®å½•é‡Œæ–°å»ºä¸€ä¸ª modules ç›®å½•, ç”¨äºå­˜æ”¾æ¨¡å—.  ä»¥ä¸‹æ˜¯æˆ‘ç›®å‰çš„é¡¹ç›®ç»“æ„.</p><p><img src=\\\"https://i.imgur.com/qnWZriD.png\\\" alt=\\\"Screen Shot 2018-10-08 at 3.55.58 PM\\\"></p><p>å°è£…å¥½äº†æ¨¡å—ä¹‹å, æˆ‘ä»¬å°±å¯ä»¥åˆ å»æœåŠ¡å™¨ä»£ç é‡Œé‚£æ®µ\\bè¯»å–æ–‡ä»¶çš„ä»£ç äº†, ç›´æ¥å¼•ç”¨\\bæ¨¡å—å°±è¡Œäº†.  ä»¥ä¸‹æ˜¯æˆ‘ä¿®æ”¹åçš„\\b server.js ä»£ç :</p><div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token comment\\\">// server.js </span>\\n\\n<span class=\\\"token comment\\\">// å¼•å…¥ç›¸å…³æ¨¡å—</span>\\n<span class=\\\"token keyword\\\">var</span> http <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'http'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> url <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'url'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> readStaticFile <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./modules/readStaticFile'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// æ­å»º HTTP æœåŠ¡å™¨</span>\\n<span class=\\\"token keyword\\\">var</span> server <span class=\\\"token operator\\\">=</span> http<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createServer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">var</span> urlObj <span class=\\\"token operator\\\">=</span> url<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">.</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> urlPathname <span class=\\\"token operator\\\">=</span> urlObj<span class=\\\"token punctuation\\\">.</span>pathname<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">var</span> filePathname <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">&quot;/public&quot;</span><span class=\\\"token punctuation\\\">,</span> urlPathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    \\n    <span class=\\\"token comment\\\">// è¯»å–é™æ€æ–‡ä»¶</span>\\n    <span class=\\\"token function\\\">readStaticFile</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">,</span> filePathname<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// åœ¨ 3000 ç«¯å£ç›‘å¬è¯·æ±‚</span>\\nserver<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;æœåŠ¡å™¨è¿è¡Œä¸­.&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£:&quot;</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n</code></pre></div><p>ğŸ˜† å¥½å•¦! å¤§åŠŸå‘Šæˆ! åœ¨è¿™ä¸€ç¯‡æˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•è·å–å’Œè§£æ\\bå®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ URL, å¦‚ä½•è¯»å–æ–‡ä»¶, è¿˜å°è¯•å°è£…äº†ä¸€ä¸ªæ¨¡å—.</p>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"]}