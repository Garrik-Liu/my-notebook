<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modifying a Table with DML Statements  | Garrik 的笔记</title>
    <meta name="description" content="这里是 Garrik 的前端笔记本">
    
    
    <link rel="preload" href="/front-end-notebook/assets/css/54.styles.a1c0d9b6.css" as="style"><link rel="preload" href="/front-end-notebook/assets/js/app.43425d8b.js" as="script"><link rel="preload" href="/front-end-notebook/assets/js/9.3e253e8c.js" as="script"><link rel="prefetch" href="/front-end-notebook/assets/js/28.b2b9c149.js"><link rel="prefetch" href="/front-end-notebook/assets/js/1.0c5d9443.js"><link rel="prefetch" href="/front-end-notebook/assets/js/2.42714b61.js"><link rel="prefetch" href="/front-end-notebook/assets/js/3.d64fcc09.js"><link rel="prefetch" href="/front-end-notebook/assets/js/4.006e6fde.js"><link rel="prefetch" href="/front-end-notebook/assets/js/5.4b9a4b3a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/6.37076ba4.js"><link rel="prefetch" href="/front-end-notebook/assets/js/7.7aef81d5.js"><link rel="prefetch" href="/front-end-notebook/assets/js/8.ea187a27.js"><link rel="prefetch" href="/front-end-notebook/assets/js/10.6daac8ea.js"><link rel="prefetch" href="/front-end-notebook/assets/js/11.7d71d527.js"><link rel="prefetch" href="/front-end-notebook/assets/js/12.45e6af7b.js"><link rel="prefetch" href="/front-end-notebook/assets/js/13.50aafb9a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/14.d34ed3ca.js"><link rel="prefetch" href="/front-end-notebook/assets/js/15.bd0a8ad4.js"><link rel="prefetch" href="/front-end-notebook/assets/js/16.68225b11.js"><link rel="prefetch" href="/front-end-notebook/assets/js/17.27d46ba5.js"><link rel="prefetch" href="/front-end-notebook/assets/js/18.92d41a96.js"><link rel="prefetch" href="/front-end-notebook/assets/js/19.eaef9cd5.js"><link rel="prefetch" href="/front-end-notebook/assets/js/20.76b97377.js"><link rel="prefetch" href="/front-end-notebook/assets/js/21.8e55833a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/22.d365db7e.js"><link rel="prefetch" href="/front-end-notebook/assets/js/23.f39a8bdf.js"><link rel="prefetch" href="/front-end-notebook/assets/js/24.dc077440.js"><link rel="prefetch" href="/front-end-notebook/assets/js/25.0bdc5baf.js"><link rel="prefetch" href="/front-end-notebook/assets/js/26.5e18510e.js"><link rel="prefetch" href="/front-end-notebook/assets/js/27.289b6f27.js"><link rel="prefetch" href="/front-end-notebook/assets/js/0.5f98faeb.js"><link rel="prefetch" href="/front-end-notebook/assets/js/29.2939030b.js"><link rel="prefetch" href="/front-end-notebook/assets/js/30.8e66e1c9.js"><link rel="prefetch" href="/front-end-notebook/assets/js/31.563ef2f7.js"><link rel="prefetch" href="/front-end-notebook/assets/js/32.de1eec5a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/33.0b165b2c.js"><link rel="prefetch" href="/front-end-notebook/assets/js/34.dc8c22d6.js"><link rel="prefetch" href="/front-end-notebook/assets/js/35.5237bafd.js"><link rel="prefetch" href="/front-end-notebook/assets/js/36.f06d46c9.js"><link rel="prefetch" href="/front-end-notebook/assets/js/37.afdca4dd.js"><link rel="prefetch" href="/front-end-notebook/assets/js/38.7e91c4ca.js"><link rel="prefetch" href="/front-end-notebook/assets/js/39.3544b9fc.js"><link rel="prefetch" href="/front-end-notebook/assets/js/40.bb6876b9.js"><link rel="prefetch" href="/front-end-notebook/assets/js/41.d4bb6afd.js"><link rel="prefetch" href="/front-end-notebook/assets/js/42.1627ae58.js"><link rel="prefetch" href="/front-end-notebook/assets/js/43.a1e33fb6.js"><link rel="prefetch" href="/front-end-notebook/assets/js/44.94c5eeb6.js"><link rel="prefetch" href="/front-end-notebook/assets/js/45.a20ad4ad.js"><link rel="prefetch" href="/front-end-notebook/assets/js/46.c115657a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/47.ad1222a2.js"><link rel="prefetch" href="/front-end-notebook/assets/js/48.a8ec97ea.js"><link rel="prefetch" href="/front-end-notebook/assets/js/49.570405d2.js"><link rel="prefetch" href="/front-end-notebook/assets/js/50.8bd100a6.js"><link rel="prefetch" href="/front-end-notebook/assets/js/51.8c3631e9.js"><link rel="prefetch" href="/front-end-notebook/assets/js/52.13234342.js"><link rel="prefetch" href="/front-end-notebook/assets/js/53.3d91af13.js">
    <link rel="stylesheet" href="/front-end-notebook/assets/css/54.styles.a1c0d9b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/front-end-notebook/" class="home-link router-link-active"><!----><span class="site-name">
      Garrik 的笔记
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-notebook/" class="nav-link">主页</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-notebook/" class="nav-link">主页</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Modifying a Table with DML Statements </span><!----></p><ul class="sidebar-group-items"><li><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#insert" class="sidebar-link">INSERT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#inserting-default" class="sidebar-link">INSERTing DEFAULT</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#inserting-null" class="sidebar-link">INSERTing NULL</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#inserting-date-time-values" class="sidebar-link">INSERTing Date/Time Values</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#inserting-interval-values" class="sidebar-link">INSERTing Interval Values</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#inserting-values-with-subqueries" class="sidebar-link">INSERTing Values with Subqueries</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#inserting-values-with-insert-select" class="sidebar-link">INSERTing Values with INSERT SELECT</a></li></ul></li><li><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#update" class="sidebar-link">UPDATE</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#delete" class="sidebar-link">DELETE</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#sequences" class="sidebar-link">Sequences</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#creating-sequences" class="sidebar-link">Creating Sequences</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#using-sequences" class="sidebar-link">Using Sequences</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#deleting-sequences" class="sidebar-link">Deleting Sequences</a></li></ul></li><li><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#transactions" class="sidebar-link">Transactions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#rollback-statement" class="sidebar-link">ROLLBACK Statement</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#commit-statement" class="sidebar-link">Commit Statement</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/Modifying_a_Table_with_DML_Statements.html#savepoints" class="sidebar-link">Savepoints</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="modifying-a-table-with-dml-statements"><a href="#modifying-a-table-with-dml-statements" aria-hidden="true" class="header-anchor">#</a> Modifying a Table with DML Statements</h1><h2 id="insert"><a href="#insert" aria-hidden="true" class="header-anchor">#</a> INSERT</h2><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">[</span><span class="token punctuation">(</span>column1_name<span class="token punctuation">[</span><span class="token punctuation">,</span> column2_name<span class="token punctuation">]</span><span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">,</span> columnN_name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>column1_value<span class="token punctuation">[</span><span class="token punctuation">,</span> column2_value<span class="token punctuation">]</span><span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">,</span> columnN_value<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">[</span><span class="token punctuation">(</span>column1_name<span class="token punctuation">[</span><span class="token punctuation">,</span> column2_name<span class="token punctuation">]</span><span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">,</span> columnN_name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> select_statement
</code></pre></div><p>example:</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1280</span><span class="token punctuation">,</span> <span class="token string">'Kevin'</span><span class="token punctuation">,</span> <span class="token string">'Dunn'</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inserting-default"><a href="#inserting-default" aria-hidden="true" class="header-anchor">#</a> INSERTing DEFAULT</h3><p>DEFAULT can be inserted into a table in two ways:</p><ol><li>DEFAULT is explicitly indicated as an insert value</li><li>A column with a default value is omitted in the INSERT statement.</li></ol><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1280</span><span class="token punctuation">,</span> <span class="token string">'Kevin'</span><span class="token punctuation">,</span> <span class="token string">'Dunn'</span><span class="token punctuation">,</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1280</span><span class="token punctuation">,</span> <span class="token string">'Kevin'</span><span class="token punctuation">,</span> <span class="token string">'Dunn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inserting-null"><a href="#inserting-null" aria-hidden="true" class="header-anchor">#</a> INSERTing NULL</h3><p>NULL can be inserted into a table in two ways:</p><ol><li>NULL is explicitly indicated as an insert value</li><li>A column without a default value is omitted in the INSERT statement.</li></ol><div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1280</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'Dunn'</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1280</span><span class="token punctuation">,</span> <span class="token string">'Dunn'</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inserting-date-time-values"><a href="#inserting-date-time-values" aria-hidden="true" class="header-anchor">#</a> INSERTing Date/Time Values</h3><p>To insert a date/time value into a DATE or TIMESTAMP type column, the date text must be converted to a date type in order to be inserted.</p><p>Use:</p><div class="language-SQL extra-class"><pre class="language-sql"><code>TO_DATE<span class="token punctuation">(</span><span class="token string">'date_string'</span><span class="token punctuation">,</span> <span class="token string">'date_format_model'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> card_accounts <span class="token punctuation">(</span>card_number<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> middle_initial<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> valid_date<span class="token punctuation">,</span> expiry_date<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">55555555</span><span class="token punctuation">,</span> <span class="token string">'Cathy'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'Puck'</span><span class="token punctuation">,</span> TO_DATE<span class="token punctuation">(</span><span class="token string">'11-NOV-2005'</span><span class="token punctuation">,</span> <span class="token string">'DD-MON-YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> TO_DATE<span class="token punctuation">(</span><span class="token string">'10-NOV-2006'</span><span class="token punctuation">,</span> <span class="token string">'DD-MON-YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inserting-interval-values"><a href="#inserting-interval-values" aria-hidden="true" class="header-anchor">#</a> INSERTing Interval Values</h3><p>To insert interval values into a INTERVAL YEAR TO MONTH or INTERVAL DAY TO SECOND type column, the interval text must be converted to the appropriate interval type in order to be inserted.</p><p>Use:</p><div class="language-SQL extra-class"><pre class="language-sql"><code>TO_YMINTERVAL<span class="token punctuation">(</span><span class="token string">'years-months'</span><span class="token punctuation">)</span>
</code></pre></div><p>for the INTERVAL YEAR TO MONTH type</p><div class="language-SQL extra-class"><pre class="language-sql"><code>TO_DSINTERVAL<span class="token punctuation">(</span><span class="token string">'days HH:MI:SS.99'</span><span class="token punctuation">)</span> 
</code></pre></div><p>for the INTERVAL DAYS TO SECOND type.</p><div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> events <span class="token punctuation">(</span>duration<span class="token punctuation">,</span> next_event<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>TO_DSINTERVAL<span class="token punctuation">(</span><span class="token string">'0 02:30:00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> TO_YMINTERVAL<span class="token punctuation">(</span><span class="token string">'1-6'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inserting-values-with-subqueries"><a href="#inserting-values-with-subqueries" aria-hidden="true" class="header-anchor">#</a> INSERTing Values with Subqueries</h3><p>To insert values into a table from a subquery, simply include the subquery in the VALUES list.</p><p>Example: Imagine the charity donor with receipt number 1280 has decided to donate another $200. A subquery can be used to retrieve the donor's name.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2540</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> first_name <span class="token keyword">FROM</span> donations <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> donations <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inserting-values-with-insert-select"><a href="#inserting-values-with-insert-select" aria-hidden="true" class="header-anchor">#</a> INSERTing Values with INSERT SELECT</h3><p>To insert the resulting rows from a SELECT statement into a table, simply include the SELECT statement as values list.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token number">2540</span><span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> <span class="token number">200</span> <span class="token keyword">FROM</span> donations <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="update"><a href="#update" aria-hidden="true" class="header-anchor">#</a> UPDATE</h2><p>Existing data in the table is modified using the UPDATE statement. The basic syntax of the UPDATE statement is :</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> column1_name <span class="token operator">=</span> expression1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2_name <span class="token operator">=</span> expression2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> columnN_name <span class="token operator">=</span> expressionN<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
</code></pre></div><p>Note that the WHERE condition is required to indicate which rows will be affected.
If WHERE is omitted, the ALL of the rows in the table will be affected.
Typically the WHERE clause identifies a unique row by its primary key.</p><p>The values NULL and DEFAULT can be used to specify a NULL value or a column's default value.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> donations <span class="token keyword">SET</span> last_name <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">880</span> <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> donations <span class="token keyword">SET</span> last_name <span class="token operator">=</span> <span class="token string">'Dunn'</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
</code></pre></div><p>? In a mult-user environment where another user may have modified the data in question, the original data values are also expressed in the WHERE clause to ensure that no data is lost in the update. This is called a pessimistic update.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> donations <span class="token keyword">SET</span> last_name <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">880</span> <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span> <span class="token operator">AND</span> last_name <span class="token operator">=</span> <span class="token string">'Dunn'</span> <span class="token operator">AND</span> amount <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
</code></pre></div><p>By contrast, an optimistic update will specify minimally the primary key value in the where clause assuming the data being updated has not changed since it was previously read.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> donations <span class="token keyword">SET</span> last_name <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">880</span> <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
</code></pre></div><p>Again, subqueries can be used; to set a column to a value specified by a subquery, include the subquery after the <code>=</code>.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> donations <span class="token keyword">SET</span> last_name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> donations <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">2540</span><span class="token punctuation">)</span><span class="token punctuation">,</span> amount <span class="token operator">=</span> <span class="token number">880</span> <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
</code></pre></div><p>OR</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> donations <span class="token keyword">SET</span> <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span> <span class="token number">880</span> <span class="token keyword">FROM</span> donations <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">2540</span><span class="token punctuation">)</span> <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="delete"><a href="#delete" aria-hidden="true" class="header-anchor">#</a> DELETE</h2><p>Existing data in the table is deleted using the DELETE statement. The basic syntax of the DELETE statement is:</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
</code></pre></div><p>Again, note that the WHERE condition is required to indicate which rows will be deleted. If WHERE is omitted, then ALL of the rows are deleted. Typically the WHERE clause identifies a unique row by its primary key.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> donations <span class="token keyword">WHERE</span> receipt_no <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>
</code></pre></div><p>Note that a row with a primary key cannot be deleted while a foreign key still refers to that primary key.</p><p>If it is desireable that any related foreign keys are automatically removed as well or that foreign keys are set to NULL, the foreign key can be defined with the phrase <code>ON DELETE CASCADE</code> or <code>ON DELETE SET NULL</code>.</p><p>In CREATE TABLE or ALTER TABLE statement:</p><div class="language-sql extra-class"><pre class="language-sql"><code>receipt_no NUMBER<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
    <span class="token keyword">CONSTRAINT</span> receipt_no_fk <span class="token keyword">REFERENCES</span> donations<span class="token punctuation">(</span>receipt_no<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
</code></pre></div><p>or</p><div class="language-sql extra-class"><pre class="language-sql"><code>receipt_no NUMBER<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
    <span class="token keyword">CONSTRAINT</span> receipt_no_fk <span class="token keyword">REFERENCES</span> donations<span class="token punctuation">(</span>receipt_no<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>
</code></pre></div><h2 id="sequences"><a href="#sequences" aria-hidden="true" class="header-anchor">#</a> Sequences</h2><h3 id="creating-sequences"><a href="#creating-sequences" aria-hidden="true" class="header-anchor">#</a> Creating Sequences</h3><p>A sequence is a database object that can be used to create unique surrogate key values. A sequence can be created using the CREATE SEQUENCE statement.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> SEQUENCE receipt_no_sequence
    <span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">1290</span>
    INCREMENT <span class="token keyword">BY</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><p>If START WITH is not specified, the default is 1. If INCREMENT BY is not specified, the default is 1.</p><h3 id="using-sequences"><a href="#using-sequences" aria-hidden="true" class="header-anchor">#</a> Using Sequences</h3><p>To retrieve the next value in a sequence, reference the NEXTVAL pseudocolumn using the general syntax:</p><div class="language-sql extra-class"><pre class="language-sql"><code>sequence_name<span class="token punctuation">.</span>NEXTVAL
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> donations <span class="token punctuation">(</span>receipt_no<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>receipt_no_sequence<span class="token punctuation">.</span>NEXTVAL<span class="token punctuation">,</span> <span class="token string">'Kevin'</span><span class="token punctuation">,</span> <span class="token string">'Dunn'</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Reference the CURRVAL pseudocolumn to get the last generated sequence value on the connection. This is useful when inserting foreign key values when the primary key value was generated with the sequence.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> SEQUENCE make_id_sequence
    <span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> makes <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> make<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>NEXTVAL<span class="token punctuation">,</span> <span class="token string">'Infinity'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> models <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> model<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>CURRVAL<span class="token punctuation">,</span> <span class="token string">'G35 Sedan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> makes <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> make<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>NEXTVAL<span class="token punctuation">,</span> <span class="token string">'Jaguar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> models <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> model<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>CURRVAL<span class="token punctuation">,</span> <span class="token string">'2005 XJR'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> makes <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> make<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>NEXTVAL<span class="token punctuation">,</span> <span class="token string">'Lexus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> models <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> model<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>CURRVAL<span class="token punctuation">,</span> <span class="token string">'GS 300 AWD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> models <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> model<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>CURRVAL<span class="token punctuation">,</span> <span class="token string">'LS 430'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> makes <span class="token punctuation">(</span>make_id<span class="token punctuation">,</span> make<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>make_id_sequence<span class="token punctuation">.</span>NEXTVAL<span class="token punctuation">,</span> <span class="token string">'Mercedes Benz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deleting-sequences"><a href="#deleting-sequences" aria-hidden="true" class="header-anchor">#</a> Deleting Sequences</h3><p>To delete a sequence object, use the DROP SEQUENCE statement.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> SEQUENCE receipt_no_sequence<span class="token punctuation">;</span>
</code></pre></div><h2 id="transactions"><a href="#transactions" aria-hidden="true" class="header-anchor">#</a> Transactions</h2><p>A transaction is defined as a logical unit of work — a set of database changes to one or more tables that accomplish a defined task.</p><p>A transaction begins after a COMMIT statement, a ROLLBACK statement, or an initial database connection. A transaction ends when a COMMIT statement is processed, a ROLLBACK statement is processed, or the database connection is terminated</p><p>Example:</p><p>Imagine transfering $200 from your savings account to your chequing account through an ATM. You insert your card, select transfer, specify from savings and to chequing, specify the amount as $200 and press OK. To complete the transaction, the system must deduct $200 from your savings account balance and add $200 to your chequing account balance. The transaction is only complete when both steps have been performed — that is, both operations comprise a single logical unit of work.</p><h3 id="rollback-statement"><a href="#rollback-statement" aria-hidden="true" class="header-anchor">#</a> ROLLBACK Statement</h3><p>ROLLBACK statement will undo all the statement since the connection was established or since the last committed transaction.</p><p>In the above example, the ATM software might issue an UPDATE statement to deduct an amount of $200 from your savings account and then issue another UPDATE statement to add an amount of $200 to your chequing account. Imagine after the first UPDATE statement was issued, but before the second UPDATE statement was issued, the CANCEL button was pressed (on the ATM). To cancel the operation, the ATM must not only abandon the second UPDATE statement, but also undo the changes caused by the first UPDATE statement. The ROLLBACK statement will undo the UPDATE statement (and any other statements since the connection was established or since the last committed transaction).</p><h3 id="commit-statement"><a href="#commit-statement" aria-hidden="true" class="header-anchor">#</a> Commit Statement</h3><p>A COMMIT statement would finalize the transaction.</p><p>In the above example, the ATM software might issue an UPDATE statement to deduct an amount of $200 from your savings account and then issue another UPDATE statement to add an amount of $200 to your chequing account. A COMMIT statement would finalize the transaction so that it cannot be undone.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">-</span> <span class="token number">200</span> <span class="token keyword">WHERE</span> account_no <span class="token operator">=</span> <span class="token number">12345678</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">+</span> <span class="token number">200</span> <span class="token keyword">WHERE</span> account_no <span class="token operator">=</span> <span class="token number">98765432</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="savepoints"><a href="#savepoints" aria-hidden="true" class="header-anchor">#</a> Savepoints</h3><p>If a transaction (which is a logical unit of work) is actually made up of smaller sub-transactions each of which is also a logical unit of work, each sub-transaction can be noted by specifying a savepoint</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SAVEPOINT</span> savepoint_name<span class="token punctuation">;</span>
</code></pre></div><p>Then, if part of the transaction must be undone, it could be undone to a specified savepoint</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> savepoint_name<span class="token punctuation">;</span>
</code></pre></div></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/front-end-notebook/assets/js/9.3e253e8c.js" defer></script><script src="/front-end-notebook/assets/js/app.43425d8b.js" defer></script>
  </body>
</html>
