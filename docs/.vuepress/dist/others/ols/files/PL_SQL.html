<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PL/SQL | Garrik 的笔记</title>
    <meta name="description" content="这里是 Garrik 的前端笔记本">
    
    
    <link rel="preload" href="/front-end-notebook/assets/css/44.styles.1c7aad30.css" as="style"><link rel="preload" href="/front-end-notebook/assets/js/app.03c0ffaf.js" as="script"><link rel="preload" href="/front-end-notebook/assets/js/7.8a649f03.js" as="script"><link rel="prefetch" href="/front-end-notebook/assets/js/23.386890bd.js"><link rel="prefetch" href="/front-end-notebook/assets/js/1.6bf88b11.js"><link rel="prefetch" href="/front-end-notebook/assets/js/2.2c0c3430.js"><link rel="prefetch" href="/front-end-notebook/assets/js/3.b2343fdb.js"><link rel="prefetch" href="/front-end-notebook/assets/js/4.bc6bb5da.js"><link rel="prefetch" href="/front-end-notebook/assets/js/5.675e8907.js"><link rel="prefetch" href="/front-end-notebook/assets/js/6.49115ec1.js"><link rel="prefetch" href="/front-end-notebook/assets/js/8.c516c451.js"><link rel="prefetch" href="/front-end-notebook/assets/js/9.9cb2f1c6.js"><link rel="prefetch" href="/front-end-notebook/assets/js/10.ac2ffc23.js"><link rel="prefetch" href="/front-end-notebook/assets/js/11.d91ef922.js"><link rel="prefetch" href="/front-end-notebook/assets/js/12.bf62e3dd.js"><link rel="prefetch" href="/front-end-notebook/assets/js/13.c8ede19a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/14.459ae9d1.js"><link rel="prefetch" href="/front-end-notebook/assets/js/15.aeac8cdc.js"><link rel="prefetch" href="/front-end-notebook/assets/js/16.ace08218.js"><link rel="prefetch" href="/front-end-notebook/assets/js/17.87b49ef0.js"><link rel="prefetch" href="/front-end-notebook/assets/js/18.b3272404.js"><link rel="prefetch" href="/front-end-notebook/assets/js/19.3b7d02c0.js"><link rel="prefetch" href="/front-end-notebook/assets/js/20.94f7ae8d.js"><link rel="prefetch" href="/front-end-notebook/assets/js/21.96853662.js"><link rel="prefetch" href="/front-end-notebook/assets/js/22.02fed74e.js"><link rel="prefetch" href="/front-end-notebook/assets/js/0.3f18b6a7.js"><link rel="prefetch" href="/front-end-notebook/assets/js/24.e7c28072.js"><link rel="prefetch" href="/front-end-notebook/assets/js/25.a84cb8c5.js"><link rel="prefetch" href="/front-end-notebook/assets/js/26.643c7453.js"><link rel="prefetch" href="/front-end-notebook/assets/js/27.cbda85e0.js"><link rel="prefetch" href="/front-end-notebook/assets/js/28.78b54c32.js"><link rel="prefetch" href="/front-end-notebook/assets/js/29.77e1b6b2.js"><link rel="prefetch" href="/front-end-notebook/assets/js/30.82b4a2e9.js"><link rel="prefetch" href="/front-end-notebook/assets/js/31.2e525d92.js"><link rel="prefetch" href="/front-end-notebook/assets/js/32.28438d7f.js"><link rel="prefetch" href="/front-end-notebook/assets/js/33.47dbc9ce.js"><link rel="prefetch" href="/front-end-notebook/assets/js/34.83d24ef9.js"><link rel="prefetch" href="/front-end-notebook/assets/js/35.86af19a2.js"><link rel="prefetch" href="/front-end-notebook/assets/js/36.23592bd1.js"><link rel="prefetch" href="/front-end-notebook/assets/js/37.26c235af.js"><link rel="prefetch" href="/front-end-notebook/assets/js/38.ee2a2e6a.js"><link rel="prefetch" href="/front-end-notebook/assets/js/39.0f84efa7.js"><link rel="prefetch" href="/front-end-notebook/assets/js/40.d3f39e41.js"><link rel="prefetch" href="/front-end-notebook/assets/js/41.2883a8d2.js"><link rel="prefetch" href="/front-end-notebook/assets/js/42.d5cbf2df.js"><link rel="prefetch" href="/front-end-notebook/assets/js/43.f4e50104.js">
    <link rel="stylesheet" href="/front-end-notebook/assets/css/44.styles.1c7aad30.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/front-end-notebook/" class="home-link router-link-active"><!----><span class="site-name">
      Garrik 的笔记
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-notebook/" class="nav-link">主页</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-notebook/" class="nav-link">主页</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>PL/SQL</span><!----></p><ul class="sidebar-group-items"><li><a href="/front-end-notebook/others/ols/files/PL_SQL.html#pl-sql-program-blocks" class="sidebar-link">PL/SQL Program Blocks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/PL_SQL.html#declaration-section" class="sidebar-link">Declaration Section</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/PL_SQL.html#body-section" class="sidebar-link">Body Section</a></li><li class="sidebar-sub-header"><a href="/front-end-notebook/others/ols/files/PL_SQL.html#exception-section" class="sidebar-link">Exception Section</a></li></ul></li><li><a href="/front-end-notebook/others/ols/files/PL_SQL.html#first-example" class="sidebar-link">First Example</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-notebook/others/ols/files/PL_SQL.html#implicit-cursors" class="sidebar-link">Implicit Cursors</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="pl-sql"><a href="#pl-sql" aria-hidden="true" class="header-anchor">#</a> PL/SQL</h1><h2 id="pl-sql-program-blocks"><a href="#pl-sql-program-blocks" aria-hidden="true" class="header-anchor">#</a> PL/SQL Program Blocks</h2><p>PL/SQL stands for Procedural Language extension of SQL</p><p>A PL/SQL program can divided up into three possible sections:</p><ol><li>Declaration Section</li><li>Body Section</li><li>Exception Section</li></ol><p>Note that the Declaration and Exception sections are optional.</p><h3 id="declaration-section"><a href="#declaration-section" aria-hidden="true" class="header-anchor">#</a> Declaration Section</h3><p>Use the Declaration section to declare program variables. Each program variable declaration is of the syntax:</p><div class="language-sql extra-class"><pre class="language-sql"><code>variable_name data_type<span class="token punctuation">;</span>
</code></pre></div><p>Scalar Data Types include:
• VARCHAR2
• CHAR
• DATE
• INTERVAL YEAR TO MONTH
• INTERVAL DAY TO SECOND
• NUMBER
• BINARY_INTEGER, INTEGER, INT, SMALLINT
• DEC, DECIMAL, DOUBLE PRECISION, NUMERIC, REAL, BINARY_FLOAT, BINARY_DOUBLE
• BOOLEAN</p><p>Reference Types</p><p><strong>%TYPE</strong>
This type specifies a variable that references a single database field.</p><p>Syntax:</p><div class="language-sql extra-class"><pre class="language-sql"><code>variable_name tablename<span class="token punctuation">.</span>fieldname<span class="token operator">%</span><span class="token keyword">TYPE</span> 
</code></pre></div><p><strong>%ROWTYPE</strong>
This type specifies a variable that references an entire data record.</p><p>Syntax:</p><div class="language-sql extra-class"><pre class="language-sql"><code>variable_name tablename<span class="token operator">%</span>ROWTYPE 
</code></pre></div><h3 id="body-section"><a href="#body-section" aria-hidden="true" class="header-anchor">#</a> Body Section</h3><p>The Body section contains the actual program statements for the PL/SQL program. It includes:</p><ul><li>Comments
<ul><li>/* Multi-line */</li><li>-- Single line</li></ul></li><li>Arithmetic Operators: +,-,*,/,**</li><li>String Concatenation Operator: ||</li><li>String Functions
<ul><li>LENGTH</li><li>LTRIM</li><li>RTRIM</li><li>UPPER</li><li>LOWER</li><li>INITCAP</li><li>INSTR (one-based index)</li><li>SUBSTR (one-based index)</li></ul></li><li>Assignment Statements (:=)</li><li>Relational Operators: =, &lt;&gt;, !=, &gt;, &gt;=, &lt;, &lt;=</li><li>Logical Operators: NOT, AND, OR</li><li>Decision Statements (IF / THEN / ELSIF / ELSE, CASE)</li><li>Loop Statements (LOOP, WHILE, FOR)</li><li>DML Statements (SELECT, INSERT, UPDATE, DELETE)</li><li>Explicit Cursor Statements (OPEN, FETCH, CLOSE)</li></ul><h4 id="output"><a href="#output" aria-hidden="true" class="header-anchor">#</a> Output</h4><p>To output values to the console, use the functions</p><div class="language-sql extra-class"><pre class="language-sql"><code>DBMS_OUTPUT<span class="token punctuation">.</span>PUT<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
DBMS_OUTPUT<span class="token punctuation">.</span>NEW_LINE<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="assignment-statments"><a href="#assignment-statments" aria-hidden="true" class="header-anchor">#</a> Assignment Statments</h4><p>Use the <code>:=</code> operator to assign a value to a variable.</p><p>E.g.</p><div class="language-sql extra-class"><pre class="language-sql"><code>var :<span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="case-statements"><a href="#case-statements" aria-hidden="true" class="header-anchor">#</a> CASE Statements</h4><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CASE</span> var
    <span class="token keyword">WHEN</span> value1 <span class="token keyword">THEN</span>
       statement1
    <span class="token keyword">WHEN</span> value2 <span class="token keyword">THEN</span>
       statement2
    <span class="token keyword">ELSE</span>
       statement3
<span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CASE</span>
    <span class="token keyword">WHEN</span> boolean_expression1 <span class="token keyword">THEN</span>
       statement1
    <span class="token keyword">WHEN</span> boolean_expression2 <span class="token keyword">THEN</span>
       statement2
    <span class="token keyword">ELSE</span>
       statement3
<span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="loop-types"><a href="#loop-types" aria-hidden="true" class="header-anchor">#</a> Loop Types</h4><p>LOOP ... EXIT</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">LOOP</span>
    <span class="token keyword">IF</span> condition <span class="token keyword">THEN</span>
       <span class="token keyword">EXIT</span><span class="token punctuation">;</span>
    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>
</code></pre></div><p>LOOP ... EXIT WHEN</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">LOOP</span>
    <span class="token keyword">EXIT</span> <span class="token keyword">WHEN</span> condition<span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>
</code></pre></div><p>WHILE ... LOOP</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">WHILE</span> condition <span class="token keyword">LOOP</span>
<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="loop-continuation"><a href="#loop-continuation" aria-hidden="true" class="header-anchor">#</a> Loop Continuation</h4><p>To continue a loop instead of terminating it, replace <code>EXIT</code> or <code>EXIT WHEN</code> with <code>CONTINUE</code> or <code>CONTINUE WHEN</code>.</p><h4 id="for-loops"><a href="#for-loops" aria-hidden="true" class="header-anchor">#</a> FOR LOOPs</h4><p>In the case of FOR loops, the loop variable is locally declared within the loop statement. That means, it is not necessary to declare the variable in the DECLARE section of the PL/SQL block. Furthermore, a variable declared within the DECLARE section of the PL/SQL block will not be used by the FOR loop.</p><p>FOR LOOP</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">FOR</span> var <span class="token operator">IN</span> <span class="token keyword">start</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">end</span>
<span class="token keyword">LOOP</span>
<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>
</code></pre></div><p>REVERSE FOR LOOP</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">FOR</span> var <span class="token operator">IN</span> REVERSE <span class="token keyword">end</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">start</span>
<span class="token keyword">LOOP</span>
<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="exception-section"><a href="#exception-section" aria-hidden="true" class="header-anchor">#</a> Exception Section</h3><p>Use the Exception section to handle run-time exceptions.</p><p>This section can be used to catch specific types of pre-defined exceptions or generically catch undefined exceptions.</p><p>Syntax:</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">WHEN</span> exception_type <span class="token keyword">THEN</span>
</code></pre></div><p>OR</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">WHEN</span> OTHERS <span class="token keyword">THEN</span>
</code></pre></div><p>User-defined exceptions can also be defined (in the Declaration section) and raised (in the Body section).</p><h2 id="first-example"><a href="#first-example" aria-hidden="true" class="header-anchor">#</a> First Example</h2><p>For our first program, we will simply display the numbers from 1 to 10 on the output screen.</p><p>A PL/SQL code block executed inside a script is known as an anonymous PL/SQL block.</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> SERVEROUTPUT <span class="token keyword">ON</span> SIZE <span class="token number">4000</span>

<span class="token comment">/* Our First PL/SQL Program */</span>
<span class="token keyword">DECLARE</span>
	countnum BINARY_INTEGER<span class="token punctuation">;</span>
	<span class="token keyword">limit</span> BINARY_INTEGER :<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">IF</span> <span class="token keyword">limit</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token keyword">THEN</span> <span class="token comment">-- Check the limit value</span>
		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'Invalid count limit.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">ELSE</span>
		<span class="token keyword">FOR</span> countvar <span class="token operator">IN</span> <span class="token number">1.</span><span class="token number">.10</span> <span class="token comment">-- variable countvar is declared local for the FOR loop</span>
		<span class="token keyword">LOOP</span>
			DBMS_OUTPUT<span class="token punctuation">.</span>PUT<span class="token punctuation">(</span>countvar <span class="token operator">||</span> <span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">CASE</span> countvar
				<span class="token keyword">WHEN</span> <span class="token number">1</span> <span class="token keyword">THEN</span>
					DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">' At the beginning.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">WHEN</span> <span class="token number">5</span> <span class="token keyword">THEN</span>
					DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">' Half way there.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">WHEN</span> <span class="token number">10</span> <span class="token keyword">THEN</span>
					DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">' Last one.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">ELSE</span>
					DBMS_OUTPUT<span class="token punctuation">.</span>NEW_LINE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>
		<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>
		DBMS_OUTPUT<span class="token punctuation">.</span>NEW_LINE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- Print a new line character</span>

		<span class="token comment">-- Repeat the same loop but using LOOP and EXIT WHEN; replace CASE with IF ... ELSIF ... ELSE</span>
		countnum :<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">LOOP</span>
			DBMS_OUTPUT<span class="token punctuation">.</span>PUT<span class="token punctuation">(</span>countnum <span class="token operator">||</span> <span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">IF</span> countnum <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">THEN</span>
				DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">' At the beginning.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ELSIF countnum <span class="token operator">=</span> <span class="token number">5</span> <span class="token keyword">THEN</span>
				DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">' Half way there.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ELSIF countnum <span class="token operator">=</span> <span class="token number">10</span> <span class="token keyword">THEN</span>
				DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">' Last one.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">ELSE</span>
				DBMS_OUTPUT<span class="token punctuation">.</span>NEW_LINE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
			<span class="token keyword">EXIT</span> <span class="token keyword">WHEN</span> countnum <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
			countnum :<span class="token operator">=</span> countnum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>

	<span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
<span class="token operator">/</span>
</code></pre></div><h2 id="implicit-cursors"><a href="#implicit-cursors" aria-hidden="true" class="header-anchor">#</a> Implicit Cursors</h2><p>The output of a SELECT query can be assigned to an implicit cursor providing the query returns <strong>exactly one row</strong></p><p>Example:</p><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> SERVEROUTPUT <span class="token keyword">ON</span> SIZE <span class="token number">4000</span>

<span class="token comment">/* Display the name for manager #7566 and the number of employees the manager manages */</span>

<span class="token keyword">DECLARE</span>
	mgrsearch <span class="token keyword">INTEGER</span> :<span class="token operator">=</span> <span class="token number">7566</span><span class="token punctuation">;</span>
	f_ename emp<span class="token punctuation">.</span>ename<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span> <span class="token comment">-- define f_ename to have the same type as emp.ename</span>
	a_count <span class="token keyword">INTEGER</span><span class="token punctuation">;</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">SELECT</span> ename <span class="token keyword">INTO</span> f_ename <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> empno <span class="token operator">=</span> mgrsearch<span class="token punctuation">;</span>
	<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> a_count <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> mgr <span class="token operator">=</span> mgrsearch<span class="token punctuation">;</span>
	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span>f_ename <span class="token operator">||</span> <span class="token string">' manages '</span> <span class="token operator">||</span> a_count <span class="token operator">||</span> <span class="token string">' employee(s).'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">-- Could also have used a subquery.  E.g.</span>
	<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> mgr <span class="token operator">=</span> mgrsearch<span class="token punctuation">)</span> <span class="token keyword">INTO</span> f_ename<span class="token punctuation">,</span> a_count <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> empno <span class="token operator">=</span> mgrsearch<span class="token punctuation">;</span>
	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span>f_ename <span class="token operator">||</span> <span class="token string">' manages '</span> <span class="token operator">||</span> a_count <span class="token operator">||</span> <span class="token string">' employee(s).'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
EXCEPTION
	<span class="token keyword">WHEN</span> NO_DATA_FOUND <span class="token keyword">THEN</span>
		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'There is no manager with employee number '</span> <span class="token operator">||</span> mgrsearch <span class="token operator">||</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">WHEN</span> OTHERS <span class="token keyword">THEN</span>
		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'An unexpected error has occurred.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
<span class="token operator">/</span>
</code></pre></div><p>If the SELECT statement used with an implicit cursor returns zero rows or more than one row, an error results.</p><p>This program displays the name of employee number 7566 as well as how many employees he manages.</p><p>Common exception types include:</p><ul><li>DUP_VAL_ON_INDEX — an attempt was made to store a duplicate column value on a column with a UNIQUE or PRIMARY KEY constraint</li><li>NO_DATA_FOUND — a SELECT ... INTO statement did not return any rows.</li><li>TOO_MANY_ROWS — a SELECT ... INTO statement returned more than one row.</li><li>INVALID_NUMBER — the program has failed to convert a string into a number.</li><li>ZERO_DIVIDE — a divide by zero has occurred.</li></ul></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/front-end-notebook/assets/js/7.8a649f03.js" defer></script><script src="/front-end-notebook/assets/js/app.03c0ffaf.js" defer></script>
  </body>
</html>
