<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>树 | Garrik 的笔记</title>
    <meta name="description" content="这里是 Garrik 的前端笔记本">
    
    
    <link rel="preload" href="/my-notebook/assets/css/0.styles.24c4c005.css" as="style"><link rel="preload" href="/my-notebook/assets/js/app.44efac36.js" as="script"><link rel="preload" href="/my-notebook/assets/js/2.4605f295.js" as="script"><link rel="preload" href="/my-notebook/assets/js/244.45f99f2c.js" as="script"><link rel="prefetch" href="/my-notebook/assets/js/10.18dc3fd2.js"><link rel="prefetch" href="/my-notebook/assets/js/100.7769ae0d.js"><link rel="prefetch" href="/my-notebook/assets/js/101.8a942a72.js"><link rel="prefetch" href="/my-notebook/assets/js/102.ef61d6bf.js"><link rel="prefetch" href="/my-notebook/assets/js/103.2cf67d1e.js"><link rel="prefetch" href="/my-notebook/assets/js/104.9c3e1de2.js"><link rel="prefetch" href="/my-notebook/assets/js/105.a8870bdc.js"><link rel="prefetch" href="/my-notebook/assets/js/106.efda3531.js"><link rel="prefetch" href="/my-notebook/assets/js/107.073b9536.js"><link rel="prefetch" href="/my-notebook/assets/js/108.4b5ee88d.js"><link rel="prefetch" href="/my-notebook/assets/js/109.6774aa61.js"><link rel="prefetch" href="/my-notebook/assets/js/11.7ffae4c3.js"><link rel="prefetch" href="/my-notebook/assets/js/110.afef8060.js"><link rel="prefetch" href="/my-notebook/assets/js/111.502cf37f.js"><link rel="prefetch" href="/my-notebook/assets/js/112.f06f6854.js"><link rel="prefetch" href="/my-notebook/assets/js/113.aee04b9d.js"><link rel="prefetch" href="/my-notebook/assets/js/114.41f76dfa.js"><link rel="prefetch" href="/my-notebook/assets/js/115.0f8c97fa.js"><link rel="prefetch" href="/my-notebook/assets/js/116.b4449457.js"><link rel="prefetch" href="/my-notebook/assets/js/117.b24c25da.js"><link rel="prefetch" href="/my-notebook/assets/js/118.335a5e67.js"><link rel="prefetch" href="/my-notebook/assets/js/119.b89bfd90.js"><link rel="prefetch" href="/my-notebook/assets/js/12.b6fd6363.js"><link rel="prefetch" href="/my-notebook/assets/js/120.3b3ea757.js"><link rel="prefetch" href="/my-notebook/assets/js/121.9803017e.js"><link rel="prefetch" href="/my-notebook/assets/js/122.9b8f709e.js"><link rel="prefetch" href="/my-notebook/assets/js/123.901f1955.js"><link rel="prefetch" href="/my-notebook/assets/js/124.ae45ffe8.js"><link rel="prefetch" href="/my-notebook/assets/js/125.3455494a.js"><link rel="prefetch" href="/my-notebook/assets/js/126.e0f30920.js"><link rel="prefetch" href="/my-notebook/assets/js/127.863d2ef4.js"><link rel="prefetch" href="/my-notebook/assets/js/128.09d99bb6.js"><link rel="prefetch" href="/my-notebook/assets/js/129.035568fa.js"><link rel="prefetch" href="/my-notebook/assets/js/13.063decc4.js"><link rel="prefetch" href="/my-notebook/assets/js/130.e1dcd651.js"><link rel="prefetch" href="/my-notebook/assets/js/131.f34b0214.js"><link rel="prefetch" href="/my-notebook/assets/js/132.5b26c31a.js"><link rel="prefetch" href="/my-notebook/assets/js/133.0dcfb390.js"><link rel="prefetch" href="/my-notebook/assets/js/134.69a84514.js"><link rel="prefetch" href="/my-notebook/assets/js/135.7325fe3b.js"><link rel="prefetch" href="/my-notebook/assets/js/136.8dedad39.js"><link rel="prefetch" href="/my-notebook/assets/js/137.66977d77.js"><link rel="prefetch" href="/my-notebook/assets/js/138.b506648c.js"><link rel="prefetch" href="/my-notebook/assets/js/139.780fc639.js"><link rel="prefetch" href="/my-notebook/assets/js/14.90797933.js"><link rel="prefetch" href="/my-notebook/assets/js/140.a01e2ae1.js"><link rel="prefetch" href="/my-notebook/assets/js/141.2ea66d55.js"><link rel="prefetch" href="/my-notebook/assets/js/142.39654fd3.js"><link rel="prefetch" href="/my-notebook/assets/js/143.8e457c5d.js"><link rel="prefetch" href="/my-notebook/assets/js/144.97639e7d.js"><link rel="prefetch" href="/my-notebook/assets/js/145.9496d2c8.js"><link rel="prefetch" href="/my-notebook/assets/js/146.18d497a8.js"><link rel="prefetch" href="/my-notebook/assets/js/147.a4553c21.js"><link rel="prefetch" href="/my-notebook/assets/js/148.805fb824.js"><link rel="prefetch" href="/my-notebook/assets/js/149.38bf9e6a.js"><link rel="prefetch" href="/my-notebook/assets/js/15.e003508e.js"><link rel="prefetch" href="/my-notebook/assets/js/150.b7bfeb48.js"><link rel="prefetch" href="/my-notebook/assets/js/151.7cba0a1b.js"><link rel="prefetch" href="/my-notebook/assets/js/152.9d6da84b.js"><link rel="prefetch" href="/my-notebook/assets/js/153.7438f790.js"><link rel="prefetch" href="/my-notebook/assets/js/154.8230cbdd.js"><link rel="prefetch" href="/my-notebook/assets/js/155.c914215b.js"><link rel="prefetch" href="/my-notebook/assets/js/156.7d33e095.js"><link rel="prefetch" href="/my-notebook/assets/js/157.072f6b64.js"><link rel="prefetch" href="/my-notebook/assets/js/158.ab191f87.js"><link rel="prefetch" href="/my-notebook/assets/js/159.8cbaaa8a.js"><link rel="prefetch" href="/my-notebook/assets/js/16.c53a8248.js"><link rel="prefetch" href="/my-notebook/assets/js/160.3a3f6302.js"><link rel="prefetch" href="/my-notebook/assets/js/161.a7c38594.js"><link rel="prefetch" href="/my-notebook/assets/js/162.02721e07.js"><link rel="prefetch" href="/my-notebook/assets/js/163.3faea637.js"><link rel="prefetch" href="/my-notebook/assets/js/164.a085dbf6.js"><link rel="prefetch" href="/my-notebook/assets/js/165.ec774c63.js"><link rel="prefetch" href="/my-notebook/assets/js/166.add5480c.js"><link rel="prefetch" href="/my-notebook/assets/js/167.041e0e26.js"><link rel="prefetch" href="/my-notebook/assets/js/168.fe8d8447.js"><link rel="prefetch" href="/my-notebook/assets/js/169.c6bbed61.js"><link rel="prefetch" href="/my-notebook/assets/js/17.ada74d30.js"><link rel="prefetch" href="/my-notebook/assets/js/170.c62b427b.js"><link rel="prefetch" href="/my-notebook/assets/js/171.238ee10e.js"><link rel="prefetch" href="/my-notebook/assets/js/172.e2703306.js"><link rel="prefetch" href="/my-notebook/assets/js/173.62644a59.js"><link rel="prefetch" href="/my-notebook/assets/js/174.ad8bd216.js"><link rel="prefetch" href="/my-notebook/assets/js/175.73bab588.js"><link rel="prefetch" href="/my-notebook/assets/js/176.9ceb2b5f.js"><link rel="prefetch" href="/my-notebook/assets/js/177.b628c04a.js"><link rel="prefetch" href="/my-notebook/assets/js/178.eb9bdc83.js"><link rel="prefetch" href="/my-notebook/assets/js/179.96c47ced.js"><link rel="prefetch" href="/my-notebook/assets/js/18.bf622e1d.js"><link rel="prefetch" href="/my-notebook/assets/js/180.55cde5f1.js"><link rel="prefetch" href="/my-notebook/assets/js/181.558d6893.js"><link rel="prefetch" href="/my-notebook/assets/js/182.3de13487.js"><link rel="prefetch" href="/my-notebook/assets/js/183.ff8f4a06.js"><link rel="prefetch" href="/my-notebook/assets/js/184.b17b2c4b.js"><link rel="prefetch" href="/my-notebook/assets/js/185.9850be79.js"><link rel="prefetch" href="/my-notebook/assets/js/186.1f8fba94.js"><link rel="prefetch" href="/my-notebook/assets/js/187.7fed3665.js"><link rel="prefetch" href="/my-notebook/assets/js/188.5e337f85.js"><link rel="prefetch" href="/my-notebook/assets/js/189.bb03be42.js"><link rel="prefetch" href="/my-notebook/assets/js/19.2f874223.js"><link rel="prefetch" href="/my-notebook/assets/js/190.df36c47d.js"><link rel="prefetch" href="/my-notebook/assets/js/191.79640fe0.js"><link rel="prefetch" href="/my-notebook/assets/js/192.6d01032b.js"><link rel="prefetch" href="/my-notebook/assets/js/193.17115e4c.js"><link rel="prefetch" href="/my-notebook/assets/js/194.4d3983ed.js"><link rel="prefetch" href="/my-notebook/assets/js/195.8fd5a662.js"><link rel="prefetch" href="/my-notebook/assets/js/196.be56dd5a.js"><link rel="prefetch" href="/my-notebook/assets/js/197.549eda0f.js"><link rel="prefetch" href="/my-notebook/assets/js/198.c7e4e8d5.js"><link rel="prefetch" href="/my-notebook/assets/js/199.bdd1c3be.js"><link rel="prefetch" href="/my-notebook/assets/js/20.a7bf7354.js"><link rel="prefetch" href="/my-notebook/assets/js/200.ef78f3d7.js"><link rel="prefetch" href="/my-notebook/assets/js/201.bbc2ab09.js"><link rel="prefetch" href="/my-notebook/assets/js/202.92025b54.js"><link rel="prefetch" href="/my-notebook/assets/js/203.7a2a3b27.js"><link rel="prefetch" href="/my-notebook/assets/js/204.da2142c3.js"><link rel="prefetch" href="/my-notebook/assets/js/205.883df166.js"><link rel="prefetch" href="/my-notebook/assets/js/206.e513e335.js"><link rel="prefetch" href="/my-notebook/assets/js/207.226f4901.js"><link rel="prefetch" href="/my-notebook/assets/js/208.d104155c.js"><link rel="prefetch" href="/my-notebook/assets/js/209.1aa753a3.js"><link rel="prefetch" href="/my-notebook/assets/js/21.2e4841d0.js"><link rel="prefetch" href="/my-notebook/assets/js/210.3781e2df.js"><link rel="prefetch" href="/my-notebook/assets/js/211.ccdf2ee6.js"><link rel="prefetch" href="/my-notebook/assets/js/212.f0a1a5e0.js"><link rel="prefetch" href="/my-notebook/assets/js/213.cffcc28a.js"><link rel="prefetch" href="/my-notebook/assets/js/214.00a3acc8.js"><link rel="prefetch" href="/my-notebook/assets/js/215.2bff11f6.js"><link rel="prefetch" href="/my-notebook/assets/js/216.c5dabb0f.js"><link rel="prefetch" href="/my-notebook/assets/js/217.7dc79e5a.js"><link rel="prefetch" href="/my-notebook/assets/js/218.905d251f.js"><link rel="prefetch" href="/my-notebook/assets/js/219.3ab63e78.js"><link rel="prefetch" href="/my-notebook/assets/js/22.7b083309.js"><link rel="prefetch" href="/my-notebook/assets/js/220.ba577bea.js"><link rel="prefetch" href="/my-notebook/assets/js/221.0cd6c26b.js"><link rel="prefetch" href="/my-notebook/assets/js/222.8d90d552.js"><link rel="prefetch" href="/my-notebook/assets/js/223.5a32032d.js"><link rel="prefetch" href="/my-notebook/assets/js/224.ceaae460.js"><link rel="prefetch" href="/my-notebook/assets/js/225.aa463dcd.js"><link rel="prefetch" href="/my-notebook/assets/js/226.d215a73c.js"><link rel="prefetch" href="/my-notebook/assets/js/227.643c88f4.js"><link rel="prefetch" href="/my-notebook/assets/js/228.af503ef6.js"><link rel="prefetch" href="/my-notebook/assets/js/229.2f27407c.js"><link rel="prefetch" href="/my-notebook/assets/js/23.65bd1328.js"><link rel="prefetch" href="/my-notebook/assets/js/230.459d2190.js"><link rel="prefetch" href="/my-notebook/assets/js/231.cb7fffed.js"><link rel="prefetch" href="/my-notebook/assets/js/232.8f88c274.js"><link rel="prefetch" href="/my-notebook/assets/js/233.70c0e81f.js"><link rel="prefetch" href="/my-notebook/assets/js/234.bbce4c84.js"><link rel="prefetch" href="/my-notebook/assets/js/235.4da6de61.js"><link rel="prefetch" href="/my-notebook/assets/js/236.5fb0b845.js"><link rel="prefetch" href="/my-notebook/assets/js/237.fceb17f8.js"><link rel="prefetch" href="/my-notebook/assets/js/238.1b5f4dcf.js"><link rel="prefetch" href="/my-notebook/assets/js/239.53234b10.js"><link rel="prefetch" href="/my-notebook/assets/js/24.63dc92e0.js"><link rel="prefetch" href="/my-notebook/assets/js/240.86c7cc4b.js"><link rel="prefetch" href="/my-notebook/assets/js/241.dd308647.js"><link rel="prefetch" href="/my-notebook/assets/js/242.a53d8464.js"><link rel="prefetch" href="/my-notebook/assets/js/243.17700200.js"><link rel="prefetch" href="/my-notebook/assets/js/245.beec80ff.js"><link rel="prefetch" href="/my-notebook/assets/js/246.439d558f.js"><link rel="prefetch" href="/my-notebook/assets/js/247.fe5415b8.js"><link rel="prefetch" href="/my-notebook/assets/js/248.be0f7be3.js"><link rel="prefetch" href="/my-notebook/assets/js/249.51871a82.js"><link rel="prefetch" href="/my-notebook/assets/js/25.04402666.js"><link rel="prefetch" href="/my-notebook/assets/js/250.f61e1c2f.js"><link rel="prefetch" href="/my-notebook/assets/js/251.877d2898.js"><link rel="prefetch" href="/my-notebook/assets/js/252.85858e01.js"><link rel="prefetch" href="/my-notebook/assets/js/253.b96d95bc.js"><link rel="prefetch" href="/my-notebook/assets/js/254.8c56a1b7.js"><link rel="prefetch" href="/my-notebook/assets/js/255.89178244.js"><link rel="prefetch" href="/my-notebook/assets/js/256.03730a99.js"><link rel="prefetch" href="/my-notebook/assets/js/257.b479b766.js"><link rel="prefetch" href="/my-notebook/assets/js/258.2991d689.js"><link rel="prefetch" href="/my-notebook/assets/js/259.cc2da92a.js"><link rel="prefetch" href="/my-notebook/assets/js/26.455bc9c8.js"><link rel="prefetch" href="/my-notebook/assets/js/260.22ebab67.js"><link rel="prefetch" href="/my-notebook/assets/js/261.58e0516e.js"><link rel="prefetch" href="/my-notebook/assets/js/262.ad8f7bcd.js"><link rel="prefetch" href="/my-notebook/assets/js/263.857bc143.js"><link rel="prefetch" href="/my-notebook/assets/js/264.6d174823.js"><link rel="prefetch" href="/my-notebook/assets/js/265.9cbbc71c.js"><link rel="prefetch" href="/my-notebook/assets/js/266.07356cb6.js"><link rel="prefetch" href="/my-notebook/assets/js/267.527535c3.js"><link rel="prefetch" href="/my-notebook/assets/js/268.d45af05c.js"><link rel="prefetch" href="/my-notebook/assets/js/269.3150aec1.js"><link rel="prefetch" href="/my-notebook/assets/js/27.ae286f9c.js"><link rel="prefetch" href="/my-notebook/assets/js/270.68b8b2ed.js"><link rel="prefetch" href="/my-notebook/assets/js/271.0e9b51f8.js"><link rel="prefetch" href="/my-notebook/assets/js/272.e42f013d.js"><link rel="prefetch" href="/my-notebook/assets/js/273.8337c93a.js"><link rel="prefetch" href="/my-notebook/assets/js/274.12724ecb.js"><link rel="prefetch" href="/my-notebook/assets/js/275.81f459bb.js"><link rel="prefetch" href="/my-notebook/assets/js/276.4b7b5c58.js"><link rel="prefetch" href="/my-notebook/assets/js/277.19fa391a.js"><link rel="prefetch" href="/my-notebook/assets/js/278.eefb814a.js"><link rel="prefetch" href="/my-notebook/assets/js/279.470f0ed5.js"><link rel="prefetch" href="/my-notebook/assets/js/28.cac6af2e.js"><link rel="prefetch" href="/my-notebook/assets/js/280.c27b517c.js"><link rel="prefetch" href="/my-notebook/assets/js/281.e16f023a.js"><link rel="prefetch" href="/my-notebook/assets/js/282.1760789d.js"><link rel="prefetch" href="/my-notebook/assets/js/283.b399a659.js"><link rel="prefetch" href="/my-notebook/assets/js/284.355eadf7.js"><link rel="prefetch" href="/my-notebook/assets/js/285.7366b8ff.js"><link rel="prefetch" href="/my-notebook/assets/js/286.882f84d7.js"><link rel="prefetch" href="/my-notebook/assets/js/287.4209a09e.js"><link rel="prefetch" href="/my-notebook/assets/js/29.df9d4529.js"><link rel="prefetch" href="/my-notebook/assets/js/3.92185172.js"><link rel="prefetch" href="/my-notebook/assets/js/30.28f472a0.js"><link rel="prefetch" href="/my-notebook/assets/js/31.06184908.js"><link rel="prefetch" href="/my-notebook/assets/js/32.8f98d966.js"><link rel="prefetch" href="/my-notebook/assets/js/33.c27691e3.js"><link rel="prefetch" href="/my-notebook/assets/js/34.c5df6d35.js"><link rel="prefetch" href="/my-notebook/assets/js/35.d0922d15.js"><link rel="prefetch" href="/my-notebook/assets/js/36.955ebf06.js"><link rel="prefetch" href="/my-notebook/assets/js/37.22e2c1a1.js"><link rel="prefetch" href="/my-notebook/assets/js/38.0b8f141e.js"><link rel="prefetch" href="/my-notebook/assets/js/39.8684583c.js"><link rel="prefetch" href="/my-notebook/assets/js/4.00c6a434.js"><link rel="prefetch" href="/my-notebook/assets/js/40.e180947b.js"><link rel="prefetch" href="/my-notebook/assets/js/41.bd16ab72.js"><link rel="prefetch" href="/my-notebook/assets/js/42.caff63d6.js"><link rel="prefetch" href="/my-notebook/assets/js/43.34af0db0.js"><link rel="prefetch" href="/my-notebook/assets/js/44.9fb98d24.js"><link rel="prefetch" href="/my-notebook/assets/js/45.6cba4b7e.js"><link rel="prefetch" href="/my-notebook/assets/js/46.fcd4e3cc.js"><link rel="prefetch" href="/my-notebook/assets/js/47.30aa9db1.js"><link rel="prefetch" href="/my-notebook/assets/js/48.1fdd1de1.js"><link rel="prefetch" href="/my-notebook/assets/js/49.615343fd.js"><link rel="prefetch" href="/my-notebook/assets/js/5.64aac286.js"><link rel="prefetch" href="/my-notebook/assets/js/50.6632ca89.js"><link rel="prefetch" href="/my-notebook/assets/js/51.5f8356d9.js"><link rel="prefetch" href="/my-notebook/assets/js/52.d3ac5ada.js"><link rel="prefetch" href="/my-notebook/assets/js/53.b902f821.js"><link rel="prefetch" href="/my-notebook/assets/js/54.3bfefc6d.js"><link rel="prefetch" href="/my-notebook/assets/js/55.f6d25d84.js"><link rel="prefetch" href="/my-notebook/assets/js/56.2f814ea2.js"><link rel="prefetch" href="/my-notebook/assets/js/57.479b7f16.js"><link rel="prefetch" href="/my-notebook/assets/js/58.9ab8c1d4.js"><link rel="prefetch" href="/my-notebook/assets/js/59.2507d7ac.js"><link rel="prefetch" href="/my-notebook/assets/js/6.a9d5cd87.js"><link rel="prefetch" href="/my-notebook/assets/js/60.5889ee38.js"><link rel="prefetch" href="/my-notebook/assets/js/61.fb583372.js"><link rel="prefetch" href="/my-notebook/assets/js/62.12da8ee5.js"><link rel="prefetch" href="/my-notebook/assets/js/63.822e670a.js"><link rel="prefetch" href="/my-notebook/assets/js/64.5386367c.js"><link rel="prefetch" href="/my-notebook/assets/js/65.fea95148.js"><link rel="prefetch" href="/my-notebook/assets/js/66.50341735.js"><link rel="prefetch" href="/my-notebook/assets/js/67.dc3ebb6e.js"><link rel="prefetch" href="/my-notebook/assets/js/68.03f6c7ea.js"><link rel="prefetch" href="/my-notebook/assets/js/69.1da8c87e.js"><link rel="prefetch" href="/my-notebook/assets/js/7.d7e64a27.js"><link rel="prefetch" href="/my-notebook/assets/js/70.e6d226fa.js"><link rel="prefetch" href="/my-notebook/assets/js/71.3caacac2.js"><link rel="prefetch" href="/my-notebook/assets/js/72.af63043d.js"><link rel="prefetch" href="/my-notebook/assets/js/73.6bbb0661.js"><link rel="prefetch" href="/my-notebook/assets/js/74.cf968284.js"><link rel="prefetch" href="/my-notebook/assets/js/75.0b3773b8.js"><link rel="prefetch" href="/my-notebook/assets/js/76.b5ea18de.js"><link rel="prefetch" href="/my-notebook/assets/js/77.40ba7dc9.js"><link rel="prefetch" href="/my-notebook/assets/js/78.97b14a7c.js"><link rel="prefetch" href="/my-notebook/assets/js/79.c6a400e0.js"><link rel="prefetch" href="/my-notebook/assets/js/8.be5f8ee5.js"><link rel="prefetch" href="/my-notebook/assets/js/80.bd9c4c1e.js"><link rel="prefetch" href="/my-notebook/assets/js/81.e8ee99e3.js"><link rel="prefetch" href="/my-notebook/assets/js/82.8ba3b0fe.js"><link rel="prefetch" href="/my-notebook/assets/js/83.ce40455a.js"><link rel="prefetch" href="/my-notebook/assets/js/84.d093b4a6.js"><link rel="prefetch" href="/my-notebook/assets/js/85.d9999a72.js"><link rel="prefetch" href="/my-notebook/assets/js/86.9b4f6b96.js"><link rel="prefetch" href="/my-notebook/assets/js/87.2bf85b37.js"><link rel="prefetch" href="/my-notebook/assets/js/88.024de666.js"><link rel="prefetch" href="/my-notebook/assets/js/89.bea6a739.js"><link rel="prefetch" href="/my-notebook/assets/js/9.3c4273a1.js"><link rel="prefetch" href="/my-notebook/assets/js/90.81b50cbf.js"><link rel="prefetch" href="/my-notebook/assets/js/91.b63ab5f8.js"><link rel="prefetch" href="/my-notebook/assets/js/92.ca0627ea.js"><link rel="prefetch" href="/my-notebook/assets/js/93.cace89fb.js"><link rel="prefetch" href="/my-notebook/assets/js/94.2809df00.js"><link rel="prefetch" href="/my-notebook/assets/js/95.c50d37f4.js"><link rel="prefetch" href="/my-notebook/assets/js/96.0c5a4cea.js"><link rel="prefetch" href="/my-notebook/assets/js/97.d918c547.js"><link rel="prefetch" href="/my-notebook/assets/js/98.dcff25e3.js"><link rel="prefetch" href="/my-notebook/assets/js/99.f0eeebb8.js">
    <link rel="stylesheet" href="/my-notebook/assets/css/0.styles.24c4c005.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-notebook/" class="home-link router-link-active"><!----> <span class="site-name">Garrik 的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-notebook/" class="nav-link">主页</a></div><div class="nav-item"><a href="https://github.com/Garrik-Liu/my-notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-notebook/" class="nav-link">主页</a></div><div class="nav-item"><a href="https://github.com/Garrik-Liu/my-notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>树</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉树" class="sidebar-link">二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#储存二叉树" class="sidebar-link">储存二叉树</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉树的遍历" class="sidebar-link">二叉树的遍历</a></li></ul></li><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉查找树" class="sidebar-link">二叉查找树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉查找树的查找操作" class="sidebar-link">二叉查找树的查找操作</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉查找树的插入操作" class="sidebar-link">二叉查找树的插入操作</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉查找树的删除操作" class="sidebar-link">二叉查找树的删除操作</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#支持重复数据的二叉查找树" class="sidebar-link">支持重复数据的二叉查找树</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉查找树的时间复杂度分析" class="sidebar-link">二叉查找树的时间复杂度分析</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#二叉查找树-vs-散列表" class="sidebar-link">二叉查找树 vs 散列表</a></li></ul></li><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#平衡查找树" class="sidebar-link">平衡查找树</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#avl-树" class="sidebar-link">AVL 树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#avl-树的自平衡" class="sidebar-link">AVL 树的自平衡</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#avl-树插入" class="sidebar-link">AVL 树插入</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#avl-树删除" class="sidebar-link">AVL 树删除</a></li></ul></li><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树" class="sidebar-link">红黑树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树定义" class="sidebar-link">红黑树定义</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树自平衡" class="sidebar-link">红黑树自平衡</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树查找" class="sidebar-link">红黑树查找</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树插入" class="sidebar-link">红黑树插入</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树删除" class="sidebar-link">红黑树删除</a></li></ul></li><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#红黑树-vs-avl-树" class="sidebar-link">红黑树 vs AVL 树</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/my-notebook/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A0%91.html#b-树" class="sidebar-link">B+ 树</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="树"><a href="#树" class="header-anchor">#</a> 树</h1> <p>树是一种非线性表数据结构，<strong>包含一系列存在父子关系的节点</strong>。</p> <ul><li><strong>除了顶部的第一个节点，每个节点都有一个父节点以及零个或多个子节点</strong>。</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-14-12-5.png" alt="2020-1-14-14-12-5.png"></p> <p>下面解释一些术语：</p> <ul><li><strong>节点</strong>：树中的每个元素都叫作节点；
<ul><li><strong>根节点</strong>：树顶部的节点叫作根节点，它没有父节点。</li> <li><strong>内部节点</strong>：至少有一个子节点的节点称为内部节点；</li> <li><strong>外部节点</strong>（叶节点）：没有子元素的节点称为外部节点或叶节点；</li></ul></li> <li><strong>子树</strong>：子树由节点和它的后代构成。例如，节点 13、12 和 14 构成了上图中树的一棵子树；</li> <li><strong>深度</strong>： 节点的深度取决于它的祖先节点的数量。例如，节点 8 有 3 个祖先节点（9、7 和 11），它的深度为 3；</li> <li><strong>高度</strong>：树的高度取决于所有节点深度的最大值；</li> <li><strong>层</strong>：根节点在第 0 层，它 的子节点在第 1 层，以此类推。</li></ul> <h2 id="二叉树"><a href="#二叉树" class="header-anchor">#</a> 二叉树</h2> <p>二叉树，每个节点最多有两个两个子节点，分别是<strong>左子节点</strong>和<strong>右子节点</strong>。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-14-21-51.png" alt="2020-1-14-14-21-51.png"></p> <p>『 <strong>满二叉树</strong> 』<strong>叶子节点全都在最底层，除了叶子节点之外，每个节点都有左右两个子节点</strong>。如上图编号 2 所示。</p> <p>『 <strong>完全二叉树</strong> 』<strong>叶子节点都在最底下两层，最后一层的叶子节点都靠左排列，并且除了最后一层，其他层的节点个数都要达到最大</strong>。如上图编号 3 所示。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-14-27-53.png" alt="2020-1-14-14-27-53.png"></p> <h3 id="储存二叉树"><a href="#储存二叉树" class="header-anchor">#</a> 储存二叉树</h3> <p>想要存储一棵二叉树，我们有两种方法：</p> <ul><li>一种是基于「 指针 」的<strong>二叉链式存储法</strong>。</li> <li>一种是基于「 数组 」的<strong>顺序存储法</strong>。</li></ul> <h4 id="二叉链式存储法"><a href="#二叉链式存储法" class="header-anchor">#</a> 二叉链式存储法</h4> <p><strong>每个节点有三个属性，其中一个存储数据，另外两个是指向左右子节点的指针</strong>。我们只要拎住根节点，就可以通过左右子节点的指针，把整棵树都串起来。这种存储方式我们比较常用。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-15-54-41.png" alt="2020-1-14-15-54-41.png"></p> <h4 id="顺序存储法"><a href="#顺序存储法" class="header-anchor">#</a> 顺序存储法</h4> <p>在数组中，<strong>如果节点 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span></span> 存储在数组中下标为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span></span> 的位置，下标为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>∗</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">2 * i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span></span> 的位置存储的就是左子节点，下标为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>∗</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2 * i + 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span> 的位置存储的就是右子节点</strong>。</p> <p>反过来，<strong>下标为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">i/2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mord">/</span><span class="mord">2</span></span></span></span></span> 的位置存储就是它的父节点</strong>。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-15-56-0.png" alt="2020-1-14-15-56-0.png"></p> <p>上面的例子是一棵「 完全二叉树 」，所以仅仅“浪费”了一个下标为 <code>0</code> 的存储位置。如果是「 非完全二叉树 」，其实会浪费比较多的数组存储空间。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-15-59-43.png" alt="2020-1-14-15-59-43.png"></p> <p>所以，<strong>如果某棵二叉树是一棵完全二叉树，那用数组存储是最节省内存的一种方式</strong>。因为数组的存储方式并不需要像链式存储法那样，要存储额外的左右子节点的指针。</p> <p>同样，这也是为什么完全二叉树要求最后一层的子节点都靠左的原因。</p> <h3 id="二叉树的遍历"><a href="#二叉树的遍历" class="header-anchor">#</a> 二叉树的遍历</h3> <p>如何将所有节点都遍历打印出来呢？经典的方法有三种，<strong>前序遍历</strong>、<strong>中序遍历</strong>和<strong>后序遍历</strong>。其中，前、中、后序，表示的是节点与它的左右节点遍历打印的先后顺序：</p> <ul><li><strong>前序遍历</strong>：对于树中的任意节点来说，先打印这个节点，然后再打印它的左子树，最后打印它的右子树；</li> <li><strong>中序遍历</strong>：对于树中的任意节点来说，先打印它的左子树，然后再打印它本身，最后打印它的右子树；</li> <li><strong>后序遍历</strong>：对于树中的任意节点来说，先打印它的左子树，然后再打印它的右子树，最后打印这个节点本身；</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-16-4-15.png" alt="2020-1-14-16-4-15.png"></p> <p>二叉树的前、中、后序遍历就是一个递归的过程。下面是它们各自的实现代码：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">preOrder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">preOrder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token function">inOrder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">inOrder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">postOrder</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从前、中、后序遍历的顺序图，可以看出来，每个节点最多会被访问两次，所以遍历操作的时间复杂度，跟节点的个数 n 成正比，也就是说<strong>二叉树遍历的时间复杂度是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></strong>。</p> <h2 id="二叉查找树"><a href="#二叉查找树" class="header-anchor">#</a> 二叉查找树</h2> <p>『 <strong>二叉查找树</strong> Binary Search Tree 』最大的特点就是，<strong>支持动态数据集合的快速插入、删除、查找操作</strong>。</p> <p><strong>二叉查找树要求，在树中的任意一个节点，其左子树中的每个节点的值，都要小于这个节点的值，而右子树节点的值都大于这个节点的值</strong>。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-22-1-58.png" alt="2020-1-14-22-1-58.png"></p> <p>可以发现，中序遍历二叉查找树，可以输出有序的数据序列，时间复杂度是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span>，非常高效。因此，二叉查找树也叫作<strong>二叉排序树</strong>。</p> <h3 id="二叉查找树的查找操作"><a href="#二叉查找树的查找操作" class="header-anchor">#</a> 二叉查找树的查找操作</h3> <p>在二叉查找树中查找一个节点。我们先取根节点，如果它等于我们要查找的数据，那就返回。如果要查找的数据比根节点的值小，那就在左子树中递归查找；如果要查找的数据比根节点的值大，那就在右子树中递归查找。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinarySearchTree</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">Node</span> tree<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Node</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Node</span> p <span class="token operator">=</span> tree<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">)</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&gt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">)</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
      <span class="token keyword">else</span> <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="二叉查找树的插入操作"><a href="#二叉查找树的插入操作" class="header-anchor">#</a> 二叉查找树的插入操作</h3> <p>新插入的数据一般都是在叶子节点上，所以我们只需要从根节点开始，依次比较要插入的数据和节点的大小关系。</p> <p>如果要插入的数据比节点的数据大，并且节点的右子树为空，就将新数据直接插到右子节点的位置；如果不为空，就再递归遍历右子树，查找插入位置。同理，如果要插入的数据比节点数值小，并且节点的左子树为空，就将新数据插入到左子节点的位置；如果不为空，就再递归遍历左子树，查找插入位置。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tree <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Node</span> p <span class="token operator">=</span> tree<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&gt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      p <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// data &lt; p.data</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      p <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="二叉查找树的删除操作"><a href="#二叉查找树的删除操作" class="header-anchor">#</a> 二叉查找树的删除操作</h3> <p>针对要删除节点的子节点个数的不同，我们需要分三种情况来处理。</p> <ul><li>如果要删除的节点没有子节点，我们只需要直接将父节点中，指向要删除节点的指针置为 <code>null</code>；</li> <li>如果要删除的节点只有一个子节点（只有左子节点或者右子节点），我们只需要更新父节点中，指向要删除节点的指针，让它指向要删除节点的子节点就可以了；</li> <li>如果要删除的节点有两个子节点。我们需要找到这个节点的右子树中的最小节点，把它替换到要删除的节点上。然后再删除掉这个最小节点；</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-22-10-39.png" alt="2020-1-14-22-10-39.png"></p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// p 指向要删除的节点，初始化指向根节点</span>
  <span class="token class-name">Node</span> p <span class="token operator">=</span> tree<span class="token punctuation">;</span>
  <span class="token comment">// pp 记录的是 p 的父节点</span>
  <span class="token class-name">Node</span> pp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>data <span class="token operator">!=</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pp <span class="token operator">=</span> p<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&gt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">)</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token keyword">else</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 没有找到</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// 要删除的节点有两个子节点</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 查找右子树中最小节点</span>
    <span class="token class-name">Node</span> minP <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token comment">// minPP表示minP的父节点</span>
    <span class="token class-name">Node</span> minPP <span class="token operator">=</span> p<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>minP<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      minPP <span class="token operator">=</span> minP<span class="token punctuation">;</span>
      minP <span class="token operator">=</span> minP<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将minP的数据替换到p中</span>
    p<span class="token punctuation">.</span>data <span class="token operator">=</span> minP<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token comment">// 下面就变成了删除minP了</span>
    p <span class="token operator">=</span> minP<span class="token punctuation">;</span>
    pp <span class="token operator">=</span> minPP<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 删除节点是叶子节点或者仅有一个子节点</span>
  <span class="token class-name">Node</span> child<span class="token punctuation">;</span> <span class="token comment">// p的子节点</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> child <span class="token operator">=</span> p<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> child <span class="token operator">=</span> p<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
  <span class="token keyword">else</span> child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token comment">// 删除的是根节点</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pp <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> tree <span class="token operator">=</span> child<span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pp<span class="token punctuation">.</span>left <span class="token operator">==</span> p<span class="token punctuation">)</span> pp<span class="token punctuation">.</span>left <span class="token operator">=</span> child<span class="token punctuation">;</span>
  <span class="token keyword">else</span> pp<span class="token punctuation">.</span>right <span class="token operator">=</span> child<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>除此之外，关于二叉查找树的删除操作，还有个非常简单、取巧的方法，就是单纯将要删除的节点标记为“已删除”，但是并不真正从树中将这个节点去掉。这样原本删除的节点还需要存储在内存中，比较浪费内存空间，但是删除操作就变得简单了很多。</p> <h3 id="支持重复数据的二叉查找树"><a href="#支持重复数据的二叉查找树" class="header-anchor">#</a> 支持重复数据的二叉查找树</h3> <p>如果遇到了碰到一个节点的值，与要插入数据的值相同，我们就将这个要插入的数据放到这个节点的右子树，也就是说，把这个新插入的数据当作大于这个节点的值来处理。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-22-18-3.png" alt="2020-1-14-22-18-3.png"></p> <p>当要查找数据的时候，遇到值相同的节点，我们并不停止查找操作，而是继续在右子树中查找，直到遇到叶子节点，才停止。这样就可以把键值等于要查找值的所有节点都找出来。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-22-18-10.png" alt="2020-1-14-22-18-10.png"></p> <p>对于删除操作，我们也需要先查找到每个要删除的节点，然后再按前面讲的删除操作的方法，依次删除。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-22-18-26.png" alt="2020-1-14-22-18-26.png"></p> <h3 id="二叉查找树的时间复杂度分析"><a href="#二叉查找树的时间复杂度分析" class="header-anchor">#</a> 二叉查找树的时间复杂度分析</h3> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-14-22-19-26.png" alt="2020-1-14-22-19-26.png"></p> <p>二叉查找树的形态各式各样。比如这个图中，对于同一组数据，我们构造了三种二叉查找树。它们的查找、插入、删除操作的执行效率都是不一样的。</p> <p>图中第一种二叉查找树，<strong>根节点的左右子树极度不平衡，已经退化成了链表</strong>，所以查找的时间复杂度就变成了 <strong><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></strong>。</p> <p>最理想的情况下，二叉查找树是一棵<strong>完全二叉树（或满二叉树）</strong>。 这个时候不管操作是插入、删除还是查找，<strong>时间复杂度其实都跟树的高度成正比，也就是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(height)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></span></strong>。</p> <p>现在问题就变成了，如何求一棵包含 n 个节点的完全二叉树的高度？从树的图中可以看出，包含 n 个节点的<strong>满二叉树</strong>中，第一层包含 1 个节点，第二层包含 2 个节点，第三层包含 4 个节点，依次类推，下面一层节点个数是上一层的 2 倍，<strong>第 K 层包含的节点个数就是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>K</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(K-1)}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span></strong>。</p> <p>对于完全二叉树来说，最后一层的节点个数在 1 个到 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>K</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(K-1)}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span> 个之间（我们假设最大层数是 L）。如果我们把每一层的节点个数加起来就是总的节点个数 n。也就是说，如果节点的个数是 n，那么 n 满足这样一个关系：</p> <p><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>8</mn><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>L</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n &gt;= 1+2+4+8+...+2^{(L-2)}+1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9713299999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">L</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span> <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&lt;</mo><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>8</mn><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>L</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msup><mo>+</mo><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">n &lt;= 1+2+4+8+...+2^{(L-2)}+2^{(L-1)}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9713299999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">L</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">L</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span></p> <p>借助等比数列的求和公式，我们可以计算出，L 的范围是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[log_2(n+1), log_2n +1]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>。完全二叉树的层数小于等于 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">log_2n +1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span>，也就是说，<strong>完全二叉树的高度小于等于 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">log_2n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">n</span></span></span></span></span></strong>。</p> <h3 id="二叉查找树-vs-散列表"><a href="#二叉查找树-vs-散列表" class="header-anchor">#</a> 二叉查找树 vs 散列表</h3> <p>二叉查找树最大的特点就是，支持动态数据集合的快速插入、删除、查找操作。之前说过，散列表也是支持这些操作的，并且散列表的这些操作比二叉查找树更高效，时间复杂度是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。既然有了这么高效的散列表，使用二叉树的地方是不是都可以替换成散列表呢？有没有哪些地方是散列表做不了，必须要用二叉树来做的呢？</p> <ul><li>散列表的插入、删除、查找操作的时间复杂度可以做到常量级的 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</li> <li>二叉查找树在比较平衡的情况下，插入、删除、查找操作时间复杂度是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <p>之所以有些地方不去用散列表，而是用二叉查找树，原因主要有如下几点：</p> <ul><li><strong>散列表中的数据是无序存储的</strong>，如果要输出有序的数据，需要先进行排序。而对于二叉查找树来说，我们只需要中序遍历，就可以在 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span> 的时间复杂度内，输出有序的数据序列；</li> <li><strong>散列表扩容耗时很多，而且当遇到散列冲突时，性能不稳定</strong>，尽管二叉查找树的性能不稳定，但是在工程中，我们最常用的平衡二叉查找树的性能非常稳定，时间复杂度稳定在 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span>；</li> <li>尽管散列表的查找等操作的时间复杂度是常量级的，但<strong>因为哈希冲突的存在，这个常量不一定比 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">logn</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span></span></span></span></span> 小</strong>。所以实际的查找速度可能不一定比 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span> 快；</li> <li><strong>散列表的构造比二叉查找树要复杂，需要考虑的东西很多</strong>。比如散列函数的设计、冲突解决办法、扩容、缩容等。平衡二叉查找树只需要考虑平衡性这一个问题，而且这个问题的解决方案比较成熟、固定；</li></ul> <h2 id="平衡查找树"><a href="#平衡查找树" class="header-anchor">#</a> 平衡查找树</h2> <p>『 <strong>平衡查找树</strong> Balance Search Tree 』的严格定义是这样的：<strong>二叉树中任意一个节点的左右子树的高度相差不能大于 1</strong>。从这个定义来看，上一节我们讲的完全二叉树、满二叉树其实都是平衡二叉树，但是非完全二叉树也有可能是平衡二叉树。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-15-12-49-53.png" alt="2020-1-15-12-49-53.png"></p> <p>前面说， 二叉查找树在频繁的动态更新过程中，可能会出现树的高度远大于 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">log_2n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">n</span></span></span></span></span> 的情况，从而导致各个操作的效率下降。极端情况下，二叉树会退化为链表，时间复杂度会退化到 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span>。</p> <p>发明平衡二叉查找树这类数据结构的初衷是，<strong>解决普通二叉查找树在频繁的插入、删除等动态更新的情况下，始终保持二叉树的平衡 ( 任意一个节点的左右子树的高度相差不能大于 1 ) ，防止时间复杂度退化</strong>。</p> <h2 id="avl-树"><a href="#avl-树" class="header-anchor">#</a> AVL 树</h2> <p>AVL 树是最早被发明的自平衡二叉查找树。名称来源于其发明者姓氏的缩写 ( Adelson-Velskii 和 Landis )。</p> <ul><li>在 AVL 树中，任一节点对应的两棵子树的最大高度差为 1</li> <li>增加和删除元素时，通过四种旋转操作来实现树的重新平衡 ( 左旋，右旋，左右旋，右左旋 )</li></ul> <p>一个结点的『 <strong>平衡因子</strong> Balance Factor 』是它的左子树的高度减去它的右子树的高度，可能的值为 <code>0</code> <code>1</code> 或 <code>-1</code></p> <ul><li><strong>高度</strong>：节点的所有后代节点深度的最大值。</li> <li><strong>深度</strong>：节点的祖先节点的数量。</li></ul> <p>当有增加或删除元素操作时，AVL 树始终要保持每个结点的平衡因子绝对值，小于等于 1，大于等于 0。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-27-50.png" alt="2020-08-15-22-27-50"></p> <p>在开始讲之前，先定义一下 AVL 树中的结点 <code>Node</code> 类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> key<span class="token punctuation">,</span> height<span class="token punctuation">;</span>
    <span class="token class-name">Node</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>

    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> d<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        key <span class="token operator">=</span> d<span class="token punctuation">;</span>
        height <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在定义一下，获得「 平衡因子 」的方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Get Balance factor of node N</span>
<span class="token keyword">int</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token class-name">Node</span> <span class="token class-name">N</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">N</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">height</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">height</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="avl-树的自平衡"><a href="#avl-树的自平衡" class="header-anchor">#</a> AVL 树的自平衡</h3> <p>根据「 子树形态 」的不同，选择不同的平衡操作：</p> <h4 id="右右子树-左旋"><a href="#右右子树-左旋" class="header-anchor">#</a> 右右子树 - 左旋</h4> <p>B 节点和 A 节点进行所谓 “父子交换”。如果 B 有左子树，则将其作为 A 的右子树。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-52-34.png" alt="2020-08-15-22-52-34"> <img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-49-02.png" alt="2020-08-15-22-49-02"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// A utility function to left rotate subtree rooted with x</span>
<span class="token comment">// See the diagram given above.</span>
<span class="token class-name">Node</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">Node</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token class-name">Node</span> T2 <span class="token operator">=</span> y<span class="token punctuation">.</span>left<span class="token punctuation">;</span>

    <span class="token comment">// Perform rotation</span>
    y<span class="token punctuation">.</span>left <span class="token operator">=</span> x<span class="token punctuation">;</span>
    x<span class="token punctuation">.</span>right <span class="token operator">=</span> T2<span class="token punctuation">;</span>

    <span class="token comment">// Update heights</span>
    x<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    y<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// Return new root</span>
    <span class="token keyword">return</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="左左子树-右旋"><a href="#左左子树-右旋" class="header-anchor">#</a> 左左子树 - 右旋</h4> <p>B 节点和 C 节点进行所谓 “父子交换”。如果 B 有右子树，则将其作为 C 的左子树。</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-52-55.png" alt="2020-08-15-22-52-55"> <img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-49-16.png" alt="2020-08-15-22-49-16"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// A utility function to right rotate subtree rooted with y</span>
<span class="token comment">// See the diagram given above.</span>
<span class="token class-name">Node</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span><span class="token class-name">Node</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">Node</span> x <span class="token operator">=</span> y<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token class-name">Node</span> T2 <span class="token operator">=</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>

    <span class="token comment">// Perform rotation</span>
    x<span class="token punctuation">.</span>right <span class="token operator">=</span> y<span class="token punctuation">;</span>
    y<span class="token punctuation">.</span>left <span class="token operator">=</span> T2<span class="token punctuation">;</span>

    <span class="token comment">// Update heights</span>
    y<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// Return new root</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>左右子树 - 左右旋</strong>：先进行左旋，然后进行右旋。</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-50-40.png" alt="2020-08-15-22-50-40"> <img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-53-42.png" alt="2020-08-15-22-53-42"></p> <ul><li><strong>右左子树 - 右左旋</strong>：先进行右旋，然后进行左旋。</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-55-23.png" alt="2020-08-15-22-55-23"> <img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-22-55-43.png" alt="2020-08-15-22-55-43"></p> <p>下图总体的展示了各种旋转操作的使用情况：</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-08-15-23-02-52.png" alt="2020-08-15-23-02-52"></p> <h3 id="avl-树插入"><a href="#avl-树插入" class="header-anchor">#</a> AVL 树插入</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Node</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Node</span> node<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">/* 1. Perform the normal BST rotation */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
        node<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">insert</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&gt;</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
        node<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">insert</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token comment">// Equal keys not allowed</span>
        <span class="token keyword">return</span> node<span class="token punctuation">;</span>

    <span class="token comment">/* 2. Update height of this ancestor node */</span>
    node<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token function">height</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 3. Get the balance factor of this ancestor
    node to check whether this node became
    Wunbalanced */</span>
    <span class="token keyword">int</span> balance <span class="token operator">=</span> <span class="token function">getBalance</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// If this node becomes unbalanced, then</span>
    <span class="token comment">// there are 4 cases Left Left Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>left<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Right Right Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">&gt;</span> node<span class="token punctuation">.</span>right<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Left Right Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">&gt;</span> node<span class="token punctuation">.</span>left<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        node<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Right Left Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>right<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        node<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* return the (unchanged) node pointer */</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="avl-树删除"><a href="#avl-树删除" class="header-anchor">#</a> AVL 树删除</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Node</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span><span class="token class-name">Node</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// STEP 1: PERFORM STANDARD BST DELETE</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> root<span class="token punctuation">;</span>

    <span class="token comment">// If the key to be deleted is smaller than</span>
    <span class="token comment">// the root's key, then it lies in left subtree</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> root<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
        root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// If the key to be deleted is greater than the</span>
    <span class="token comment">// root's key, then it lies in right subtree</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&gt;</span> root<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
        root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// if key is same as root's key, then this is the node</span>
    <span class="token comment">// to be deleted</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// node with only one child or no child</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">Node</span> temp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">==</span> root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
                temp <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                temp <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>

            <span class="token comment">// No child case</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                temp <span class="token operator">=</span> root<span class="token punctuation">;</span>
                root <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token comment">// One child case</span>
                root <span class="token operator">=</span> temp<span class="token punctuation">;</span> <span class="token comment">// Copy the contents of</span>
                            <span class="token comment">// the non-empty child</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>

            <span class="token comment">// node with two children: Get the inorder</span>
            <span class="token comment">// successor (smallest in the right subtree)</span>
            <span class="token class-name">Node</span> temp <span class="token operator">=</span> <span class="token function">minValueNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Copy the inorder successor's data to this node</span>
            root<span class="token punctuation">.</span>key <span class="token operator">=</span> temp<span class="token punctuation">.</span>key<span class="token punctuation">;</span>

            <span class="token comment">// Delete the inorder successor</span>
            root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> temp<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// If the tree had only one node then return</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> root<span class="token punctuation">;</span>

    <span class="token comment">// STEP 2: UPDATE HEIGHT OF THE CURRENT NODE</span>
    root<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// STEP 3: GET THE BALANCE FACTOR OF THIS NODE (to check whether</span>
    <span class="token comment">// this node became unbalanced)</span>
    <span class="token keyword">int</span> balance <span class="token operator">=</span> <span class="token function">getBalance</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// If this node becomes unbalanced, then there are 4 cases</span>
    <span class="token comment">// Left Left Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getBalance</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Left Right Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getBalance</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Right Right Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getBalance</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Right Left Case</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getBalance</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">rightRotate</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">leftRotate</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> root<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="红黑树"><a href="#红黑树" class="header-anchor">#</a> 红黑树</h2> <h3 id="红黑树定义"><a href="#红黑树定义" class="header-anchor">#</a> 红黑树定义</h3> <p>『 <strong>红黑树</strong> Red–black Tree 』是一种不严格的平衡二叉查找树。前面说 “平衡查找树” 中任意一个节点的左右子树的高度相差不能大于 1。我们可以不严格遵守这条规则。</p> <p>也就是让整棵树左右看起来 “比较平衡”，不要出现左子树很高、右子树很矮的情况。只要树的高度不比 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">log_2n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">n</span></span></span></span></span> 大很多（比如树的高度仍然是对数量级的），那么性能就依旧还不错。</p> <p><strong>红黑树中的节点，一类被标记为黑色，一类被标记为红色</strong>。一棵红黑树需要满足这样几个要求：</p> <ul><li><strong>根节点是黑色的</strong>；</li> <li><strong>每个叶子节点都是黑色的空节点</strong>（NIL）。也就是说，叶子节点不存储数据；</li> <li><strong>任何相邻的节点都不能同时为红色</strong>，也就是说，红色节点是被黑色节点隔开的；</li> <li><strong>从任一节点到达其叶子节点的所有路径，都包含相同数目的黑色节点</strong>；</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-15-22-40-45.png" alt="2020-1-15-22-40-45.png"></p> <h3 id="红黑树自平衡"><a href="#红黑树自平衡" class="header-anchor">#</a> 红黑树自平衡</h3> <p>前面定义中说：</p> <ul><li>任何相邻的节点都不能同时为红色；</li> <li>从任一节点到达其叶子节点的所有路径，都包含相同数目的黑色节点；</li></ul> <p><strong>在红黑树插入，删除节点的过程中，这两条可能会被破坏。这被称为，破坏红黑树的平衡</strong>。</p> <p><strong>红黑树的自平衡，就是为了把红黑树的平衡调整过来</strong>。</p> <hr> <p>自平衡有三种操作：</p> <ul><li><strong>左旋</strong>：以某个结点作为支点(旋转结点)，其右子结点变为旋转结点的父结点。右子结点的左子结点变为旋转结点的右子结点。旋转结点左子结点保持不变；</li> <li><strong>右旋</strong>：以某个结点作为支点(旋转结点)，其左子结点变为旋转结点的父结点。左子结点的右子结点变为旋转结点的左子结点。旋转结点右子结点保持不变；</li> <li><strong>变色</strong>：结点的颜色由红变黑或由黑变红；</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-15-22-58-15.png" alt="2020-1-15-22-58-15.png"></p> <h3 id="红黑树查找"><a href="#红黑树查找" class="header-anchor">#</a> 红黑树查找</h3> <p>因为红黑树是一颗二叉平衡树，并且查找不会破坏树的平衡，所以查找跟二叉平衡树的查找无异。</p> <p>步骤：</p> <ol><li>从根结点开始查找，把根结点设置为当前结点；</li> <li>若当前结点为空，返回 null；</li> <li>若当前结点不为空，用当前结点的 key 跟查找 key 作比较；</li> <li>若当前结点 key 等于查找 key，那么该 key 就是查找目标，返回当前结点；</li> <li>若当前结点 key 大于查找 key，把当前结点的左子结点设置为当前结点，重复步骤 2；</li> <li>若当前结点 key 小于查找 key，把当前结点的右子结点设置为当前结点，重复步骤 2；</li></ol> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-15-23-10-10.png" alt="2020-1-15-23-10-10.png"></p> <h3 id="红黑树插入"><a href="#红黑树插入" class="header-anchor">#</a> 红黑树插入</h3> <p><strong>红黑树规定，插入的节点必须是红色的</strong>。而且，<strong>二叉查找树中新插入的节点都是放在叶子节点上</strong>。</p> <p>在讲插入之前，为了简化描述，我们先定义几个名字：</p> <ul><li>我们把正在处理的节点叫作<strong>关注节点</strong>。关注节点会随着不停地迭代处理，而不断发生变化。最开始的关注节点就是新插入的节点；</li> <li>把父节点的兄弟节点叫作<strong>叔叔节点</strong>，父节点的父节点叫作<strong>祖父节点</strong>；</li></ul> <p>插入操作包括两部分：</p> <ul><li>查找插入的位置；</li> <li>插入节点后如不满足红黑树性质还需要进行自平衡；</li></ul> <p>具体可以分为如下几种情况：</p> <h4 id="场景-1：红黑树为空树"><a href="#场景-1：红黑树为空树" class="header-anchor">#</a> 场景 1：红黑树为空树</h4> <p>直接把插入节点作为根节点，并把节点设置为黑色；</p> <h4 id="场景-2：插入节点的-key-已存在"><a href="#场景-2：插入节点的-key-已存在" class="header-anchor">#</a> 场景 2：插入节点的 key 已存在</h4> <p>如果插入结点的 key 在树中已存在，既然红黑树总保持平衡，在插入前红黑树已经是平衡的，那么把插入结点设置为将要替代结点的颜色，再把结点的值更新就完成插入。</p> <h4 id="场景-3：插入节点的父节点为黑节点"><a href="#场景-3：插入节点的父节点为黑节点" class="header-anchor">#</a> 场景 3：插入节点的父节点为黑节点</h4> <p>如果插入节点的父节点是黑色的，那我们什么都不用做，它仍然满足红黑树的定义。</p> <h4 id="场景-4：插入节点的父节点为红节点"><a href="#场景-4：插入节点的父节点为红节点" class="header-anchor">#</a> 场景 4：插入节点的父节点为红节点</h4> <p>如果插入的父结点为红结点，那么该父结点不可能为根结点，所以<strong>插入结点总是存在祖父结点</strong>。这点很重要，因为后续的旋转操作肯定需要祖父结点的参与。</p> <p>这种情景下，还会分为如下几种情况：</p> <p><strong>情况 1：叔叔结点存在并且为红结点</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-16-0-36-27.png" alt="2020-1-16-0-36-27.png"></p> <ul><li>将关注节点 a 的父节点 b、叔叔节点 d 的颜色都设置成黑色；</li> <li>将关注节点 a 的祖父节点 c 的颜色设置成红色；</li> <li>如果祖父节点 c 的父节点黑色，那么无需再做任何处理；</li> <li>如果祖父节点 c 的父结点是红色，此时红黑树已不平衡了，所以还需要让把 c 当作新的插入结点，关注节点变成 c，继续做插入操作自平衡处理，直到平衡为止；</li></ul> <p><strong>情况 2：叔叔结点不存在或为黑结点，并且插入结点的父亲结点是祖父结点的左子结点</strong></p> <p>如果叔叔结点为黑结点，而父结点为红结点，那么叔叔结点所在的子树的黑色结点就比父结点所在子树的多了。</p> <p>只要一边子树的结点多了或少了，我们就需要进行旋转，来把节点借给另一边。</p> <p>这种情况下还可以分为两种情况：</p> <p><strong>1. 插入结点是其父结点的左子结点</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-16-0-36-3.png" alt="2020-1-16-0-36-3.png"></p> <ul><li>围绕关注节点 a 的祖父节点 c 右旋；</li> <li>将关注节点 a 的父节点 b、兄弟节点 c 的颜色互换。</li></ul> <p><strong>2. 插入结点是其父结点的右子结点</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-16-0-36-17.png" alt="2020-1-16-0-36-17.png"></p> <ul><li>关注节点变成节点 a 的父节点 b；</li> <li>围绕新的关注节点 b 左旋；</li> <li>旋转完就变成完毕后，就变成 “插入结点是其父结点的左子结点”；</li> <li>然后依照上一个情形的步骤，去做自平衡；</li></ul> <p><strong>情况 3：叔叔结点不存在或为黑结点，并且插入结点的父亲结点是祖父结点的右子结点</strong></p> <p>这种情况下还可以分为两种情况：</p> <p><strong>1. 插入结点是其父结点的右子结点</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-16-10-16-45.png" alt="2020-1-16-10-16-45.png"></p> <ul><li>对 PP 进行左旋；</li> <li>将 P 设为黑色；</li> <li>将 PP 设为红色；</li></ul> <p><strong>2. 插入结点是其父结点的右子结点</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-16-10-17-48.png" alt="2020-1-16-10-17-48.png"></p> <ul><li>对 P 进行右旋；</li> <li>把 P 设置为插入结点，得到上一个情形 “插入结点是其父结点的右子结点”；</li> <li>然后依照上一个情形的步骤，去做自平衡；</li></ul> <h3 id="红黑树删除"><a href="#红黑树删除" class="header-anchor">#</a> 红黑树删除</h3> <p>删除操作的平衡调整分为两步：</p> <ul><li><strong>针对删除节点初步调整</strong>。让树满足定义，每个节点从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点；</li> <li><strong>针对关注节点进行二次调整</strong>。让树满足定义，不存在相邻的两个红色节点；</li></ul> <h4 id="针对删除节点初步调整"><a href="#针对删除节点初步调整" class="header-anchor">#</a> 针对删除节点初步调整</h4> <div class="custom-block warning"><p class="custom-block-title">注意：</p> <p>经过初步调整之后，为了保证满足红黑树定义 “只包含红色节点和黑色节点”。有些节点会被标记成两种颜色，“红 - 黑” 或者 “黑 - 黑”。如果一个节点被标记为了 “黑 - 黑”，那在计算黑色节点个数的时候，要算成两个黑色节点。</p> <p>在下面的图中，如果一个节点既可以是红色，也可以是黑色，就会用一半红色一半黑色来表示。如果一个节点是 “红 - 黑” 或者 “黑 - 黑”，就在左上角用一个小黑点来表示额外的黑色。</p></div> <p><strong>情况 1：如果要删除的节点是 a，它只有一个子节点 b</strong></p> <ul><li>删除节点 a，并且把节点 b 替换到节点 a 的位置，这一部分操作跟普通的二叉查找树的删除操作一样；</li> <li>节点 a 只能是黑色，节点 b 也只能是红色，其他情况均不符合红黑树的定义；这种情况下，我们把节点 b 改为黑色；</li> <li>调整结束，不需要进行二次调整；</li></ul> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-18-1-2-45.png" alt="2020-1-18-1-2-45.png"></p> <p><strong>情况 2：如果要删除的节点 a 有两个非空子节点，并且节点 a 的后继节点是 a 的右子节点 c</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-18-1-4-21.png" alt="2020-1-18-1-4-21.png"></p> <div class="custom-block tip"><p class="custom-block-title">后继节点</p> <p>大于删除结点的最小结点</p></div> <ul><li>如果节点 a 的后继节点就是右子节点 c，那右子节点 c 肯定没有左子树。我们把节点 a 删除，并且将节点 c 替换到节点 a 的位置。这一部分操作跟普通的二叉查找树的删除操作无异；</li> <li>然后把节点 c 的颜色设置为跟节点 a 相同的颜色；</li> <li>如果节点 c 是黑色，为了不违反红黑树的最后一条定义，我们给节点 c 的右子节点 d 多加一个黑色，这个时候节点 d 就成了 “红 - 黑” 或者 “黑 - 黑”；</li> <li>这个时候，关注节点变成了节点 d。第二步的调整操作就会针对关注节点来做；</li></ul> <p><strong>情况 3：如果要删除的是节点 a，它有两个非空子节点，并且节点 a 的后继节点不是 a 的右子节点</strong></p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-18-1-13-28.png" alt="2020-1-18-1-13-28.png"></p> <ul><li>找到后继节点 d，并将它删除，删除后继节点 d 的过程参照 “情况 1”；</li> <li>将节点 a 替换成后继节点 d；</li> <li>把节点 d 的颜色设置为跟节点 a 相同的颜色；</li> <li>如果节点 d 是黑色，为了不违反红黑树的最后一条定义，我们给节点 d 的右子节点 c 多加一个黑色，这个时候节点 c 就成了 “红 - 黑” 或者 “黑 - 黑”；</li> <li>这个时候，关注节点变了节点 c，第二步的调整操作就会针对关注节点来做；</li></ul> <h4 id="针对关注节点进行二次调整"><a href="#针对关注节点进行二次调整" class="header-anchor">#</a> 针对关注节点进行二次调整</h4> <p><strong>二次调整是为了让红黑树中不存在相邻的红色节点</strong>。</p> <p>经过初步调整之后，关注节点变成了 “红 - 黑” 或者 “黑 - 黑” 节点。针对这个关注节点，可以分四种情况来进行二次调整：</p> <p>情况 1：如果关注节点是 a，它的兄弟节点 c 是红色的</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-18-1-17-56.png" alt="2020-1-18-1-17-56.png"></p> <p>情况 2：如果关注节点是 a，它的兄弟节点 c 是黑色的，并且节点 c 的左右子节点 d、e 都是黑色的
情况 3：如果关注节点是 a，它的兄弟节点 c 是黑色，c 的左子节点 d 是红色，c 的右子节点 e 是黑色
情况 4：如果关注节点 a 的兄弟节点 c 是黑色的，并且 c 的右子节点是红色的</p> <h2 id="红黑树-vs-avl-树"><a href="#红黑树-vs-avl-树" class="header-anchor">#</a> 红黑树 vs AVL 树</h2> <h2 id="b-树"><a href="#b-树" class="header-anchor">#</a> B+ 树</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/16/2020, 8:49:31 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><div class="vuepress-eqn"></div><span class="vuepress-eq"></span></div></div>
    <script src="/my-notebook/assets/js/app.44efac36.js" defer></script><script src="/my-notebook/assets/js/2.4605f295.js" defer></script><script src="/my-notebook/assets/js/244.45f99f2c.js" defer></script>
  </body>
</html>
