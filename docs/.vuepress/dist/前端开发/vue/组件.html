<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件 | Garrik 的笔记</title>
    <meta name="description" content="这里是 Garrik 的前端笔记本">
    
    
    <link rel="preload" href="/my-notebook/assets/css/0.styles.06ca9f80.css" as="style"><link rel="preload" href="/my-notebook/assets/js/app.e4fcc072.js" as="script"><link rel="preload" href="/my-notebook/assets/js/2.453503aa.js" as="script"><link rel="preload" href="/my-notebook/assets/js/82.e75508ee.js" as="script"><link rel="prefetch" href="/my-notebook/assets/js/10.167e6850.js"><link rel="prefetch" href="/my-notebook/assets/js/100.b3e94d4a.js"><link rel="prefetch" href="/my-notebook/assets/js/101.4912a9f4.js"><link rel="prefetch" href="/my-notebook/assets/js/102.aff5566b.js"><link rel="prefetch" href="/my-notebook/assets/js/103.8fd86340.js"><link rel="prefetch" href="/my-notebook/assets/js/104.9bbe7925.js"><link rel="prefetch" href="/my-notebook/assets/js/105.ec4469e3.js"><link rel="prefetch" href="/my-notebook/assets/js/106.d55de6c0.js"><link rel="prefetch" href="/my-notebook/assets/js/107.c7c4947c.js"><link rel="prefetch" href="/my-notebook/assets/js/108.af2b3ada.js"><link rel="prefetch" href="/my-notebook/assets/js/109.049e6ae0.js"><link rel="prefetch" href="/my-notebook/assets/js/11.5186182c.js"><link rel="prefetch" href="/my-notebook/assets/js/110.d4ede4b1.js"><link rel="prefetch" href="/my-notebook/assets/js/111.6d41472b.js"><link rel="prefetch" href="/my-notebook/assets/js/112.88a99488.js"><link rel="prefetch" href="/my-notebook/assets/js/113.4965dde8.js"><link rel="prefetch" href="/my-notebook/assets/js/114.8f364f98.js"><link rel="prefetch" href="/my-notebook/assets/js/115.9588e144.js"><link rel="prefetch" href="/my-notebook/assets/js/116.6e16321e.js"><link rel="prefetch" href="/my-notebook/assets/js/117.8cbdf9be.js"><link rel="prefetch" href="/my-notebook/assets/js/118.e57ce467.js"><link rel="prefetch" href="/my-notebook/assets/js/119.ac50aec6.js"><link rel="prefetch" href="/my-notebook/assets/js/12.56dfe9c1.js"><link rel="prefetch" href="/my-notebook/assets/js/120.ed5ee739.js"><link rel="prefetch" href="/my-notebook/assets/js/121.398c2f17.js"><link rel="prefetch" href="/my-notebook/assets/js/122.5bdf3eb8.js"><link rel="prefetch" href="/my-notebook/assets/js/123.cee4375e.js"><link rel="prefetch" href="/my-notebook/assets/js/124.f9ca9799.js"><link rel="prefetch" href="/my-notebook/assets/js/125.78b5fb78.js"><link rel="prefetch" href="/my-notebook/assets/js/126.2767d799.js"><link rel="prefetch" href="/my-notebook/assets/js/127.d8d755f2.js"><link rel="prefetch" href="/my-notebook/assets/js/128.675cd002.js"><link rel="prefetch" href="/my-notebook/assets/js/129.4ac8aa0e.js"><link rel="prefetch" href="/my-notebook/assets/js/13.2232762c.js"><link rel="prefetch" href="/my-notebook/assets/js/130.b6f0b5e2.js"><link rel="prefetch" href="/my-notebook/assets/js/131.287212be.js"><link rel="prefetch" href="/my-notebook/assets/js/132.07db6a02.js"><link rel="prefetch" href="/my-notebook/assets/js/133.f883dbbc.js"><link rel="prefetch" href="/my-notebook/assets/js/134.a1556d12.js"><link rel="prefetch" href="/my-notebook/assets/js/135.a1c81593.js"><link rel="prefetch" href="/my-notebook/assets/js/136.4af34e1a.js"><link rel="prefetch" href="/my-notebook/assets/js/137.6e9a18df.js"><link rel="prefetch" href="/my-notebook/assets/js/138.965ac3b9.js"><link rel="prefetch" href="/my-notebook/assets/js/139.17988d76.js"><link rel="prefetch" href="/my-notebook/assets/js/14.76327a45.js"><link rel="prefetch" href="/my-notebook/assets/js/140.b76db994.js"><link rel="prefetch" href="/my-notebook/assets/js/141.fb50cd38.js"><link rel="prefetch" href="/my-notebook/assets/js/142.2b9645fe.js"><link rel="prefetch" href="/my-notebook/assets/js/143.df1ed963.js"><link rel="prefetch" href="/my-notebook/assets/js/144.19aa5f85.js"><link rel="prefetch" href="/my-notebook/assets/js/145.5e6be986.js"><link rel="prefetch" href="/my-notebook/assets/js/146.b22c21bc.js"><link rel="prefetch" href="/my-notebook/assets/js/147.b871f307.js"><link rel="prefetch" href="/my-notebook/assets/js/148.fcec73f0.js"><link rel="prefetch" href="/my-notebook/assets/js/149.23dfe7c5.js"><link rel="prefetch" href="/my-notebook/assets/js/15.835217da.js"><link rel="prefetch" href="/my-notebook/assets/js/150.864ec50a.js"><link rel="prefetch" href="/my-notebook/assets/js/151.f275808c.js"><link rel="prefetch" href="/my-notebook/assets/js/152.2ab50a17.js"><link rel="prefetch" href="/my-notebook/assets/js/153.fd59febe.js"><link rel="prefetch" href="/my-notebook/assets/js/154.da85e3c3.js"><link rel="prefetch" href="/my-notebook/assets/js/155.dfb76786.js"><link rel="prefetch" href="/my-notebook/assets/js/156.b41e6d7d.js"><link rel="prefetch" href="/my-notebook/assets/js/157.9115acb8.js"><link rel="prefetch" href="/my-notebook/assets/js/158.725068c6.js"><link rel="prefetch" href="/my-notebook/assets/js/159.33cbc385.js"><link rel="prefetch" href="/my-notebook/assets/js/16.c933db31.js"><link rel="prefetch" href="/my-notebook/assets/js/160.f393d21f.js"><link rel="prefetch" href="/my-notebook/assets/js/161.b680532e.js"><link rel="prefetch" href="/my-notebook/assets/js/162.9d3303c0.js"><link rel="prefetch" href="/my-notebook/assets/js/163.51385a83.js"><link rel="prefetch" href="/my-notebook/assets/js/164.83c94f73.js"><link rel="prefetch" href="/my-notebook/assets/js/165.9fba2a4e.js"><link rel="prefetch" href="/my-notebook/assets/js/166.2a08cdc3.js"><link rel="prefetch" href="/my-notebook/assets/js/167.a5c60210.js"><link rel="prefetch" href="/my-notebook/assets/js/168.330874fb.js"><link rel="prefetch" href="/my-notebook/assets/js/169.41f7a6ad.js"><link rel="prefetch" href="/my-notebook/assets/js/17.ba7b8bec.js"><link rel="prefetch" href="/my-notebook/assets/js/170.9b77718c.js"><link rel="prefetch" href="/my-notebook/assets/js/171.b57d24b3.js"><link rel="prefetch" href="/my-notebook/assets/js/172.e7c3b8c2.js"><link rel="prefetch" href="/my-notebook/assets/js/173.1109bb7c.js"><link rel="prefetch" href="/my-notebook/assets/js/174.61956a44.js"><link rel="prefetch" href="/my-notebook/assets/js/175.3908db80.js"><link rel="prefetch" href="/my-notebook/assets/js/18.7de2768a.js"><link rel="prefetch" href="/my-notebook/assets/js/19.a327bedc.js"><link rel="prefetch" href="/my-notebook/assets/js/20.ca7ff198.js"><link rel="prefetch" href="/my-notebook/assets/js/21.bbcf81a8.js"><link rel="prefetch" href="/my-notebook/assets/js/22.869d1db5.js"><link rel="prefetch" href="/my-notebook/assets/js/23.29aa389e.js"><link rel="prefetch" href="/my-notebook/assets/js/24.f29c0fd9.js"><link rel="prefetch" href="/my-notebook/assets/js/25.c94c039b.js"><link rel="prefetch" href="/my-notebook/assets/js/26.0b1bf56e.js"><link rel="prefetch" href="/my-notebook/assets/js/27.0444efbc.js"><link rel="prefetch" href="/my-notebook/assets/js/28.4e69eebe.js"><link rel="prefetch" href="/my-notebook/assets/js/29.52e420bf.js"><link rel="prefetch" href="/my-notebook/assets/js/3.8cedad4b.js"><link rel="prefetch" href="/my-notebook/assets/js/30.d2ca2b17.js"><link rel="prefetch" href="/my-notebook/assets/js/31.9a797853.js"><link rel="prefetch" href="/my-notebook/assets/js/32.9e76f664.js"><link rel="prefetch" href="/my-notebook/assets/js/33.feacdcf7.js"><link rel="prefetch" href="/my-notebook/assets/js/34.f4241c54.js"><link rel="prefetch" href="/my-notebook/assets/js/35.67f5b434.js"><link rel="prefetch" href="/my-notebook/assets/js/36.1f8ee144.js"><link rel="prefetch" href="/my-notebook/assets/js/37.0c071b64.js"><link rel="prefetch" href="/my-notebook/assets/js/38.f1e074b3.js"><link rel="prefetch" href="/my-notebook/assets/js/39.9d4c6e85.js"><link rel="prefetch" href="/my-notebook/assets/js/4.b921fff9.js"><link rel="prefetch" href="/my-notebook/assets/js/40.6d962961.js"><link rel="prefetch" href="/my-notebook/assets/js/41.8e328e52.js"><link rel="prefetch" href="/my-notebook/assets/js/42.81742aa5.js"><link rel="prefetch" href="/my-notebook/assets/js/43.afd0b91d.js"><link rel="prefetch" href="/my-notebook/assets/js/44.a9e972af.js"><link rel="prefetch" href="/my-notebook/assets/js/45.a23ec5fa.js"><link rel="prefetch" href="/my-notebook/assets/js/46.ccff66d3.js"><link rel="prefetch" href="/my-notebook/assets/js/47.59d78141.js"><link rel="prefetch" href="/my-notebook/assets/js/48.4818bd71.js"><link rel="prefetch" href="/my-notebook/assets/js/49.a0d32068.js"><link rel="prefetch" href="/my-notebook/assets/js/5.49f3a424.js"><link rel="prefetch" href="/my-notebook/assets/js/50.05ba490d.js"><link rel="prefetch" href="/my-notebook/assets/js/51.90a86621.js"><link rel="prefetch" href="/my-notebook/assets/js/52.0c762cbf.js"><link rel="prefetch" href="/my-notebook/assets/js/53.d1b67983.js"><link rel="prefetch" href="/my-notebook/assets/js/54.b5573ec0.js"><link rel="prefetch" href="/my-notebook/assets/js/55.2b4d585d.js"><link rel="prefetch" href="/my-notebook/assets/js/56.4a0ddce7.js"><link rel="prefetch" href="/my-notebook/assets/js/57.ec54f476.js"><link rel="prefetch" href="/my-notebook/assets/js/58.9e9603e0.js"><link rel="prefetch" href="/my-notebook/assets/js/59.6e0f9690.js"><link rel="prefetch" href="/my-notebook/assets/js/6.b6b0a51e.js"><link rel="prefetch" href="/my-notebook/assets/js/60.b0a4d75e.js"><link rel="prefetch" href="/my-notebook/assets/js/61.3f7d1ac0.js"><link rel="prefetch" href="/my-notebook/assets/js/62.b9ffaeec.js"><link rel="prefetch" href="/my-notebook/assets/js/63.5c604f15.js"><link rel="prefetch" href="/my-notebook/assets/js/64.3b9b1d7a.js"><link rel="prefetch" href="/my-notebook/assets/js/65.d4dc2b9b.js"><link rel="prefetch" href="/my-notebook/assets/js/66.88b207fb.js"><link rel="prefetch" href="/my-notebook/assets/js/67.eac1823f.js"><link rel="prefetch" href="/my-notebook/assets/js/68.dc5a610b.js"><link rel="prefetch" href="/my-notebook/assets/js/69.701b8d08.js"><link rel="prefetch" href="/my-notebook/assets/js/7.13673d74.js"><link rel="prefetch" href="/my-notebook/assets/js/70.dca3e473.js"><link rel="prefetch" href="/my-notebook/assets/js/71.2d401c86.js"><link rel="prefetch" href="/my-notebook/assets/js/72.139269bf.js"><link rel="prefetch" href="/my-notebook/assets/js/73.048ee422.js"><link rel="prefetch" href="/my-notebook/assets/js/74.6601ba28.js"><link rel="prefetch" href="/my-notebook/assets/js/75.dea032b9.js"><link rel="prefetch" href="/my-notebook/assets/js/76.30576e8c.js"><link rel="prefetch" href="/my-notebook/assets/js/77.a8088645.js"><link rel="prefetch" href="/my-notebook/assets/js/78.b1944b2e.js"><link rel="prefetch" href="/my-notebook/assets/js/79.fa7d02b1.js"><link rel="prefetch" href="/my-notebook/assets/js/8.11185556.js"><link rel="prefetch" href="/my-notebook/assets/js/80.03c1ca59.js"><link rel="prefetch" href="/my-notebook/assets/js/81.a31c81bb.js"><link rel="prefetch" href="/my-notebook/assets/js/83.9a2a1a8f.js"><link rel="prefetch" href="/my-notebook/assets/js/84.0388bf76.js"><link rel="prefetch" href="/my-notebook/assets/js/85.3d746b1b.js"><link rel="prefetch" href="/my-notebook/assets/js/86.e1faa546.js"><link rel="prefetch" href="/my-notebook/assets/js/87.306773d2.js"><link rel="prefetch" href="/my-notebook/assets/js/88.461ec71e.js"><link rel="prefetch" href="/my-notebook/assets/js/89.b55d8069.js"><link rel="prefetch" href="/my-notebook/assets/js/9.a0f84f10.js"><link rel="prefetch" href="/my-notebook/assets/js/90.c7eec646.js"><link rel="prefetch" href="/my-notebook/assets/js/91.e83ef7ee.js"><link rel="prefetch" href="/my-notebook/assets/js/92.82fc9512.js"><link rel="prefetch" href="/my-notebook/assets/js/93.348bf8a5.js"><link rel="prefetch" href="/my-notebook/assets/js/94.8a5be2d6.js"><link rel="prefetch" href="/my-notebook/assets/js/95.4289a90b.js"><link rel="prefetch" href="/my-notebook/assets/js/96.2b148ecb.js"><link rel="prefetch" href="/my-notebook/assets/js/97.3b1c1575.js"><link rel="prefetch" href="/my-notebook/assets/js/98.14ea5af2.js"><link rel="prefetch" href="/my-notebook/assets/js/99.be5c53d3.js">
    <link rel="stylesheet" href="/my-notebook/assets/css/0.styles.06ca9f80.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-notebook/" class="home-link router-link-active"><!----> <span class="site-name">Garrik 的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-notebook/" class="nav-link">主页</a></div><div class="nav-item"><a href="https://github.com/Garrik-Liu/my-notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-notebook/" class="nav-link">主页</a></div><div class="nav-item"><a href="https://github.com/Garrik-Liu/my-notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#组件注册" class="sidebar-link">组件注册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#全局注册" class="sidebar-link">全局注册</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#局部注册" class="sidebar-link">局部注册</a></li></ul></li><li><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#组件选项对象" class="sidebar-link">组件选项对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#data-属性" class="sidebar-link">data 属性</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#template-属性" class="sidebar-link">template 属性</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#props-属性" class="sidebar-link">props 属性</a></li></ul></li><li><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#组件间通信" class="sidebar-link">组件间通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#prop-传递引用类型" class="sidebar-link">Prop 传递引用类型</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#自定义事件" class="sidebar-link">自定义事件</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#v-model" class="sidebar-link">v-model</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#中央事件总线-bus" class="sidebar-link">中央事件总线 (bus)</a></li></ul></li><li><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#内容分发" class="sidebar-link">内容分发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#基础用法" class="sidebar-link">基础用法</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#默认内容" class="sidebar-link">默认内容</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#具名插槽" class="sidebar-link">具名插槽</a></li></ul></li><li><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#动态组件" class="sidebar-link">动态组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/vue/%E7%BB%84%E4%BB%B6.html#keep-alive" class="sidebar-link">keep-alive</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h1> <p>对于前端开发而言, 如何去做代码复用一直是一个热门主题.  开发者都希望能够高效, 简洁地复用之前写好的代码.  同时不希望这种复用会带来任何副作用.  各个主流框架对于如何实现代码复用, 如何进行组件化都有自己的实现.  虽然实现方法不同, 但它们的核心思想都是: <strong>把 UI 结构映射到恰当的组件树</strong>.</p> <p><img src="https://i.loli.net/2019/03/05/5c7d61f223e92.png" alt="1647496-a07a17c3c9655ded"></p> <p>Vue 框架也有自己的组件系统，支持自定义 Tag 和原生 HTML 元素的扩展。</p> <h2 id="组件注册"><a href="#组件注册" class="header-anchor">#</a> 组件注册</h2> <p>在 Vue 中, 组件是可复用的 Vue 实例.  在注册组件时, 可分为 &quot;全局注册&quot; 和 &quot;局部注册&quot;</p> <h3 id="全局注册"><a href="#全局注册" class="header-anchor">#</a> 全局注册</h3> <p>通过 <code>Vue.component</code> 方法可以注册一个全局组件.  也就是说它们在注册之后可以用在任何新创建的 Vue 根实例的模板中。</p> <p>在注册一个组件的时候，我们需要给它一个唯一的名字.  这个名字作为 <code>Vue.component</code> 方法的第一个参数传入.  第二个参数为一个选项对象.  和创建 Vue 实例时传入的选项对象一样.</p> <p>例如:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... 选项 ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>component<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>component<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>在上面代码中, 我们全局注册了一个名为 <code>my-component</code> 的组件, 并在模板中使用了它.</p> <p>需要注意的是, 全局注册要在 Vue 根实例初始化之前注册.</p> <h4 id="组件名大小写"><a href="#组件名大小写" class="header-anchor">#</a> 组件名大小写</h4> <p>定义组件名的方式有两种：</p> <ul><li>连字符命名: 字母全小写且必须包含一个连字符.  例如: <code>my-component</code></li> <li>首字母大写命名: 每个单词的首字母都大写.  例如: <code>MyComponent</code></li></ul> <p>注册完之后, 当你在引用这个自定义元素时两种命名法都可以使用。但如果在 DOM 模板中使用组件时, 只有连字符形式是有效的.  因为 DOM 原生不分大小写. Vue 解析模板时仍然会将标签转为小写形式。</p> <p>例如, 如果一个自定义组件在定义时, 名字为 <code>MyComponent</code>.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 有效 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 无效 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponent</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    <span class="token comment">// 有效</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;MyComponent&gt;&lt;/MyComponent&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="局部注册"><a href="#局部注册" class="header-anchor">#</a> 局部注册</h3> <p>很多时候我们并不需要让自定义组件在全局都可用.  全局注册所有的组件意味着即便你已经不再使用一个组件了，它仍然会被包含在你最终的构建结果中.  很多时候我们想让某些组件只能在特定的 Vue 实例的作用域下可使用.</p> <p>在 Vue 实例中, 可以通过 <code>components</code> 对象来局部注册组件.  组件中也可以使用 <code>components</code> 对象来局部注册组件, 依次来实现组件嵌套.</p> <p>例如:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ComponentA <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* .选项. */</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> ComponentB <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* .选项. */</span> <span class="token punctuation">}</span>


<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'component-a'</span><span class="token punctuation">:</span> ComponentA<span class="token punctuation">,</span>
    <span class="token string">'component-b'</span><span class="token punctuation">:</span> ComponentB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>对于 <code>components</code> 对象中的每个属性来说，其属性名就是自定义元素的名字，其属性值就是这个组件的选项对象。</p> <h2 id="组件选项对象"><a href="#组件选项对象" class="header-anchor">#</a> 组件选项对象</h2> <p>前面说了注册组件除了命名, 还需要传入一个选项对象.  那组件选项对象和创建 Vue 实例的时候传入的选项对象有什么区别呢?</p> <h3 id="data-属性"><a href="#data-属性" class="header-anchor">#</a> data 属性</h3> <p>首先, 因为组件是可复用的, 那也就是说我们注册的组件可能会被实例化多次.  我们都知道对象 (Object) 在 JavaScript 中是引用类型.  传递的是指针, 而不是一份独立拷贝.  那么组件的 <code>data</code> 选项不同于创建 Vue 实例, <strong>是一个返回对象的函数</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">data</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样的话每一个组件实例都维护一份被返回的独立对象拷贝.</p> <h3 id="template-属性"><a href="#template-属性" class="header-anchor">#</a> template 属性</h3> <p>在前面我们并没怎么用过 <code>template</code> 属性.</p> <p><code>template</code> 属性的值被作为渲染 Vue 实例的模板.  如果一个 Vue 实例已经挂载到了一个 HTML 元素上了.  <code>template</code> 的值将会替换挂载的元素。</p> <p>它的值可以是字符串形式的 HTML 代码; 也可以以 <code>#</code> 开始, 被用作选择符, 来匹配定义在 <code>&lt;template&gt;</code> 元素的 <code>innerHTML</code> 作为模板.</p> <p>例如:</p> <p>直接在 <code>template</code> 属性里写模板代码:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component-a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;ul&gt;
      &lt;li&gt;首页&lt;/li&gt;
      &lt;li&gt;项目介绍&lt;/li&gt;
      &lt;li&gt;关于我&lt;/li&gt;
    &lt;/ul&gt;
</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过选择符, 获取匹配到的 <code>&lt;template&gt;</code> 元素里的内容作为模板:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component-a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component-a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>项目介绍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>关于我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component-a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'#my-template'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>同理, 在局部注册组件的时候, 上述规则同样适用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> MyComponentA <span class="token operator">=</span> <span class="token punctuation">{</span>
    template<span class="token punctuation">:</span> <span class="token string">'#myTemplate'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
  
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    MyComponentA<span class="token punctuation">:</span> MyComponentA
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>最后上述的所有代码渲染出来结果都为如下:</p> <p><img src="https://i.loli.net/2019/03/05/5c7dddfdc928d.png" alt="Screen Shot 2019-03-05 at 10.24.38 AM"></p> <p>需要注意的是, 组件的模板内容的最外层只能有一个根元素.  意思就是:</p> <p>这样写是有效的.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>blog-post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这样是无效的.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="props-属性"><a href="#props-属性" class="header-anchor">#</a> props 属性</h3> <p>通常, 一个应用会以一棵嵌套的组件树的形式来组织.  你可能会有页头、侧边栏、内容区等组件，每个组件又包含了其它的像导航链接、博文之类的组件。</p> <p>子组件经常需要从父组件获取数据.  例如, 我们有一个展示博文的组件. 它需要从父组件获得文章标题, 和文章内容.  如果没有这些内容那这个组件也就没法用.</p> <p>但需要明确的是，组件实例的作用域是孤立的，也就是说子组件的模板和模块中是无法直接调用父组件的数据.  那这个时候 <code>props</code> 就起到了父子组件数据传递的桥梁作用.  <strong>我们通过 <code>props</code> 将父组件的数据传递给子组件.</strong></p> <p>在组件的选项对象中, 我们需要显示声明组件可以接收的数据.  最简单的做法是, 把组件可以接收的数据名称以字符串形式写到一个数组里.</p> <p>例如:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'blog-post'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
    &lt;h2&gt;{{ title }}&lt;/h2&gt;
    &lt;p&gt;{{ content }}&lt;/p&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>上面代码中, <code>props</code> 属性里声明了两个希望接收的数据: <code>title</code> 和 <code>content</code>.  这两个数据会从组件的父作用域传进来.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> 
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>我的文章<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>这是我的文章内容...<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父组件可以向子组件传递静态数据外, 也可以通过 v-bind 的方式将父组件实例的数据和方法传递给子组件.</p> <p>例如:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;我的文章&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">=</span><span class="token string">&quot;这是我的文章内容...&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> 
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="类型验证-设置默认值-必须传入"><a href="#类型验证-设置默认值-必须传入" class="header-anchor">#</a> 类型验证, 设置默认值, 必须传入</h4> <p>除了以字符串数组形式列出的所有的 Prop.</p> <p>但是，通常你希望每个 Prop 都有指定的值类型。这时，你可以以对象形式列出 prop.  每个 Prop 可以通过一个对象配置高级选项，如类型检测、设置默认值, 要求数据必须被传入.</p> <p>拿上面的代码举例:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'blog-post'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// 数据类型为 String</span>
          type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
          <span class="token comment">// 默认值</span>
          <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'未设置标题'</span><span class="token punctuation">,</span>
          <span class="token comment">// 必须被传入</span>
          required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      content<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
          <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'未设置内容'</span><span class="token punctuation">,</span>
          required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
    &lt;h2&gt;{{ title }}&lt;/h2&gt;
    &lt;p&gt;{{ content }}&lt;/p&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>当 prop 验证失败的时候，开发环境构建版本的 Vue 将会产生一个控制台的警告。</p> <p>例如假如我们给组件的 <code>title</code> Prop 一个 Number 类型的值, 控制台就会出现如下警告:</p> <blockquote><p>[Vue warn]: Invalid prop: type check failed for prop &quot;title&quot;. Expected String, got Number.
(found in component <blog-post>)</blog-post></p></blockquote> <h4 id="子组件内别改-prop-值"><a href="#子组件内别改-prop-值" class="header-anchor">#</a> 子组件内别改 Prop 值</h4> <p>通过 Prop 我们把父组件的数据传到了子组件. 但要注意的是, 每次父级组件发生更新时，子组件中所有的 Prop 都将会更新为最新值。这意味着<strong>你不应该在一个子组件内部改变 Prop 的值</strong>。如果你这样做了，Vue 会在浏览器的控制台中发出警告。如果你希望传入的 Prop 可以作为组件内部的数据使用, 你可以把它的值赋给本地的 <code>data</code> 属性, 或 <code>computed</code> 属性.</p> <p>例如:</p> <div class="language-js extra-class"><pre class="language-js"><code>props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'initialCounter'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token function-variable function">data</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    counter<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>initialCounter
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="组件间通信"><a href="#组件间通信" class="header-anchor">#</a> 组件间通信</h2> <p>前面已经看到了用 <code>props</code> 可以实现从父组件向子组件传递数据.  但是 Vue 组件间通信的场景不知有这一种.</p> <p>归纳起来可以分为如下三类:</p> <ul><li>父子组件通信</li> <li>兄弟组件通信</li> <li>跨级组件通信</li></ul> <p><img src="https://i.loli.net/2019/03/05/5c7e30d2878b3.png" alt="Screen Shot 2019-03-05 at 4.18.01 PM"></p> <p>通过 Prop 进行通信, 只能形成一个从父级到子级的 &quot;单向数据流&quot;.  但是, 子级组件不可以向父级组件传数据.  这样做是为了防止从子组件意外改变父级组件的状态.</p> <p>那下面就讲讲其他组件间通信方法.</p> <h3 id="prop-传递引用类型"><a href="#prop-传递引用类型" class="header-anchor">#</a> Prop 传递引用类型</h3> <p>虽然子组件不能向父组件传递数据, 但是父组件通过 Prop 可以向子组件传递引用类型的数据.  我们都知道引用类型数据传递的是指针而不是值.  子组件接收到的, 和父组件中的引用类型数据都指向同一块内存.  所以修改了子组件中 Prop 的数据即修改了父组件的数据。</p> <p>那先看看在传递一个 &quot;对象&quot; (Object) 数据的情况下是如何进行的:</p> <p>例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ dataObj.data }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>change-data</span> <span class="token attr-name">:data-obj</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dataObj<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>change-data</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'change-data'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dataObj'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">changeData</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dataObj<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token string">'O(∩_∩)O哈哈~'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button @click=&quot;changeData&quot;&gt;改变父组件数据&lt;/button&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  
<span class="token keyword">var</span> example1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    dataObj<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      data<span class="token punctuation">:</span> <span class="token string">'谁能改变我?'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果如下:</p> <p><img src="https://i.loli.net/2019/03/05/5c7e369f9ec65.gif" alt="2019-03-05 16-42-19.2019-03-05 16_42_50"></p> <p>我们还可以传递一个 &quot;函数&quot; 来实现子组件向父组件传递数据的目的:</p> <p>例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ data }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>change-data</span> <span class="token attr-name">:change-data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>change-data</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'change-data'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'changeData'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;button @click=&quot;changeData('哈哈')&quot;&gt;
        改变父组件数据为 '哈哈'
      &lt;/button&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  
<span class="token keyword">var</span> example1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token string">'你好...'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">changeData</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>定义在父组件的函数 <code>changeData</code> 内部通过 <code>this</code> 实现了对父组件作用域的引用.  这个函数传入到子组件后, 通过点击事件触发, 并向函数内传入了一个参数.  这个参数沿着作用域链改变了父组件作用域中的 <code>data</code> 属性的值.</p> <p>虽然上面都实现了子组件向父组件传递数据的目的.  但请注意, <strong>通过 <code>props</code> 传递引用类型值来修改父组件数据是不被推荐的</strong>.  因为这样做破坏了组件的独立性.  组件之间应当保持解耦的状态.  应当只通过特定的接口传递数据来达到修改数据的目的, 组件内部数据状态由本地的 <code>data</code> 负责管理.  如果在组件内部作用域去改变另一个组件内部的数据, 这种行为会使数据流变得混乱.</p> <p>这一节只是希望大家能够对这种数据传递方法有个了解.  并不推荐在开发中使用.
</p> <h3 id="自定义事件"><a href="#自定义事件" class="header-anchor">#</a> 自定义事件</h3> <p>子组件向父组件传递数据推荐的做法是用 &quot;自定义事件&quot;.</p> <p>子组件内可以通过调用内建的 <code>$emit</code> 方法, 并传入事件名来触发一个自定义的事件.  之后在父组件内的子组件标签上用 <code>v-on</code> 来监听事件.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> textColor<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ text }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>change-data</span>
      <span class="token attr-name">@change-text-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>textColor = 'red'<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>change-data</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'change-data'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;button @click=&quot;$emit('change-text-color')&quot;&gt;
        改变文本颜色
      &lt;/button&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  
<span class="token keyword">var</span> example1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    text<span class="token punctuation">:</span> <span class="token string">'嘻嘻'</span><span class="token punctuation">,</span>
    textColor<span class="token punctuation">:</span> <span class="token string">'green'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>上面代码, 我在 <code>&lt;change-data&gt;</code> 标签上绑定了一个针对于 <code>change-text-color</code> 事件的监听器.  当 <code>&lt;change-data&gt;</code> 组件中的按钮被点击的时候, 就会触发一个叫 <code>change-text-color</code> 的自定义事件.  事件触发监听器, Vue 根节点内的 <code>textColor</code> 属性值被改变.</p> <h4 id="事件抛出数据"><a href="#事件抛出数据" class="header-anchor">#</a> 事件抛出数据</h4> <p>在开发中, 很多时候我们需要让事件抛出一个特定的值.  我们可以使用 <code>$emit</code> 的第二个参数来提供这个值.</p> <p>比如, 我们想让 <code>change-text-color</code> 这个事件触发的同时, 抛出一个指定颜色的字符串.  我们的代码可以这样写:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit('change-text-color', 'red')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  改变字体颜色
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当在父级组件监听这个事件的时候，我们可以通过 <code>$event</code> 访问到被抛出的这个值：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> textColor<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ text }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>change-data</span>
      <span class="token attr-name">@change-text-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>textColor = $event<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>change-data</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果这个事件处理函数是一个方法, 那么这个值将会作为第一个参数传入这个方法.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> textColor<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ text }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>change-data</span>
      <span class="token attr-name">@change-text-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeColor<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>change-data</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">changeColor</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newColor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> newColor<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="v-model"><a href="#v-model" class="header-anchor">#</a> v-model</h3> <h3 id="中央事件总线-bus"><a href="#中央事件总线-bus" class="header-anchor">#</a> 中央事件总线 (bus)</h3> <p>上述的通信方式都只适合父子组件之间通信.  而实际业务中, 兄弟组件, 跨多级组件之间通信的需求也是很常见的.  虽说用上述所讲的方法, 也是可以实现这些需求的.  但是会让数据流变得混乱, 不易管理, 代码逻辑也会变得非常复杂.</p> <p>Vue 推荐使用一个空的 Vue 实例作为 &quot;中央事件总线 (bus)&quot;.  各个组件之间可以通过这个 Vue 实例来触发事件和监听事件.</p> <p>你可以把它理解成一个 &quot;房产中介&quot;.  &quot;买房者&quot; 找中介去登记他想要的房屋信息, &quot;卖房者&quot; 找中介去登记要卖的房屋信息.  中介在这些信息中去进行匹配, 当合适的房屋出现后, 中介就会通知 &quot;买房者&quot;, 并发给他房子的具体信息.  在这个过程中, &quot;买房者&quot; 和 &quot;卖房者&quot; 并不做接触.  &quot;买房者&quot; 和 &quot;卖房者&quot; 就是两个组件, &quot;房产中介&quot; 就是这个中央事件总线 (bus).</p> <p>具体使用实例如下:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-b</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建 bus 实例</span>
<span class="token keyword">const</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'component-a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">data</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
          text<span class="token punctuation">:</span> <span class="token string">'等待输入中...'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;{{ text }}&lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token function-variable function">mounted</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment">// 监听事件</span>
        bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'changeText'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            that<span class="token punctuation">.</span>text <span class="token operator">=</span> text<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'component-b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">data</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
          inputText<span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">changeText</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 触发事件</span>
            bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'changeText'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;
            &lt;input type=&quot;text&quot; v-model=&quot;inputText&quot; @input=&quot;changeText&quot; /&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最终效果如下:</p> <p><img src="https://i.loli.net/2019/03/05/5c7e95562a3ea.gif" alt="2019-03-05 23-26-22.2019-03-05 23_26_35"></p> <p>上面示例中, <code>&lt;component-a&gt;</code> 和 <code>&lt;component-b&gt;</code> 是兄弟组件.  在 <code>&lt;component-a&gt;</code> 组件的选项对象中定义了 <code>mounted</code> 钩子函数, 使其在组件初始化阶段监听来自 bus 的 <code>changeText</code> 事件.  <code>&lt;component-b&gt;</code> 会在 <code>input</code> 事件触发时通过 bus 触发 <code>changeText</code> 事件, 并把组件内的 <code>inputText</code> 属性的值一同发送出去.  此时, <code>&lt;component-a&gt;</code> 接收到了事件, 和随同的数据, 并将数据赋值给组件内的 <code>text</code> 属性.</p> <h2 id="内容分发"><a href="#内容分发" class="header-anchor">#</a> 内容分发</h2> <p>前面的例子中我们都是单个使用地组件.  我们希望组件能像 HTML 元素一样，可以插入其他内容, 可以互相嵌套.  就像这样:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-b</span><span class="token punctuation">&gt;</span></span>
    哈哈...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-b</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这可以通过 Vue 自定义的 <code>&lt;slot&gt;</code> 元素实现, 也叫做 &quot;插槽&quot;.  当组件渲染的时候, 子组件内的 <code>&lt;slot&gt;</code> 元素会被替换成外部插入的内容.  这使得我们在使用组件时, 可以即使用它的结构, 也能向其内部填充不同的内容.</p> <h3 id="基础用法"><a href="#基础用法" class="header-anchor">#</a> 基础用法</h3> <p>例如:</p> <p>假如一个叫 <code>&lt;alert-box&gt;</code> 的组件模板如下:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    警告: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> !!!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在使用这个组件的时候, 我们可以向其中插入内容:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-box</span><span class="token punctuation">&gt;</span></span>
    你的账号在异地登录
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-box</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>最后渲染的时候, <code>&lt;slot&gt;</code> 就会被替换成 &quot;你的账号在异地登录&quot;.  同样插槽内也可以包含任何模板代码, 或其他组件.  例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-box</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>你的账号在异地登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-box</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-box</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-message</span><span class="token punctuation">&gt;</span></span>你的账号在异地登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>alert-message</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-box</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果你想在 <code>&lt;slot&gt;</code> 中使用数据的话, 请注意作用域问题.  请记住, <strong>父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的</strong>。</p> <p>例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigation-link</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Logged in as {{ user.name }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigation-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当在模板中使用 <code>&lt;navigation-link&gt;</code> 组件的时候, 可以向内插入的数据只能是当前作用域内的数据.  <code>&lt;navigation-link&gt;</code> 组件内定义的数据, 是不可以访问的.</p> <h3 id="默认内容"><a href="#默认内容" class="header-anchor">#</a> 默认内容</h3> <p>如果一个插槽没有接受到任何内容时, 我们希望它自己能够有一个默认的后备内容.  那我们可以直接把它这个内容写在 <code>&lt;slot&gt;</code> 标签内.</p> <p>例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这个组件内的 <code>&lt;button&gt;</code> 在没有接收到外部插入的任何内容时, 会将 &quot;Submit&quot; 做为默认内容.  那如果有内容插入的话, 后备内容就会被替代了.</p> <h3 id="具名插槽"><a href="#具名插槽" class="header-anchor">#</a> 具名插槽</h3> <p>在前面的例子中, 我们只在组件内使用了一个 <code>&lt;slot&gt;</code> 元素.  但根据开发需要, 有时候我们会需要多个插槽, 以来将外部传入的多个内容, 安插到组件内不同的地方.  那对于这样的情况, 我们可以为 <code>&lt;slot&gt;</code> 元素定义 <code>name</code> 属性.  这被称为 &quot;具名插槽&quot;.</p> <p>例如对于一个带有如下模板的 <code>&lt;base-layout&gt;</code> 组件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 我们希望把页头放这里 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 我们希望把主要内容放这里 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 我们希望把页脚放这里 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在向具名插槽提供内容的时候，我们可以在一个 <code>&lt;template&gt;</code> 元素上使用 <code>v-slot</code> 指令，并以 <code>v-slot</code> 的参数的形式提供其名称.  没有指定 <code>name</code> 属性的 <code>&lt;slot&gt;</code> 元素被作为默认插槽, 接收所有没有被包裹在带有 <code>v-slot</code> 的 <code>&lt;template&gt;</code> 中的内容.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-layout</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Here might be a page title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>A paragraph for the main content.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>And another one.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Here's some contact info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-layout</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>现在 <code>&lt;template&gt;</code> 元素中的所有内容都将会被传入相应的插槽。任何没有被包裹在带有 <code>v-slot</code> 的 <code>&lt;template&gt;</code> 中的内容都会被视为默认插槽的内容。</p> <h2 id="动态组件"><a href="#动态组件" class="header-anchor">#</a> 动态组件</h2> <p>&quot;动态组件&quot; 指的是多个组件同时使用一个挂载点, 然后根据指令动态切换.</p> <p>我们可以通过使用 <code>&lt;component&gt;</code> 元素，动态地将想要的组件名绑定到它的 <code>is</code> 特性，可以实现动态组件.</p> <p>例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(name, index) in componentList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeIndex(index)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    // componet 组件会被渲染成 is 属性上对应的组件名
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>componentList[currentIndex]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'component-a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;
            我是组件 A
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'component-b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;
            我是组件 B
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      currentIndex<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      componentList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'component-a'</span><span class="token punctuation">,</span> <span class="token string">'component-b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     <span class="token function-variable function">changeIndex</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果如下:</p> <p><img src="https://i.loli.net/2019/03/06/5c7f2ae278372.gif" alt="2019-03-06 10-04-48.2019-03-06 10_04_55"></p> <h3 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h3> <p>当这些组件之间切换的时候, 有时候你会希望被切换出去的组件不要被销毁, 希望组件实例能够被在它们第一次被创建的时候缓存下来.  以避免反复重渲染导致的性能问题。</p> <p>为了解决这个问题，我们可以用一个 <code>&lt;keep-alive&gt;</code> 元素将其动态组件包裹起来。</p> <p>例如:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 失活的组件将会被缓存！--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentTabComponent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/17/2019, 9:32:44 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/my-notebook/assets/js/app.e4fcc072.js" defer></script><script src="/my-notebook/assets/js/2.453503aa.js" defer></script><script src="/my-notebook/assets/js/82.e75508ee.js" defer></script>
  </body>
</html>
