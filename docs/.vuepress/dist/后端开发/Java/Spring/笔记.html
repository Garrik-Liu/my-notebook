<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring å®æˆ˜ - è¯»ä¹¦ç¬”è®° | Garrik çš„ç¬”è®°</title>
    <meta name="description" content="è¿™é‡Œæ˜¯ Garrik çš„å‰ç«¯ç¬”è®°æœ¬">
    
    
    <link rel="preload" href="/my-notebook/assets/css/0.styles.5c4a3b3d.css" as="style"><link rel="preload" href="/my-notebook/assets/js/app.98613d35.js" as="script"><link rel="preload" href="/my-notebook/assets/js/2.3651e544.js" as="script"><link rel="preload" href="/my-notebook/assets/js/139.f13f7561.js" as="script"><link rel="prefetch" href="/my-notebook/assets/js/10.5da1144b.js"><link rel="prefetch" href="/my-notebook/assets/js/100.05c39a20.js"><link rel="prefetch" href="/my-notebook/assets/js/101.2dabd972.js"><link rel="prefetch" href="/my-notebook/assets/js/102.187ccdd9.js"><link rel="prefetch" href="/my-notebook/assets/js/103.2c22c923.js"><link rel="prefetch" href="/my-notebook/assets/js/104.54358b29.js"><link rel="prefetch" href="/my-notebook/assets/js/105.cc06ed2f.js"><link rel="prefetch" href="/my-notebook/assets/js/106.4d6241c5.js"><link rel="prefetch" href="/my-notebook/assets/js/107.9d396f78.js"><link rel="prefetch" href="/my-notebook/assets/js/108.2b5516b3.js"><link rel="prefetch" href="/my-notebook/assets/js/109.f9f302ba.js"><link rel="prefetch" href="/my-notebook/assets/js/11.f8a1ce13.js"><link rel="prefetch" href="/my-notebook/assets/js/110.1036878a.js"><link rel="prefetch" href="/my-notebook/assets/js/111.5bba7dde.js"><link rel="prefetch" href="/my-notebook/assets/js/112.f32e2f3c.js"><link rel="prefetch" href="/my-notebook/assets/js/113.ff2d3da3.js"><link rel="prefetch" href="/my-notebook/assets/js/114.d838f2cc.js"><link rel="prefetch" href="/my-notebook/assets/js/115.8d78d456.js"><link rel="prefetch" href="/my-notebook/assets/js/116.0b021219.js"><link rel="prefetch" href="/my-notebook/assets/js/117.fa027e4d.js"><link rel="prefetch" href="/my-notebook/assets/js/118.8948a35e.js"><link rel="prefetch" href="/my-notebook/assets/js/119.8d479e32.js"><link rel="prefetch" href="/my-notebook/assets/js/12.5976dc4b.js"><link rel="prefetch" href="/my-notebook/assets/js/120.06de1e09.js"><link rel="prefetch" href="/my-notebook/assets/js/121.feb4c17f.js"><link rel="prefetch" href="/my-notebook/assets/js/122.dd19373f.js"><link rel="prefetch" href="/my-notebook/assets/js/123.558d3bd6.js"><link rel="prefetch" href="/my-notebook/assets/js/124.88366896.js"><link rel="prefetch" href="/my-notebook/assets/js/125.f4f52e41.js"><link rel="prefetch" href="/my-notebook/assets/js/126.c33edfa1.js"><link rel="prefetch" href="/my-notebook/assets/js/127.1e616350.js"><link rel="prefetch" href="/my-notebook/assets/js/128.fd7f1da9.js"><link rel="prefetch" href="/my-notebook/assets/js/129.5bb026c1.js"><link rel="prefetch" href="/my-notebook/assets/js/13.514662f6.js"><link rel="prefetch" href="/my-notebook/assets/js/130.bbcdcbee.js"><link rel="prefetch" href="/my-notebook/assets/js/131.85fdfa83.js"><link rel="prefetch" href="/my-notebook/assets/js/132.79657cde.js"><link rel="prefetch" href="/my-notebook/assets/js/133.6b63fa50.js"><link rel="prefetch" href="/my-notebook/assets/js/134.ba9016fa.js"><link rel="prefetch" href="/my-notebook/assets/js/135.8ac986ce.js"><link rel="prefetch" href="/my-notebook/assets/js/136.ed66dc1c.js"><link rel="prefetch" href="/my-notebook/assets/js/137.52bbb3d7.js"><link rel="prefetch" href="/my-notebook/assets/js/138.40dc515a.js"><link rel="prefetch" href="/my-notebook/assets/js/14.4a15b705.js"><link rel="prefetch" href="/my-notebook/assets/js/140.30877b90.js"><link rel="prefetch" href="/my-notebook/assets/js/141.4ab3a563.js"><link rel="prefetch" href="/my-notebook/assets/js/142.ac30fc2e.js"><link rel="prefetch" href="/my-notebook/assets/js/143.fc4b5365.js"><link rel="prefetch" href="/my-notebook/assets/js/144.25a599bc.js"><link rel="prefetch" href="/my-notebook/assets/js/145.45535450.js"><link rel="prefetch" href="/my-notebook/assets/js/146.cc707100.js"><link rel="prefetch" href="/my-notebook/assets/js/147.e2170658.js"><link rel="prefetch" href="/my-notebook/assets/js/148.8b70e613.js"><link rel="prefetch" href="/my-notebook/assets/js/149.14f70fde.js"><link rel="prefetch" href="/my-notebook/assets/js/15.b9deacc2.js"><link rel="prefetch" href="/my-notebook/assets/js/150.edfb48fa.js"><link rel="prefetch" href="/my-notebook/assets/js/151.21f330f9.js"><link rel="prefetch" href="/my-notebook/assets/js/152.eadb2598.js"><link rel="prefetch" href="/my-notebook/assets/js/153.b461d79c.js"><link rel="prefetch" href="/my-notebook/assets/js/154.94c18dc9.js"><link rel="prefetch" href="/my-notebook/assets/js/155.943a013a.js"><link rel="prefetch" href="/my-notebook/assets/js/156.8bfb56e6.js"><link rel="prefetch" href="/my-notebook/assets/js/157.63db345f.js"><link rel="prefetch" href="/my-notebook/assets/js/158.bac36c37.js"><link rel="prefetch" href="/my-notebook/assets/js/159.1ae891d8.js"><link rel="prefetch" href="/my-notebook/assets/js/16.9f5bb777.js"><link rel="prefetch" href="/my-notebook/assets/js/160.8ab752cc.js"><link rel="prefetch" href="/my-notebook/assets/js/161.e01b46cb.js"><link rel="prefetch" href="/my-notebook/assets/js/162.9a9b3de6.js"><link rel="prefetch" href="/my-notebook/assets/js/163.6f9ab859.js"><link rel="prefetch" href="/my-notebook/assets/js/164.43da175a.js"><link rel="prefetch" href="/my-notebook/assets/js/165.57307a8b.js"><link rel="prefetch" href="/my-notebook/assets/js/166.667ed7ce.js"><link rel="prefetch" href="/my-notebook/assets/js/167.fe729d6c.js"><link rel="prefetch" href="/my-notebook/assets/js/168.ac602d8c.js"><link rel="prefetch" href="/my-notebook/assets/js/169.ef9400e8.js"><link rel="prefetch" href="/my-notebook/assets/js/17.39c2ed00.js"><link rel="prefetch" href="/my-notebook/assets/js/170.8c93e73d.js"><link rel="prefetch" href="/my-notebook/assets/js/171.2b35b526.js"><link rel="prefetch" href="/my-notebook/assets/js/172.7733c595.js"><link rel="prefetch" href="/my-notebook/assets/js/173.115d7909.js"><link rel="prefetch" href="/my-notebook/assets/js/174.20491ccf.js"><link rel="prefetch" href="/my-notebook/assets/js/175.95fbae8a.js"><link rel="prefetch" href="/my-notebook/assets/js/176.6f21a21f.js"><link rel="prefetch" href="/my-notebook/assets/js/177.2225eaf0.js"><link rel="prefetch" href="/my-notebook/assets/js/178.f4dc3ffd.js"><link rel="prefetch" href="/my-notebook/assets/js/179.a60311eb.js"><link rel="prefetch" href="/my-notebook/assets/js/18.e6b38e34.js"><link rel="prefetch" href="/my-notebook/assets/js/180.1f5433bd.js"><link rel="prefetch" href="/my-notebook/assets/js/181.65fb13be.js"><link rel="prefetch" href="/my-notebook/assets/js/182.f5df929a.js"><link rel="prefetch" href="/my-notebook/assets/js/183.f2faf48c.js"><link rel="prefetch" href="/my-notebook/assets/js/184.c3bdec00.js"><link rel="prefetch" href="/my-notebook/assets/js/185.beb00e31.js"><link rel="prefetch" href="/my-notebook/assets/js/186.53ddcc6a.js"><link rel="prefetch" href="/my-notebook/assets/js/187.65b98a94.js"><link rel="prefetch" href="/my-notebook/assets/js/188.8c4ba27e.js"><link rel="prefetch" href="/my-notebook/assets/js/189.1434f664.js"><link rel="prefetch" href="/my-notebook/assets/js/19.72c8213e.js"><link rel="prefetch" href="/my-notebook/assets/js/190.4d686b8d.js"><link rel="prefetch" href="/my-notebook/assets/js/191.a0565dec.js"><link rel="prefetch" href="/my-notebook/assets/js/192.f746953e.js"><link rel="prefetch" href="/my-notebook/assets/js/193.0b0ceaea.js"><link rel="prefetch" href="/my-notebook/assets/js/194.5310845d.js"><link rel="prefetch" href="/my-notebook/assets/js/195.5870d428.js"><link rel="prefetch" href="/my-notebook/assets/js/196.43aa7db6.js"><link rel="prefetch" href="/my-notebook/assets/js/197.2ed48019.js"><link rel="prefetch" href="/my-notebook/assets/js/198.ecd4d4b6.js"><link rel="prefetch" href="/my-notebook/assets/js/199.e54ef1db.js"><link rel="prefetch" href="/my-notebook/assets/js/20.580697d2.js"><link rel="prefetch" href="/my-notebook/assets/js/200.22ee82e5.js"><link rel="prefetch" href="/my-notebook/assets/js/201.7b6d881f.js"><link rel="prefetch" href="/my-notebook/assets/js/202.8e55ca7a.js"><link rel="prefetch" href="/my-notebook/assets/js/203.ec19f63e.js"><link rel="prefetch" href="/my-notebook/assets/js/204.68454d19.js"><link rel="prefetch" href="/my-notebook/assets/js/205.eea707f8.js"><link rel="prefetch" href="/my-notebook/assets/js/206.8b97cb05.js"><link rel="prefetch" href="/my-notebook/assets/js/207.2a7bc5f8.js"><link rel="prefetch" href="/my-notebook/assets/js/208.8ab12be7.js"><link rel="prefetch" href="/my-notebook/assets/js/209.97a940ef.js"><link rel="prefetch" href="/my-notebook/assets/js/21.7b30303b.js"><link rel="prefetch" href="/my-notebook/assets/js/210.3fc83664.js"><link rel="prefetch" href="/my-notebook/assets/js/211.cac83338.js"><link rel="prefetch" href="/my-notebook/assets/js/212.8914c892.js"><link rel="prefetch" href="/my-notebook/assets/js/213.b79d0401.js"><link rel="prefetch" href="/my-notebook/assets/js/214.7b763328.js"><link rel="prefetch" href="/my-notebook/assets/js/215.d4bd598c.js"><link rel="prefetch" href="/my-notebook/assets/js/216.12114d43.js"><link rel="prefetch" href="/my-notebook/assets/js/217.a8566379.js"><link rel="prefetch" href="/my-notebook/assets/js/218.36502be7.js"><link rel="prefetch" href="/my-notebook/assets/js/219.fd4ee7e7.js"><link rel="prefetch" href="/my-notebook/assets/js/22.2797c70f.js"><link rel="prefetch" href="/my-notebook/assets/js/220.a1d2d211.js"><link rel="prefetch" href="/my-notebook/assets/js/221.d44468bb.js"><link rel="prefetch" href="/my-notebook/assets/js/222.ba91b4a0.js"><link rel="prefetch" href="/my-notebook/assets/js/223.89222c61.js"><link rel="prefetch" href="/my-notebook/assets/js/224.cd1fca7e.js"><link rel="prefetch" href="/my-notebook/assets/js/225.fe826083.js"><link rel="prefetch" href="/my-notebook/assets/js/226.06e9eeb4.js"><link rel="prefetch" href="/my-notebook/assets/js/227.5f344695.js"><link rel="prefetch" href="/my-notebook/assets/js/228.4238a2f4.js"><link rel="prefetch" href="/my-notebook/assets/js/229.c3113c08.js"><link rel="prefetch" href="/my-notebook/assets/js/23.a239901e.js"><link rel="prefetch" href="/my-notebook/assets/js/230.2e17ccc6.js"><link rel="prefetch" href="/my-notebook/assets/js/231.e2f08d42.js"><link rel="prefetch" href="/my-notebook/assets/js/232.c5fa0c83.js"><link rel="prefetch" href="/my-notebook/assets/js/233.10aff566.js"><link rel="prefetch" href="/my-notebook/assets/js/234.b078a41e.js"><link rel="prefetch" href="/my-notebook/assets/js/235.a0c93533.js"><link rel="prefetch" href="/my-notebook/assets/js/236.b5e8aa71.js"><link rel="prefetch" href="/my-notebook/assets/js/237.bc6002b7.js"><link rel="prefetch" href="/my-notebook/assets/js/238.251f2a2f.js"><link rel="prefetch" href="/my-notebook/assets/js/239.32855e59.js"><link rel="prefetch" href="/my-notebook/assets/js/24.69d43c30.js"><link rel="prefetch" href="/my-notebook/assets/js/240.2630ff48.js"><link rel="prefetch" href="/my-notebook/assets/js/241.746ff5bf.js"><link rel="prefetch" href="/my-notebook/assets/js/242.63d1aef5.js"><link rel="prefetch" href="/my-notebook/assets/js/243.362bc969.js"><link rel="prefetch" href="/my-notebook/assets/js/244.6b13c422.js"><link rel="prefetch" href="/my-notebook/assets/js/245.00ea7d40.js"><link rel="prefetch" href="/my-notebook/assets/js/246.148138b2.js"><link rel="prefetch" href="/my-notebook/assets/js/247.c3a637ef.js"><link rel="prefetch" href="/my-notebook/assets/js/248.ffdc110a.js"><link rel="prefetch" href="/my-notebook/assets/js/249.903ecd7f.js"><link rel="prefetch" href="/my-notebook/assets/js/25.245df910.js"><link rel="prefetch" href="/my-notebook/assets/js/250.bcdadb1b.js"><link rel="prefetch" href="/my-notebook/assets/js/251.4946deb0.js"><link rel="prefetch" href="/my-notebook/assets/js/252.235f9aaf.js"><link rel="prefetch" href="/my-notebook/assets/js/253.128ae414.js"><link rel="prefetch" href="/my-notebook/assets/js/254.44f642a9.js"><link rel="prefetch" href="/my-notebook/assets/js/255.31467a68.js"><link rel="prefetch" href="/my-notebook/assets/js/256.45a3e37b.js"><link rel="prefetch" href="/my-notebook/assets/js/257.ecb929d7.js"><link rel="prefetch" href="/my-notebook/assets/js/258.03885bbe.js"><link rel="prefetch" href="/my-notebook/assets/js/259.46b4f565.js"><link rel="prefetch" href="/my-notebook/assets/js/26.4a082192.js"><link rel="prefetch" href="/my-notebook/assets/js/260.c89e99a3.js"><link rel="prefetch" href="/my-notebook/assets/js/261.810bda43.js"><link rel="prefetch" href="/my-notebook/assets/js/262.0f221116.js"><link rel="prefetch" href="/my-notebook/assets/js/263.cc9017fb.js"><link rel="prefetch" href="/my-notebook/assets/js/264.9a83bd96.js"><link rel="prefetch" href="/my-notebook/assets/js/265.4ed6c48d.js"><link rel="prefetch" href="/my-notebook/assets/js/266.5cef01f9.js"><link rel="prefetch" href="/my-notebook/assets/js/267.4731e311.js"><link rel="prefetch" href="/my-notebook/assets/js/268.91824854.js"><link rel="prefetch" href="/my-notebook/assets/js/27.34659911.js"><link rel="prefetch" href="/my-notebook/assets/js/28.d160712d.js"><link rel="prefetch" href="/my-notebook/assets/js/29.9fbdc255.js"><link rel="prefetch" href="/my-notebook/assets/js/3.ff3d6313.js"><link rel="prefetch" href="/my-notebook/assets/js/30.dc2a5896.js"><link rel="prefetch" href="/my-notebook/assets/js/31.648ba8db.js"><link rel="prefetch" href="/my-notebook/assets/js/32.ed4e3329.js"><link rel="prefetch" href="/my-notebook/assets/js/33.ecebf7c6.js"><link rel="prefetch" href="/my-notebook/assets/js/34.931fde4a.js"><link rel="prefetch" href="/my-notebook/assets/js/35.65fe2508.js"><link rel="prefetch" href="/my-notebook/assets/js/36.4e08eea8.js"><link rel="prefetch" href="/my-notebook/assets/js/37.3c3f299d.js"><link rel="prefetch" href="/my-notebook/assets/js/38.d7e7296d.js"><link rel="prefetch" href="/my-notebook/assets/js/39.de3247ed.js"><link rel="prefetch" href="/my-notebook/assets/js/4.1c08ef3a.js"><link rel="prefetch" href="/my-notebook/assets/js/40.85cce361.js"><link rel="prefetch" href="/my-notebook/assets/js/41.11bf1157.js"><link rel="prefetch" href="/my-notebook/assets/js/42.28f30629.js"><link rel="prefetch" href="/my-notebook/assets/js/43.50efff86.js"><link rel="prefetch" href="/my-notebook/assets/js/44.c2701c7b.js"><link rel="prefetch" href="/my-notebook/assets/js/45.96a7f94d.js"><link rel="prefetch" href="/my-notebook/assets/js/46.00751d1a.js"><link rel="prefetch" href="/my-notebook/assets/js/47.1581d530.js"><link rel="prefetch" href="/my-notebook/assets/js/48.9a3133a5.js"><link rel="prefetch" href="/my-notebook/assets/js/49.9ddbfa6d.js"><link rel="prefetch" href="/my-notebook/assets/js/5.f4a2cfc4.js"><link rel="prefetch" href="/my-notebook/assets/js/50.a7fea785.js"><link rel="prefetch" href="/my-notebook/assets/js/51.b0eadad2.js"><link rel="prefetch" href="/my-notebook/assets/js/52.5cf89c01.js"><link rel="prefetch" href="/my-notebook/assets/js/53.8b9fcb94.js"><link rel="prefetch" href="/my-notebook/assets/js/54.77446a10.js"><link rel="prefetch" href="/my-notebook/assets/js/55.d3d6ebba.js"><link rel="prefetch" href="/my-notebook/assets/js/56.15e05c86.js"><link rel="prefetch" href="/my-notebook/assets/js/57.6b4a7771.js"><link rel="prefetch" href="/my-notebook/assets/js/58.d7e3b3ab.js"><link rel="prefetch" href="/my-notebook/assets/js/59.5fff899e.js"><link rel="prefetch" href="/my-notebook/assets/js/6.0b54f878.js"><link rel="prefetch" href="/my-notebook/assets/js/60.ba3a17b9.js"><link rel="prefetch" href="/my-notebook/assets/js/61.c8061ee2.js"><link rel="prefetch" href="/my-notebook/assets/js/62.4b25d31b.js"><link rel="prefetch" href="/my-notebook/assets/js/63.1e0ecb93.js"><link rel="prefetch" href="/my-notebook/assets/js/64.9479c83e.js"><link rel="prefetch" href="/my-notebook/assets/js/65.0f8d1beb.js"><link rel="prefetch" href="/my-notebook/assets/js/66.390c7cc3.js"><link rel="prefetch" href="/my-notebook/assets/js/67.9e9b35cc.js"><link rel="prefetch" href="/my-notebook/assets/js/68.678fe2bf.js"><link rel="prefetch" href="/my-notebook/assets/js/69.fa11db83.js"><link rel="prefetch" href="/my-notebook/assets/js/7.d9ca3bb1.js"><link rel="prefetch" href="/my-notebook/assets/js/70.f8c86289.js"><link rel="prefetch" href="/my-notebook/assets/js/71.c526462d.js"><link rel="prefetch" href="/my-notebook/assets/js/72.c64632b4.js"><link rel="prefetch" href="/my-notebook/assets/js/73.a46a0dd7.js"><link rel="prefetch" href="/my-notebook/assets/js/74.cfc81ce4.js"><link rel="prefetch" href="/my-notebook/assets/js/75.0c218278.js"><link rel="prefetch" href="/my-notebook/assets/js/76.c18efb67.js"><link rel="prefetch" href="/my-notebook/assets/js/77.a6dfa8f4.js"><link rel="prefetch" href="/my-notebook/assets/js/78.b378854c.js"><link rel="prefetch" href="/my-notebook/assets/js/79.4f5f03a6.js"><link rel="prefetch" href="/my-notebook/assets/js/8.aec32414.js"><link rel="prefetch" href="/my-notebook/assets/js/80.8fcfc93b.js"><link rel="prefetch" href="/my-notebook/assets/js/81.2342d880.js"><link rel="prefetch" href="/my-notebook/assets/js/82.27f302af.js"><link rel="prefetch" href="/my-notebook/assets/js/83.fe4ab2e8.js"><link rel="prefetch" href="/my-notebook/assets/js/84.467cabcb.js"><link rel="prefetch" href="/my-notebook/assets/js/85.6b7cddbc.js"><link rel="prefetch" href="/my-notebook/assets/js/86.f05c4c5f.js"><link rel="prefetch" href="/my-notebook/assets/js/87.82b2b447.js"><link rel="prefetch" href="/my-notebook/assets/js/88.e26b78df.js"><link rel="prefetch" href="/my-notebook/assets/js/89.c5247346.js"><link rel="prefetch" href="/my-notebook/assets/js/9.d5529ff9.js"><link rel="prefetch" href="/my-notebook/assets/js/90.94fd5975.js"><link rel="prefetch" href="/my-notebook/assets/js/91.11e77087.js"><link rel="prefetch" href="/my-notebook/assets/js/92.6051dc6c.js"><link rel="prefetch" href="/my-notebook/assets/js/93.83444734.js"><link rel="prefetch" href="/my-notebook/assets/js/94.a9038e1b.js"><link rel="prefetch" href="/my-notebook/assets/js/95.1b063060.js"><link rel="prefetch" href="/my-notebook/assets/js/96.06b37200.js"><link rel="prefetch" href="/my-notebook/assets/js/97.f2ddc7f6.js"><link rel="prefetch" href="/my-notebook/assets/js/98.ade9a6f8.js"><link rel="prefetch" href="/my-notebook/assets/js/99.03e2b9d4.js">
    <link rel="stylesheet" href="/my-notebook/assets/css/0.styles.5c4a3b3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-notebook/" class="home-link router-link-active"><!----> <span class="site-name">Garrik çš„ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-notebook/" class="nav-link">ä¸»é¡µ</a></div><div class="nav-item"><a href="https://github.com/Garrik-Liu/my-notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-notebook/" class="nav-link">ä¸»é¡µ</a></div><div class="nav-item"><a href="https://github.com/Garrik-Liu/my-notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring å®æˆ˜ - è¯»ä¹¦ç¬”è®°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-ä»‹ç»" class="sidebar-link">spring ä»‹ç»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#é¢å‘åˆ‡é¢" class="sidebar-link">é¢å‘åˆ‡é¢</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#ä½¿ç”¨æ¨¡æ¿æ¶ˆé™¤æ ·æ¿ä»£ç " class="sidebar-link">ä½¿ç”¨æ¨¡æ¿æ¶ˆé™¤æ ·æ¿ä»£ç </a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-å®¹å™¨" class="sidebar-link">Spring å®¹å™¨</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#bean-çš„ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">Bean çš„ç”Ÿå‘½å‘¨æœŸ</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-æ¨¡å—" class="sidebar-link">Spring æ¨¡å—</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-ç”Ÿæ€" class="sidebar-link">Spring ç”Ÿæ€</a></li></ul></li><li><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#è£…é…-bean" class="sidebar-link">è£…é… Bean</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#xml-é…ç½®" class="sidebar-link">XML é…ç½®</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#æ³¨è§£é…ç½®" class="sidebar-link">æ³¨è§£é…ç½®</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#java-ç±»é…ç½®" class="sidebar-link">Java ç±»é…ç½®</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#æ··åˆä½¿ç”¨å¤šç§é…ç½®æ–¹å¼" class="sidebar-link">æ··åˆä½¿ç”¨å¤šç§é…ç½®æ–¹å¼</a></li></ul></li><li><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#é¢å‘åˆ‡é¢-aop" class="sidebar-link">é¢å‘åˆ‡é¢ AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#aop-æœ¯è¯­" class="sidebar-link">AOP æœ¯è¯­</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-ä¸­çš„-aop" class="sidebar-link">Spring ä¸­çš„ AOP</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#ç¼–å†™åˆ‡ç‚¹" class="sidebar-link">ç¼–å†™åˆ‡ç‚¹</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#ä½¿ç”¨æ³¨è§£å£°æ˜åˆ‡é¢" class="sidebar-link">ä½¿ç”¨æ³¨è§£å£°æ˜åˆ‡é¢</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#ä½¿ç”¨-xml-å£°æ˜åˆ‡é¢" class="sidebar-link">ä½¿ç”¨ XML å£°æ˜åˆ‡é¢</a></li></ul></li><li><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-mvc" class="sidebar-link">Spring MVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-mvc-å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹" class="sidebar-link">Spring MVC å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#æ­å»º-spring-mvc" class="sidebar-link">æ­å»º Spring MVC</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#ç¼–å†™æ§åˆ¶å™¨" class="sidebar-link">ç¼–å†™æ§åˆ¶å™¨</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#å¤„ç†è¡¨å•" class="sidebar-link">å¤„ç†è¡¨å•</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#ä½¿ç”¨-spring-mvc-åˆ›å»º-rest-api" class="sidebar-link">ä½¿ç”¨ Spring MVC åˆ›å»º REST API</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#å‘é€é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯" class="sidebar-link">å‘é€é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯</a></li><li class="sidebar-sub-header"><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#åœ¨å“åº”ä¸­è®¾ç½®å¤´éƒ¨ä¿¡æ¯" class="sidebar-link">åœ¨å“åº”ä¸­è®¾ç½®å¤´éƒ¨ä¿¡æ¯</a></li></ul></li><li><a href="/my-notebook/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/Java/Spring/%E7%AC%94%E8%AE%B0.html#spring-security" class="sidebar-link">Spring Security</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring-å®æˆ˜-è¯»ä¹¦ç¬”è®°"><a href="#spring-å®æˆ˜-è¯»ä¹¦ç¬”è®°" class="header-anchor">#</a> Spring å®æˆ˜ - è¯»ä¹¦ç¬”è®°</h1> <h2 id="spring-ä»‹ç»"><a href="#spring-ä»‹ç»" class="header-anchor">#</a> spring ä»‹ç»</h2> <h3 id="é¢å‘åˆ‡é¢"><a href="#é¢å‘åˆ‡é¢" class="header-anchor">#</a> é¢å‘åˆ‡é¢</h3> <p>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆaspect-oriented programmingï¼ŒAOPï¼‰å…è®¸ä½ æŠŠéå¸ƒåº”ç”¨å„å¤„çš„åŠŸèƒ½åˆ†ç¦»å‡ºæ¥å½¢æˆå¯é‡ç”¨çš„ç»„ä»¶ã€‚</p> <p>ç³»ç»Ÿç”±è®¸å¤šä¸åŒçš„ç»„ä»¶ç»„æˆï¼Œæ¯ä¸€ä¸ªç»„ä»¶å„è´Ÿè´£ä¸€å—ç‰¹å®šåŠŸèƒ½ã€‚é™¤äº†å®ç°è‡ªèº«æ ¸å¿ƒçš„åŠŸèƒ½ä¹‹å¤–ï¼Œè¿™äº›ç»„ä»¶è¿˜ç»å¸¸æ‰¿æ‹…ç€é¢å¤–çš„èŒè´£ã€‚è¯¸å¦‚æ—¥å¿—ã€äº‹åŠ¡ç®¡ç†å’Œå®‰å…¨è¿™æ ·çš„ç³»ç»ŸæœåŠ¡ã€‚</p> <p>è¿™äº›ç³»ç»ŸæœåŠ¡ç»å¸¸èå…¥åˆ°è‡ªèº«å…·æœ‰æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„ç»„ä»¶ä¸­å»ï¼Œè¿™äº›ç³»ç»ŸæœåŠ¡é€šå¸¸è¢«ç§°ä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå› ä¸ºå®ƒä»¬ä¼šè·¨è¶Šç³»ç»Ÿçš„å¤šä¸ªç»„ä»¶ã€‚</p> <p>è¿™äº›èå…¥åœ¨ä¸šåŠ¡é€»è¾‘ä¹‹ä¸­çš„ç³»ç»ŸæœåŠ¡ï¼ŒåŠ é‡äº†ä»£ç çš„å¤æ‚æ€§ï¼š</p> <ul><li>å®ç°ç³»ç»Ÿå…³æ³¨ç‚¹åŠŸèƒ½çš„ä»£ç å°†ä¼šé‡å¤å‡ºç°åœ¨å¤šä¸ªç»„ä»¶ä¸­ï¼Œå¦‚æœä½ è¦æ”¹å˜è¿™äº›å…³æ³¨ç‚¹çš„é€»è¾‘ï¼Œå¿…é¡»ä¿®æ”¹å„ä¸ªæ¨¡å—ä¸­çš„ç›¸å…³å®ç°ã€‚å³ä½¿ä½ æŠŠè¿™äº›å…³æ³¨ç‚¹æŠ½è±¡ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œå…¶ä»–æ¨¡å—åªæ˜¯è°ƒç”¨å®ƒçš„æ–¹æ³•ï¼Œä½†æ–¹æ³•çš„è°ƒç”¨è¿˜æ˜¯ä¼šé‡å¤å‡ºç°åœ¨å„ä¸ªæ¨¡å—ä¸­ã€‚</li> <li>ç»„ä»¶ä¼šå› ä¸ºé‚£äº›ä¸è‡ªèº«æ ¸å¿ƒä¸šåŠ¡æ— å…³çš„ä»£ç è€Œå˜å¾—æ··ä¹±ã€‚</li></ul> <p>AOP èƒ½å¤Ÿä½¿è¿™äº›æœåŠ¡æ¨¡å—åŒ–ï¼Œå¹¶ä»¥å£°æ˜çš„æ–¹å¼å°†å®ƒä»¬åº”ç”¨åˆ°å®ƒä»¬éœ€è¦å½±å“çš„ç»„ä»¶ä¸­å»ã€‚æ‰€é€ æˆçš„ç»“æœå°±æ˜¯è¿™äº›ç»„ä»¶ä¼šå…·æœ‰æ›´é«˜çš„å†…èšæ€§å¹¶ä¸”ä¼šæ›´åŠ å…³æ³¨è‡ªèº«çš„ä¸šåŠ¡</p> <p>æˆ‘ä»¬å¯ä»¥æŠŠåˆ‡é¢æƒ³è±¡ä¸ºè¦†ç›–åœ¨å¾ˆå¤šç»„ä»¶ä¹‹ä¸Šçš„ä¸€ä¸ªå¤–å£³ã€‚åº”ç”¨æ˜¯ç”±é‚£äº›å®ç°å„è‡ªä¸šåŠ¡åŠŸèƒ½çš„æ¨¡å—ç»„æˆçš„ã€‚å€ŸåŠ© AOPï¼Œå¯ä»¥ä½¿ç”¨å„ç§åŠŸèƒ½å±‚å»åŒ…è£¹æ ¸å¿ƒä¸šåŠ¡å±‚ã€‚</p> <p>AOP ä½¿å¾—å®‰å…¨ã€äº‹åŠ¡å’Œæ—¥å¿—å…³æ³¨ç‚¹ç­‰ç³»ç»Ÿçº§æœåŠ¡ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç›¸åˆ†ç¦»ã€‚</p> <p>ğŸŒ° ä¸¾ä¾‹ï¼š</p> <ul><li>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸæ¸¸è¯—äººç±»ï¼Œå’Œä¸€ä¸ªéª‘å£«ç±»ï¼›</li> <li>éª‘å£«æ‰§è¡Œä»»åŠ¡å‰åï¼ŒåŸæ¸¸è¯—äººè¦è¿›è¡Œæ­Œé¢‚ï¼›</li> <li>ä¹Ÿå°±æ˜¯éª‘å£«æ‰§è¡Œ <code>embarkOnQuest</code> æ–¹æ³•å‰åï¼ŒåŸæ¸¸è¯—äººè¦åˆ†åˆ«æ‰§è¡Œ <code>singBeforeQuest</code> å’Œ <code>singAfterQuest</code>ï¼›</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// åŸæ¸¸è¯—äºº</span>
<span class="token keyword">package</span> <span class="token namespace">sia<span class="token punctuation">.</span>knights</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">PrintStream</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minstrel</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">PrintStream</span> stream<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Minstrel</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span> stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>stream <span class="token operator">=</span> stream<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">singBeforeQuest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Fa la la, the knight is so brave!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">singAfterQuest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Tee hee hee, the brave knight &quot;</span> <span class="token operator">+</span>
    		<span class="token string">&quot;did embark on a quest!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// éª‘å£«</span>
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>springinaction<span class="token punctuation">.</span>knights</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BraveKnight</span> <span class="token keyword">implements</span> <span class="token class-name">Knight</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">Quest</span> quest<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">BraveKnight</span><span class="token punctuation">(</span><span class="token class-name">Quest</span> quest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>quest <span class="token operator">=</span> quest<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‰§è¡Œä»»åŠ¡</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">embarkOnQuest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">QuestException</span> <span class="token punctuation">{</span>
    quest<span class="token punctuation">.</span><span class="token function">embark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡ Spring AOP å°±å¯ä»¥å¾ˆç®€å•åœ°å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop
  http://www.springframework.org/schema/aop/spring-aop.xsd
  http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>knight<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sia.knights.BraveKnight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>quest<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>quest<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sia.knights.SlayDragonQuest<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#{T(System).out}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minstrel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sia.knights.Minstrel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#{T(System).out}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minstrel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>embark<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(* *.embarkOnQuest(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>embark<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>singBeforeQuest<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>embark<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>singAfterQuest<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>ä½¿ç”¨äº† Spring çš„ aop é…ç½®å‘½åç©ºé—´æŠŠ Minstrel bean å£°æ˜ä¸ºä¸€ä¸ªåˆ‡é¢ï¼›</li> <li>å£°æ˜ embarkOnQuest() æ–¹æ³•ä¸ºä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œè¡¨è¾¾å¼çš„è¯­æ³•é‡‡ç”¨çš„æ˜¯ AspectJ çš„åˆ‡ç‚¹è¡¨è¾¾å¼è¯­è¨€ï¼›</li> <li>å£°æ˜åœ¨ embarkOnQuest() æ–¹æ³•æ‰§è¡Œå‰åè°ƒç”¨ Minstrel çš„ singBeforeQuest() æ–¹æ³•å’Œ singAfterQuest() æ–¹æ³•ï¼›</li></ul> <p>é€šè¿‡ AOPï¼ŒMinstrel å¯ä»¥è¢«åº”ç”¨åˆ° BraveKnight ä¸­ï¼Œè€Œ BraveKnight ä¸éœ€è¦æ˜¾å¼åœ°è°ƒç”¨å®ƒï¼ŒBraveKnight æ ¹æœ¬ä¸éœ€è¦çŸ¥é“ Minstrel çš„å­˜åœ¨ï¼›</p> <h3 id="ä½¿ç”¨æ¨¡æ¿æ¶ˆé™¤æ ·æ¿ä»£ç "><a href="#ä½¿ç”¨æ¨¡æ¿æ¶ˆé™¤æ ·æ¿ä»£ç " class="header-anchor">#</a> ä½¿ç”¨æ¨¡æ¿æ¶ˆé™¤æ ·æ¿ä»£ç </h3> <p>åœ¨å¼€å‘ä¸­ï¼Œä¸ºäº†å®ç°é€šç”¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€ééåœ°å†™ â€œå¥—è·¯å¼çš„æ ·æ¿ä»£ç â€ï¼Œè¿™äº›ä»£ç ç»“æ„ç›¸åŒï¼Œç”šè‡³æ¯è¡Œä»£ç éƒ½ä¸€æ¨¡ä¸€æ ·ã€‚ä¸€ä¸ªå¸¸è§èŒƒä¾‹æ˜¯ä½¿ç”¨ JDBC è®¿é—®æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼›</p> <p>ä¸¾ä¾‹ ğŸŒ°ï¼š</p> <p>ä¸‹é¢æ˜¯ä¸€æ®µç”¨ JDBC æŸ¥è¯¢æ•°æ®åº“å»è·å¾—å‘˜å·¥å§“åå’Œè–ªæ°´çš„ä»£ç ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getEmployeeById</span><span class="token punctuation">(</span><span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token class-name">PreparedStatement</span> stmt <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token class-name">Result</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºæ•°æ®åº“è¿æ¥</span>
    conn <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ›å»ºè¯­å¥å¯¹è±¡ï¼Œç¼–å†™ SQL è¯­å¥</span>
    stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatment</span><span class="token punctuation">(</span>
      <span class="token string">&quot;select id, firstname, lastname, salary from &quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;employee where id=?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¡«å…¥å‚æ•°</span>
    stmt<span class="token punctuation">.</span><span class="token function">setLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰§è¡Œè¯­å¥</span>
    rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// å¤„ç†ç»“æœ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      employee<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      employee<span class="token punctuation">.</span><span class="token function">setFirstName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;firstname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      employee<span class="token punctuation">.</span><span class="token function">setLastName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;lastname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      employee<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getBigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> employee<span class="token punctuation">;</span>
    <span class="token comment">// æ•æ‰å¼‚å¸¸</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…³é—­è¿æ¥</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>stmt <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        stmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å°‘é‡æŸ¥è¯¢å‘˜å·¥çš„ä»£ç æ·¹æ²¡åœ¨ä¸€å † JDBC çš„æ ·æ¿å¼ä»£ç ä¸­ã€‚
ä¸Šé¢ä»£ç ä¸­ï¼Œéœ€è¦ç»è¿‡å¦‚ä¸‹æµç¨‹ï¼š</p> <ul><li>åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼›</li> <li>åˆ›å»ºè¯­å¥å¯¹è±¡ï¼›</li> <li>ç¼–å†™ SQL è¯­å¥ï¼›</li> <li>å¡«å…¥ SQL è¯­å¥çš„å‚æ•°ï¼›</li> <li>æ‰§è¡Œ SQL è¯­å¥ï¼›</li> <li>å¤„ç†ç»“æœï¼›</li> <li>å…³é—­è¿æ¥ï¼›</li> <li>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦æ•è·å¼‚å¸¸ï¼›</li></ul> <p>ä¸Šé¢è¿™å †æµç¨‹ï¼Œåªæœ‰ç¼–å†™ SQL è¯­å¥å’Œå¡«å…¥å‚æ•°ï¼Œæ˜¯ä¸ä¸šåŠ¡é€»è¾‘æœ‰ç›´æ¥å…³ç³»çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ‰§è¡Œ JDBC æ“ä½œæ—¶çš„æ ·æ¿ä»£ç ï¼ˆå¥—è·¯ä»£ç ï¼‰ï¼Œå’Œä½ å®ç°å…¶ä»– JDBC æ“ä½œæ—¶æ‰€å†™çš„ä»£ç å‡ ä¹æ˜¯ç›¸åŒã€‚</p> <p>é™¤äº† JDBCï¼Œä½¿ç”¨ REST æœåŠ¡é€šå¸¸ä¹Ÿæ¶‰åŠå¤§é‡çš„é‡å¤ä»£ç ï¼›</p> <p>Spring æ—¨åœ¨é€šè¿‡æ¨¡æ¿å°è£…æ¥æ¶ˆé™¤æ ·æ¿å¼ä»£ç ã€‚Spring çš„ JdbcTemplate ä½¿å¾—æ‰§è¡Œæ•°æ®åº“æ“ä½œæ—¶ï¼Œé¿å…ä¼ ç»Ÿçš„ JDBC æ ·æ¿ä»£ç æˆä¸ºäº†å¯èƒ½ã€‚</p> <p>ğŸŒ° ä¾‹å­ï¼š</p> <p>ä¸‹é¢æ˜¯ä½¿ç”¨ JdbcTemplate æ¥æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getEmployeeById</span><span class="token punctuation">(</span><span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>
    <span class="token string">&quot;select id, firstname, lastname, salary &quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;from employee where id=?&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        employee<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        employee<span class="token punctuation">.</span><span class="token function">setFirstName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;firstname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        employee<span class="token punctuation">.</span><span class="token function">setLastName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;lastname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        employee<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getBigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> employee<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ JdbcTemplate æ‰§è¡ŒæŸ¥è¯¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›ï¼š</p> <ul><li>SQL è¯­å¥ï¼›</li> <li>ç»“æœä¸å®ä½“ç±»çš„æ˜ å°„å…³ç³»ï¼›</li> <li>å‚æ•°ï¼›</li></ul> <h3 id="spring-å®¹å™¨"><a href="#spring-å®¹å™¨" class="header-anchor">#</a> Spring å®¹å™¨</h3> <p>ä¸Šé¢å±•ç¤ºäº†åœ¨åŸºäº XML çš„é…ç½®æ–‡ä»¶ä¸­å¦‚ä½•é…ç½® bean å’Œåˆ‡é¢ï¼Œä½†è¿™äº›æ–‡ä»¶æ˜¯å¦‚ä½•åŠ è½½çš„å‘¢ï¼Ÿå®ƒä»¬è¢«åŠ è½½åˆ°å“ªé‡Œå»äº†ï¼Ÿ</p> <p>åœ¨åŸºäº Spring çš„åº”ç”¨ä¸­ï¼Œä½ çš„åº”ç”¨å¯¹è±¡ç”Ÿå­˜äº Spring å®¹å™¨ï¼ˆcontainerï¼‰ä¸­ã€‚å®¹å™¨æ˜¯ Spring æ¡†æ¶çš„æ ¸å¿ƒã€‚Spring å®¹å™¨ä½¿ç”¨ DI ç®¡ç†æ„æˆåº”ç”¨çš„ç»„ä»¶ã€‚</p> <p>Spring å®¹å™¨è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œè£…é…å®ƒä»¬ï¼Œé…ç½®å®ƒä»¬å¹¶ç®¡ç†å®ƒä»¬çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œä»ç”Ÿå­˜åˆ°æ­»äº¡ã€‚</p> <p>Spring å®¹å™¨å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªã€‚Spring è‡ªå¸¦äº†å¤šä¸ªå®¹å™¨å®ç°ï¼Œå¯ä»¥å½’ä¸ºä¸¤ç§ä¸åŒçš„ç±»å‹ï¼š</p> <ul><li>bean å·¥å‚ï¼ˆç”± org.springframework.beans.factory.BeanFactory æ¥å£å®šä¹‰ï¼‰æ˜¯æœ€ç®€å•çš„å®¹å™¨ï¼Œæä¾›åŸºæœ¬çš„ DI æ”¯æŒã€‚</li> <li>åº”ç”¨ä¸Šä¸‹æ–‡ï¼ˆç”± org.springframework.context.ApplicationContext æ¥å£å®šä¹‰ï¼‰åŸºäº BeanFactory æ„å»ºï¼Œå¹¶æä¾›åº”ç”¨æ¡†æ¶çº§åˆ«çš„æœåŠ¡ï¼Œ</li></ul> <p>æˆ‘ä»¬å¯ä»¥åœ¨ bean å·¥å‚å’Œåº”ç”¨ä¸Šä¸‹æ–‡ä¹‹é—´ä»»é€‰ä¸€ç§ï¼Œä½† bean å·¥å‚å¯¹å¤§å¤šæ•°åº”ç”¨æ¥è¯´å¾€å¾€å¤ªä½çº§äº†ï¼Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬å¤šæ•°é€‰ç”¨åº”ç”¨ä¸Šä¸‹æ–‡ï¼›</p> <hr> <p>Spring è‡ªå¸¦äº†å¤šç§ç±»å‹çš„åº”ç”¨ä¸Šä¸‹æ–‡ã€‚ä¸‹é¢ç½—åˆ—çš„å‡ ä¸ªæ˜¯ä½ æœ€æœ‰å¯èƒ½é‡åˆ°çš„ï¼š</p> <ul><li>AnnotationConfigApplicationContextï¼šä»ä¸€ä¸ªæˆ–å¤šä¸ªåŸºäº Java çš„é…ç½®ç±»ä¸­åŠ è½½ Spring åº”ç”¨ä¸Šä¸‹æ–‡ã€‚</li> <li>AnnotationConfigWebApplicationContextï¼šä»ä¸€ä¸ªæˆ–å¤šä¸ªåŸºäº Java çš„é…ç½®ç±»ä¸­åŠ è½½ Spring Web åº”ç”¨ä¸Šä¸‹æ–‡ã€‚</li> <li>ClassPathXmlApplicationContextï¼šä»ç±»è·¯å¾„ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ª XML é…ç½®æ–‡ä»¶ä¸­åŠ è½½ä¸Šä¸‹æ–‡å®šä¹‰ï¼ŒæŠŠåº”ç”¨ä¸Šä¸‹æ–‡çš„å®šä¹‰æ–‡ä»¶ä½œä¸ºç±»èµ„æºã€‚</li> <li>FileSystemXmlapplicationcontextï¼šä»æ–‡ä»¶ç³»ç»Ÿä¸‹çš„ä¸€ ä¸ªæˆ–å¤šä¸ª XML é…ç½®æ–‡ä»¶ä¸­åŠ è½½ä¸Šä¸‹æ–‡å®šä¹‰ã€‚</li> <li>XmlWebApplicationContextï¼šä» Web åº”ç”¨ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ª XML é…ç½®æ–‡ä»¶ä¸­åŠ è½½ä¸Šä¸‹æ–‡å®šä¹‰ã€‚</li></ul> <p>ğŸŒ° ç¤ºä¾‹ï¼š</p> <p>ä¸‹é¢å±•ç¤ºäº†ä½¿ç”¨ ClassPathXmlApplicationContext ä»åº”ç”¨çš„ç±»è·¯å¾„ä¸‹åŠ è½½é…ç½®æ–‡ä»¶ï¼Œç„¶ååˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">.</span>java
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;knight.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åº”ç”¨ä¸Šä¸‹æ–‡å‡†å¤‡å°±ç»ªä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ä¸Šä¸‹æ–‡çš„ getBean() æ–¹æ³•ä» Spring å®¹å™¨ä¸­è·å– beanã€‚</p> <h3 id="bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#bean-çš„ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> Bean çš„ç”Ÿå‘½å‘¨æœŸ</h3> <p>åœ¨ä¼ ç»Ÿçš„ Java åº”ç”¨ä¸­ï¼Œå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå¾ˆç®€å•ã€‚ä½¿ç”¨ Java å…³é”®å­— new è¿›è¡Œç±»çš„å®ä¾‹åŒ–ï¼Œç„¶åè¯¥å®ä¾‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ä¸€æ—¦è¯¥å®ä¾‹ä¸å†è¢«ä½¿ç”¨ï¼Œåˆ™ç”± Java è‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p> <p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSpring å®¹å™¨ä¸­çš„ bean çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¾å¾—ç›¸å¯¹å¤æ‚å¤šäº†ã€‚ä¸‹å›¾å±•ç¤ºäº† bean è£…è½½åˆ° Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªå…¸å‹çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ï¼š</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-25-15-45-21.png" alt="2020-3-25-15-45-21.png"></p> <p>åœ¨ bean å‡†å¤‡å°±ç»ªä¹‹å‰ï¼Œbean å·¥å‚æ‰§è¡Œäº†è‹¥å¹²å¯åŠ¨æ­¥éª¤ï¼š</p> <ol><li>Spring å¯¹ bean è¿›è¡Œå®ä¾‹åŒ–ï¼›</li> <li>Spring å°†å€¼å’Œ bean çš„å¼•ç”¨æ³¨å…¥åˆ° bean å¯¹åº”çš„å±æ€§ä¸­ï¼›</li> <li>å¦‚æœ bean å®ç°äº† BeanNameAware æ¥å£ï¼ŒSpring å°† bean çš„ ID ä¼ é€’ç»™ setBeanName()æ–¹æ³•ï¼›</li> <li>å¦‚æœ bean å®ç°äº† BeanFactoryAware æ¥å£ï¼ŒSpring å°†è°ƒç”¨ setBeanFactory() æ–¹æ³•ï¼Œå°† BeanFactory å®¹å™¨å®ä¾‹ä¼ å…¥ï¼›</li> <li>å¦‚æœ bean å®ç°äº† ApplicationContextAware æ¥å£ï¼ŒSpring å°†è°ƒç”¨ setApplicationContext() æ–¹æ³•ï¼Œå°† bean æ‰€åœ¨çš„åº”ç”¨ä¸Šä¸‹æ–‡çš„å¼•ç”¨ä¼ å…¥è¿›æ¥ï¼›</li> <li>å¦‚æœ bean å®ç°äº† BeanPostProcessor æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒä»¬çš„ postProcessBefore-Initialization() æ–¹æ³•ï¼›</li> <li>å¦‚æœ bean å®ç°äº† InitializingBean æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒä»¬çš„ afterPropertiesSet() æ–¹æ³•ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœ bean ä½¿ç”¨ initmethod å£°æ˜äº†åˆå§‹åŒ–æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</li> <li>å¦‚æœ bean å®ç°äº† BeanPostProcessor æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒä»¬çš„ postProcessAfter-Initialization() æ–¹æ³•ï¼›</li> <li>æ­¤æ—¶ï¼Œbean å·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥è¢«åº”ç”¨ç¨‹åºä½¿ç”¨äº†ï¼Œå®ƒä»¬å°†ä¸€ç›´é©»ç•™åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼Œç›´åˆ°è¯¥åº”ç”¨ä¸Šä¸‹æ–‡è¢«é”€æ¯ï¼›</li> <li>å¦‚æœ bean å®ç°äº† DisposableBean æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒçš„ destroy() æ¥å£æ–¹æ³•ã€‚</li></ol> <h3 id="spring-æ¨¡å—"><a href="#spring-æ¨¡å—" class="header-anchor">#</a> Spring æ¨¡å—</h3> <p>åœ¨ Spring 4.0 ä¸­ï¼ŒSpring æ¡†æ¶çš„å‘å¸ƒç‰ˆæœ¬åŒ…æ‹¬äº† 20 ä¸ªä¸åŒçš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—ä¾æ®å…¶æ‰€å±çš„åŠŸèƒ½å¯ä»¥åˆ’åˆ†ä¸º 6 ç±»ä¸åŒçš„åŠŸèƒ½ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-25-16-21-35.png" alt="2020-3-25-16-21-35.png"></p> <p>è¿™äº›æ¨¡å—ä¸ºå¼€å‘ä¼ä¸šçº§åº”ç”¨æä¾›äº†æ‰€éœ€çš„ä¸€åˆ‡ã€‚ä½†æ˜¯ä½ ä¹Ÿä¸å¿…å°†åº”ç”¨å»ºç«‹åœ¨æ•´ä¸ª Spring æ¡†æ¶ä¹‹ä¸Šï¼Œä½ å¯ä»¥è‡ªç”±åœ°é€‰æ‹©é€‚åˆè‡ªèº«åº”ç”¨éœ€æ±‚çš„ Spring æ¨¡å—ï¼›å½“ Spring ä¸èƒ½æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå®Œå…¨å¯ä»¥è€ƒè™‘å…¶ä»–é€‰æ‹©ã€‚</p> <p>è®©æˆ‘ä»¬é€ä¸€æµè§ˆ Spring çš„æ¨¡å—ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•æ„å»ºèµ· Spring æ•´ä½“è“å›¾çš„ï¼š</p> <p><strong>Spring æ ¸å¿ƒå®¹å™¨</strong>ï¼š</p> <p>å®¹å™¨æ˜¯ Spring æ¡†æ¶æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå®ƒç®¡ç†ç€ Spring åº”ç”¨ä¸­ bean çš„åˆ›å»ºã€é…ç½®å’Œç®¡ç†ã€‚æ‰€æœ‰çš„ Spring æ¨¡å—éƒ½æ„å»ºäºæ ¸å¿ƒå®¹å™¨ä¹‹ä¸Šã€‚</p> <p>è¯¥æ¨¡å—ä¹Ÿæä¾›äº†è®¸å¤šä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ Emailã€JNDI è®¿é—®ã€EJB é›†æˆå’Œè°ƒåº¦ã€‚</p> <p><strong>Spring çš„ AOP æ¨¡å—</strong>ï¼š</p> <p>åœ¨ AOP æ¨¡å—ä¸­ï¼ŒSpring å¯¹é¢å‘åˆ‡é¢ç¼–ç¨‹æä¾›äº†ä¸°å¯Œçš„æ”¯æŒã€‚è¿™ä¸ªæ¨¡å—æ˜¯ Spring åº”ç”¨ç³»ç»Ÿä¸­å¼€å‘åˆ‡é¢çš„åŸºç¡€ã€‚</p> <p><strong>æ•°æ®è®¿é—®ä¸é›†æˆ</strong>ï¼š</p> <p>ä½¿ç”¨ JDBC ç¼–å†™ä»£ç é€šå¸¸ä¼šå¯¼è‡´å¤§é‡çš„æ ·æ¿å¼ä»£ç ã€‚Spring çš„ JDBC å’Œ DAOï¼ˆData Access Objectï¼‰æ¨¡å—æŠ½è±¡äº†è¿™äº›æ ·æ¿å¼ä»£ç ï¼Œä½¿æˆ‘ä»¬çš„æ•°æ®åº“ä»£ç å˜å¾—ç®€å•æ˜äº†ï¼Œè¿˜å¯ä»¥é¿å…å› ä¸ºå…³é—­æ•°æ®åº“èµ„æºå¤±è´¥è€Œå¼•å‘çš„é—®é¢˜ã€‚</p> <p>è¯¥æ¨¡å—åœ¨å¤šç§æ•°æ®åº“æœåŠ¡çš„é”™è¯¯ä¿¡æ¯ä¹‹ä¸Šæ„å»ºäº†ä¸€ä¸ªè¯­ä¹‰ä¸°å¯Œçš„é€šç”¨çš„å¼‚å¸¸å±‚ã€‚</p> <p>Spring çš„ ORM æ¨¡å—å»ºç«‹åœ¨å¯¹ DAO çš„æ”¯æŒä¹‹ä¸Šï¼Œå¹¶ä¸ºå¤šä¸ª ORM æ¡†æ¶æä¾›äº†ä¸€ç§æ„å»º DAO çš„ç®€ä¾¿æ–¹å¼ã€‚</p> <p>Spring çš„äº‹åŠ¡ç®¡ç†æ”¯æŒæ‰€æœ‰çš„ ORM æ¡†æ¶ä»¥åŠ JDBCã€‚</p> <p>æœ¬æ¨¡å—åŒæ ·åŒ…å«äº†åœ¨ JMSï¼ˆJava Message Serviceï¼‰ä¹‹ä¸Šæ„å»ºçš„ Spring æŠ½è±¡å±‚ï¼Œå®ƒä¼šä½¿ç”¨æ¶ˆæ¯ä»¥å¼‚æ­¥çš„æ–¹å¼ä¸å…¶ä»–åº”ç”¨é›†æˆã€‚</p> <p><strong>Web ä¸è¿œç¨‹è°ƒç”¨</strong>ï¼š</p> <p>MVCï¼ˆModel-View-Controllerï¼‰æ¨¡å¼æ˜¯ä¸€ç§æ™®éè¢«æ¥å—çš„æ„å»º Web åº”ç”¨çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·å°†ç•Œé¢é€»è¾‘ä¸åº”ç”¨é€»è¾‘åˆ†ç¦»ã€‚</p> <p>Spring çš„ Web å’Œè¿œç¨‹è°ƒç”¨æ¨¡å—è‡ªå¸¦äº†ä¸€ä¸ªå¼ºå¤§çš„ MVC æ¡†æ¶ï¼Œæœ‰åŠ©äºåœ¨ Web å±‚æå‡åº”ç”¨çš„æ¾è€¦åˆæ°´å¹³ã€‚</p> <p>é™¤äº†é¢å‘ç”¨æˆ·çš„ Web åº”ç”¨ï¼Œè¯¥æ¨¡å—è¿˜æä¾›äº†å¤šç§æ„å»ºä¸å…¶ä»–åº”ç”¨äº¤äº’çš„è¿œç¨‹è°ƒç”¨æ–¹æ¡ˆã€‚Spring è¿œç¨‹è°ƒç”¨åŠŸèƒ½é›†æˆäº† RMIï¼ˆRemote Method Invocationï¼‰ã€Hessianã€Burlapã€JAX-WSï¼ŒåŒæ—¶ Spring è¿˜è‡ªå¸¦äº†ä¸€ä¸ª è¿œç¨‹è°ƒç”¨æ¡†æ¶ï¼šHTTP invokerã€‚Spring è¿˜æä¾›äº†æš´éœ²å’Œä½¿ç”¨ REST API çš„è‰¯å¥½æ”¯æŒã€‚</p> <p><strong>Instrumentation</strong>ï¼š</p> <p>Spring çš„ Instrumentation æ¨¡å—æä¾›äº†ä¸º JVM æ·»åŠ ä»£ç†ï¼ˆagentï¼‰çš„åŠŸèƒ½ã€‚ åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šä»‹ç»è¯¥æ¨¡å—ã€‚</p> <p><strong>æµ‹è¯•</strong>ï¼š</p> <p>Spring æä¾›äº†æµ‹è¯•æ¨¡å—ä»¥è‡´åŠ›äº Spring åº”ç”¨çš„æµ‹è¯•ã€‚</p> <h3 id="spring-ç”Ÿæ€"><a href="#spring-ç”Ÿæ€" class="header-anchor">#</a> Spring ç”Ÿæ€</h3> <p>Spring æ¡†æ¶å…³æ³¨äºé€šè¿‡ DIã€AOP å’Œæ¶ˆé™¤æ ·æ¿å¼ä»£ç æ¥ç®€åŒ–ä¼ä¸šçº§ Java å¼€å‘ã€‚åœ¨ Spring æ¡†æ¶ä¹‹å¤–è¿˜å­˜åœ¨ä¸€ä¸ªæ„å»ºåœ¨æ ¸å¿ƒæ¡†æ¶ä¹‹ä¸Šçš„åºå¤§ç”Ÿæ€åœˆã€‚å®ƒå°† Spring æ‰©å±•åˆ°ä¸åŒçš„é¢†åŸŸï¼Œä¾‹å¦‚ Web æœåŠ¡ã€RESTã€ç§»åŠ¨å¼€å‘ä»¥åŠ NoSQLã€‚</p> <h2 id="è£…é…-bean"><a href="#è£…é…-bean" class="header-anchor">#</a> è£…é… Bean</h2> <p>ä»»ä½•ä¸€ä¸ªæˆåŠŸçš„åº”ç”¨éƒ½æ˜¯ç”±å¤šä¸ªä¸ºäº†å®ç°æŸä¸€ä¸ªä¸šåŠ¡ç›®æ ‡è€Œç›¸äº’åä½œçš„ç»„ä»¶æ„æˆçš„ã€‚è¿™äº›ç»„ä»¶å¿…é¡»å½¼æ­¤äº†è§£ï¼Œå¹¶ä¸”ç›¸äº’åä½œæ¥å®Œæˆå·¥ä½œã€‚</p> <p>åˆ›å»ºåº”ç”¨å¯¹è±¡ä¹‹é—´å…³è”å…³ç³»çš„ä¼ ç»Ÿæ–¹æ³•ï¼ˆé€šè¿‡æ„é€ å™¨æˆ–è€…æŸ¥æ‰¾ï¼‰é€šå¸¸ä¼šå¯¼è‡´ç»“æ„å¤æ‚çš„ä»£ç ï¼Œè¿™äº›å¯¹è±¡æ‰€åšçš„äº‹æƒ…è¶…å‡ºäº†å®ƒåº”è¯¥åšçš„èŒƒå›´ï¼Œå¯¼è‡´ä»£ç å¾ˆéš¾è¢«å¤ç”¨ä¹Ÿå¾ˆéš¾è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</p> <p>åœ¨ Spring ä¸­ï¼Œå¯¹è±¡æ— éœ€è‡ªå·±æŸ¥æ‰¾æˆ–åˆ›å»ºä¸å…¶æ‰€å…³è”çš„å…¶ä»–å¯¹è±¡ã€‚ç›¸åï¼Œå®¹å™¨è´Ÿè´£æŠŠéœ€è¦ç›¸äº’åä½œçš„å¯¹è±¡å¼•ç”¨èµ‹äºˆå„ä¸ªå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè®¢å•ç®¡ç†ç»„ä»¶éœ€è¦ä¿¡ç”¨å¡è®¤è¯ç»„ä»¶ï¼Œä½†å®ƒä¸éœ€è¦è‡ªå·±åˆ›å»ºä¿¡ç”¨å¡è®¤è¯ç»„ä»¶ã€‚è®¢å•ç®¡ç†ç»„ä»¶åªéœ€è¦å®ƒéœ€è¦ä½¿ç”¨ä¿¡ç”¨å¡è®¤è¯ç»„ä»¶ï¼Œå®¹å™¨å°±ä¼šä¸»åŠ¨èµ‹äºˆå®ƒä¸€ä¸ªä¿¡ç”¨å¡è®¤è¯ç»„ä»¶ã€‚</p> <p>åˆ›å»ºåº”ç”¨å¯¹è±¡ä¹‹é—´åä½œï¼ˆä¾èµ–ï¼‰å…³ç³»çš„è¡Œä¸ºé€šå¸¸ç§°ä¸ºè£…é…ï¼ˆwiringï¼‰ï¼Œè¿™ä¹Ÿæ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰çš„æœ¬è´¨ã€‚</p> <p>ä¸‹é¢ ğŸ‘‡ ä»‹ç»ä½¿ç”¨ Spring è£…é… bean çš„åŸºç¡€çŸ¥è¯†ã€‚</p> <hr> <p>ä½œä¸ºå¼€å‘äººå‘˜ï¼Œä½ éœ€è¦å‘Šè¯‰ Spring è¦åˆ›å»ºå“ªäº› bean å¹¶ä¸”å¦‚ä½•å°†å…¶è£…é…åœ¨ä¸€èµ·ã€‚åœ¨ Spring ä¸­è£…é… bean æœ‰å¤šç§æ–¹å¼ã€‚è¿™é‡Œä»‹ç»ä¸€ä¸‹é…ç½® Spring å®¹å™¨æœ€å¸¸è§çš„ä¸‰ç§æ–¹æ³•ï¼š</p> <ul><li>åœ¨ XML ä¸­è¿›è¡Œæ˜¾å¼é…ç½®ã€‚</li> <li>åœ¨ Java ä¸­è¿›è¡Œæ˜¾å¼é…ç½®ã€‚</li> <li>é€šè¿‡æ³¨è§£ï¼Œè¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li></ul> <p>åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œé€‰æ‹©å“ªç§æ–¹æ¡ˆå¾ˆå¤§ç¨‹åº¦ä¸Šå°±æ˜¯ä¸ªäººå–œå¥½çš„é—®é¢˜ï¼Œä½ å°½å¯ä»¥é€‰æ‹©è‡ªå·±æœ€å–œæ¬¢çš„æ–¹å¼ã€‚Spring çš„é…ç½®é£æ ¼æ˜¯å¯ä»¥äº’ç›¸æ­é…çš„ï¼Œå¤§å¤šæ—¶å€™åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œé€šå¸¸å¤šç§é…ç½®æ–¹å¼ç©¿æ’ä½¿ç”¨ï¼›</p> <p>å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘çš„å»ºè®®æ˜¯å°½å¯èƒ½åœ°ä½¿ç”¨æ³¨è§£é…ç½®çš„æœºåˆ¶ã€‚æ˜¾å¼é…ç½®è¶Šå°‘è¶Šå¥½ã€‚</p> <h3 id="xml-é…ç½®"><a href="#xml-é…ç½®" class="header-anchor">#</a> XML é…ç½®</h3> <p>ä¸‹é¢æ˜¯ä¸€ä¸ª XML é…ç½®ç¤ºä¾‹ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!--</span> <span class="token attr-name">configuration</span> <span class="token attr-name">details</span> <span class="token attr-name">go</span> <span class="token attr-name">here</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨é…ç½®æ–‡ä»¶çš„é¡¶éƒ¨å£°æ˜å¤šä¸ª XML æ¨¡å¼ï¼ˆXSDï¼‰æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å®šä¹‰äº†é…ç½® Spring çš„ XML å…ƒç´ ã€‚</p> <p>ç”¨æ¥è£…é… bean çš„æœ€åŸºæœ¬çš„ XML å…ƒç´ åŒ…å«åœ¨ spring-beans æ¨¡å¼ä¹‹ä¸­ï¼Œåœ¨ä¸Šé¢è¿™ä¸ª XML æ–‡ä»¶ä¸­ï¼Œå®ƒè¢«å®šä¹‰ä¸ºæ ¹å‘½åç©ºé—´ã€‚æ˜¯è¯¥æ¨¡å¼ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒæ˜¯æ‰€æœ‰ Spring é…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ ã€‚</p> <p>è¦åœ¨åŸºäº XML çš„ Spring é…ç½®ä¸­å£°æ˜ä¸€ä¸ª beanï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ springbeans æ¨¡å¼ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼š<code>&lt;bean&gt;</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.SgtPeppers<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªå¾ˆç®€å•çš„ beanï¼Œåˆ›å»ºè¿™ä¸ª bean çš„ç±»é€šè¿‡ class å±æ€§æ¥æŒ‡å®šçš„ï¼Œå¹¶ä¸”è¦ä½¿ç”¨å…¨é™å®šçš„ç±»åã€‚</li> <li>é€šè¿‡ id å±æ€§ç»™ bean è®¾ç½®ä¸€ä¸ªä½ è‡ªå·±é€‰æ‹©çš„åå­—ã€‚</li></ul> <p>åœ¨å‘å…¶ä»–çš„ Bean ä¸­æ³¨æ„è¿™ä¸ª Bean çš„æ—¶å€™ï¼Œä¼šæœ‰å¤šç§å¯é€‰çš„é…ç½®æ–¹æ¡ˆå’Œé£æ ¼ã€‚</p> <h4 id="æ„é€ å™¨æ³¨å…¥"><a href="#æ„é€ å™¨æ³¨å…¥" class="header-anchor">#</a> æ„é€ å™¨æ³¨å…¥</h4> <p>å‡è®¾æœ‰ä¸€ä¸ª CDPlayer bean ï¼Œå®ƒæœ‰ä¸€ä¸ªæ¥å— CompactDisc ç±»å‹çš„æ„é€ å™¨ã€‚</p> <p>ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ <code>&lt;constructor-arg&gt;</code> å…ƒç´ è¿›è¡Œæ„é€ å™¨æ³¨å…¥ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cdPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.CDPlayer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å½“ Spring é‡åˆ°è¿™ä¸ª <code>&lt;bean&gt;</code> å…ƒç´ æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ª CDPlayer å®ä¾‹ã€‚<code>&lt;constructor-arg&gt;</code> å…ƒç´ ä¼šå‘ŠçŸ¥ Spring è¦å°†ä¸€ä¸ª ID ä¸º compactDisc çš„ bean å¼•ç”¨ä¼ é€’åˆ° CDPlayer çš„æ„é€ å™¨ä¸­ã€‚</p> <p>ä½œä¸ºæ›¿ä»£çš„æ–¹æ¡ˆï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Spring çš„ <code>c-</code> å‘½åç©ºé—´ã€‚<code>c-</code> å‘½åç©ºé—´æ˜¯åœ¨ Spring 3.0 ä¸­å¼•å…¥çš„ï¼Œå®ƒæ˜¯åœ¨ XML ä¸­æ›´ä¸ºç®€æ´åœ°æè¿°æ„é€ å™¨å‚æ•°çš„æ–¹å¼ã€‚è¦ä½¿ç”¨å®ƒçš„è¯ï¼Œå¿…é¡»è¦åœ¨ XML çš„é¡¶éƒ¨å£°æ˜å…¶æ¨¡å¼ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">&quot;http://www.springframework.org/schema/beans&quot;</span>
  xmlns<span class="token operator">:</span>c<span class="token operator">=</span><span class="token string">&quot;http://www.springframework.org/schema/c&quot;</span>
  xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
  xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>&quot;http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
  http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd&quot; <span class="token operator">&gt;</span>

  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre></div><p>åœ¨ <code>c-</code> å‘½åç©ºé—´å’Œæ¨¡å¼å£°æ˜ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒæ¥å£°æ˜æ„é€ å™¨å‚æ•°äº†ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;cdPlayer&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;soundsystem.CDPlayer&quot;</span> c<span class="token operator">:</span>cd<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">&quot;compactDisc&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-25-17-5-42.png" alt="2020-3-25-17-5-42.png"></p> <p>å±æ€§åä»¥ <code>c:</code> å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯å‘½åç©ºé—´çš„å‰ç¼€ã€‚æ¥ä¸‹æ¥å°±æ˜¯è¦è£…é…çš„æ„é€ å™¨å‚æ•°åï¼Œåœ¨æ­¤ä¹‹åæ˜¯ <code>-ref</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå‘½åçš„çº¦å®šï¼Œå®ƒä¼šå‘Šè¯‰ Springï¼Œæ­£åœ¨è£…é…çš„æ˜¯ä¸€ä¸ª bean çš„å¼•ç”¨ï¼Œè¿™ä¸ª bean çš„åå­—æ˜¯ <code>compactDisc</code>ã€‚</p> <p>ä¹Ÿå¯ä»¥å‚æ•°çš„åç§°æ›¿æ¢æˆå‚æ•°çš„ç´¢å¼•ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cdPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.CDPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">c:</span>_0-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>ä¸Šé¢å±•ç¤ºäº†å¦‚ä½•å°†å¯¹è±¡çš„å¼•ç”¨è£…é…åˆ°ä¾èµ–äºå®ƒä»¬çš„å…¶ä»–å¯¹è±¡ä¹‹ä¸­ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åšçš„åªæ˜¯ç”¨ä¸€ä¸ªå­—é¢é‡å€¼æ¥é…ç½®å¯¹è±¡ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¿™ä¸€æ¬¡æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ <code>ref</code> å±æ€§æ¥å¼•ç”¨å…¶ä»–çš„ beanï¼Œè€Œæ˜¯ä½¿ç”¨äº† <code>value</code> å±æ€§ï¼Œé€šè¿‡è¯¥å±æ€§è¡¨æ˜ç»™å®šçš„å€¼è¦ä»¥å­—é¢é‡çš„å½¢å¼æ³¨å…¥åˆ°æ„é€ å™¨ä¹‹ä¸­ã€‚</p> <p>å¦‚æœè¦ä½¿ç”¨ c- å‘½åç©ºé—´çš„è¯ï¼Œé‚£é…ç½®ä»£ç å¦‚ä¸‹ï¼›</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">c:</span>_title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">c:</span>_artist</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>è£…é…å­—é¢é‡ä¸è£…é…å¼•ç”¨çš„åŒºåˆ«åœ¨äºå±æ€§åä¸­å»æ‰äº† <code>-ref</code> åç¼€ã€‚</p> <p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»™æ„é€ å™¨ä¼ å…¥çš„å‚æ•°çš„æ˜¯ <code>null</code>ã€‚é€šè¿‡ä»¥ä¸‹é…ç½®æ¥å®ç°ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>null</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="å‘æ„é€ å™¨æ³¨å…¥é›†åˆ"><a href="#å‘æ„é€ å™¨æ³¨å…¥é›†åˆ" class="header-anchor">#</a> å‘æ„é€ å™¨æ³¨å…¥é›†åˆ</h4> <p>å‡å¦‚æˆ‘ä»¬çš„å‚æ•°æ˜¯é›†åˆç±»å‹çš„ï¼Œå¯ä»¥é‡‡å–å¦‚ä¸‹çš„æ–¹å¼é…ç½®ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">c:</span>_0</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">c:</span>_1</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Sgt. Pepper's Lonely Hearts Club Band<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>With a Little Help from My Friends<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Lucy in the Sky with Diamonds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Getting Better<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Fixing a Hole<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- ...other tracks omitted for brevity... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>&lt;list&gt;</code> å…ƒç´ æ˜¯ <code>&lt;constructor-arg&gt;</code> çš„å­å…ƒç´ ï¼Œè¿™è¡¨æ˜ä¸€ä¸ªåŒ…å«å€¼çš„ java.util.List åˆ—è¡¨å°†ä¼šä¼ é€’åˆ°æ„é€ å™¨ä¸­ã€‚å…¶ä¸­ï¼Œ<code>&lt;value&gt;</code> å…ƒç´ ç”¨æ¥æŒ‡å®šåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>&lt;ref&gt;</code> å…ƒç´ æ›¿ä»£ <code>&lt;value&gt;</code>ï¼Œå®ç° bean å¼•ç”¨åˆ—è¡¨çš„è£…é…ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>beatlesDiscography<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.Discography<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sgtPeppers<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>whiteAlbum<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hardDaysNight<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>revolver<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å‡å¦‚é›†åˆçš„ç±»å‹æ˜¯ java.util.Setï¼Œæ‰€æœ‰é‡å¤çš„å€¼éƒ½ä¼šè¢«å¿½ç•¥æ‰ï¼Œå­˜æ”¾é¡ºåºä¹Ÿä¸ä¼šå¾—ä»¥ä¿è¯ã€‚é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Sgt. Pepper's Lonely Hearts Club Band<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>With a Little Help from My Friends<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Lucy in the Sky with Diamonds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Getting Better<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Fixing a Hole<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- ...other tracks omitted for brevity... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨è£…é…é›†åˆæ–¹é¢ï¼Œ<code>&lt;constructor-arg&gt;</code> æ¯” <code>c-</code> å‘½åç©ºé—´çš„å±æ€§æ›´æœ‰ä¼˜åŠ¿ã€‚ç›®å‰ï¼Œä½¿ç”¨ <code>c-</code> å‘½åç©ºé—´çš„å±æ€§æ— æ³•å®ç°è£…é…é›†åˆçš„åŠŸèƒ½ã€‚</p> <h4 id="é€šè¿‡å±æ€§çš„-setter-æ–¹æ³•æ³¨å…¥"><a href="#é€šè¿‡å±æ€§çš„-setter-æ–¹æ³•æ³¨å…¥" class="header-anchor">#</a> é€šè¿‡å±æ€§çš„ Setter æ–¹æ³•æ³¨å…¥</h4> <p>ä¸‹é¢å±•ç¤ºä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Spring XML å®ç°å±æ€§æ³¨å…¥ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cdPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.CDPlayer<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å®ƒå¼•ç”¨äº† ID ä¸º <code>compactDisc</code> çš„ beanï¼ˆé€šè¿‡ <code>ref</code> å±æ€§ï¼‰ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ° <code>compactDisc</code> å±æ€§ä¸­ï¼ˆé€šè¿‡<code>setCompactDisc()</code> æ–¹æ³•ï¼‰</p> <p>Spring æä¾›äº†æ›´åŠ ç®€æ´çš„ <code>p-</code> å‘½åç©ºé—´ï¼Œä½œä¸º <code>&lt;property&gt;</code> å…ƒç´ çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä¸ºäº†å¯ç”¨ <code>p-</code> å‘½åç©ºé—´ï¼Œå¿…é¡»è¦åœ¨ XML æ–‡ä»¶ä¸­ä¸å…¶ä»–çš„å‘½åç©ºé—´ä¸€èµ·å¯¹å…¶è¿›è¡Œå£°æ˜ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½¿ç”¨ <code>p-</code> å‘½åç©ºé—´ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼è£…é… <code>compactDisc</code> å±æ€§ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cdPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.CDPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>compactDisc-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>æ³¨å…¥å­—é¢é‡å’Œé›†åˆçš„æ–¹æ³•ï¼Œéƒ½å’Œé€šè¿‡æ„é€ å™¨æ³¨å…¥æ–¹æ³•å·®ä¸å¤šï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>artist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tracks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Sgt. Pepper's Lonely Hearts Club Band<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>With a Little Help from My Friends<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Lucy in the Sky with Diamonds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Getting Better<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Fixing a Hole<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- ...other tracks omitted for brevity... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¦å¤–ä¸€ç§å¯é€‰æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨ <code>p-</code> å‘½åç©ºé—´çš„å±æ€§æ¥å®Œæˆè¯¥åŠŸèƒ½ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">p:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">p:</span>artist</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tracks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Sgt. Pepper's Lonely Hearts Club Band<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>With a Little Help from My Friends<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Lucy in the Sky with Diamonds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Getting Better<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Fixing a Hole<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- ...other tracks omitted for brevity... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ— è®ºæ˜¯ <code>c-</code> è¿˜æ˜¯ <code>p-</code> å‘½åç©ºé—´ï¼Œæˆ‘ä»¬éƒ½ä¸èƒ½åœ¨åé¢ç›´æ¥å®šä¹‰ä¸€ä¸ªé›†åˆã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ Spring <code>util-</code> å‘½åç©ºé—´ä¸­çš„ä¸€äº›åŠŸèƒ½æ¥åˆ›å»ºä¸€ä¸ªé›†åˆ Beanï¼Œç„¶åé€šè¿‡ <code>-ref</code> åç¼€æ¥ç”¨ <code>c-</code> å’Œ <code>p-</code> æ³¨å…¥é›†åˆï¼›</p> <p>ä¾‹å¦‚ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">util:</span>list</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trackList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Sgt. Pepper's Lonely Hearts Club Band<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>With a Little Help from My Friends<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Lucy in the Sky with Diamonds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Getting Better<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Fixing a Hole<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ...other tracks omitted for brevity... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">util:</span>list</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>compactDisc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.BlankDisc<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">p:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sgt. Pepper's Lonely Hearts Club Band<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">p:</span>artist</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>The Beatles<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">p:</span>tracks-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trackList<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><code>&lt;util:list&gt;</code> åªæ˜¯ <code>util-</code> å‘½åç©ºé—´ä¸­çš„å¤šä¸ªå…ƒç´ ä¹‹ä¸€ï¼š</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-25-17-38-7.png" alt="2020-3-25-17-38-7.png"></p> <h3 id="æ³¨è§£é…ç½®"><a href="#æ³¨è§£é…ç½®" class="header-anchor">#</a> æ³¨è§£é…ç½®</h3> <h4 id="component-æ³¨è§£-è‡ªåŠ¨æ‰«æ"><a href="#component-æ³¨è§£-è‡ªåŠ¨æ‰«æ" class="header-anchor">#</a> @Component æ³¨è§£ &amp; è‡ªåŠ¨æ‰«æ</h4> <p>é€šè¿‡æ³¨è§£æˆ‘ä»¬å¯ä»¥çœå»å†™ä¸€å †æ˜¾ç¤ºçš„é…ç½®ï¼ŒSpring å¯ä»¥è‡ªåŠ¨å»å‘ç° Beanï¼›</p> <p>é€šè¿‡åœ¨ç±»çš„ä¸Šé¢åŠ ä¸Š <code>@Component</code> æ³¨è§£ï¼ŒSpring å°±ä¼šæŠŠè¿™ä¸ªç±»å½“åšä¸€ä¸ª Bean å¤„ç†ï¼›</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> soundsystem<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SgtPeppers</span> <span class="token keyword">implements</span> <span class="token class-name">CompactDisc</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;Sgt. Pepper's Lonely Hearts Club Band&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> artist <span class="token operator">=</span> <span class="token string">&quot;The Beatles&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Playing &quot;</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">&quot; by &quot;</span> <span class="token operator">+</span> artist<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½†æ˜¯ç»„ä»¶æ‰«æé»˜è®¤æ˜¯ä¸å¯ç”¨çš„ã€‚æˆ‘ä»¬è¿˜éœ€è¦æ˜¾å¼é…ç½®ä¸€ä¸‹ Springï¼Œ ä»è€Œå‘½ä»¤å®ƒå»å¯»æ‰¾å¸¦æœ‰ @Component æ³¨è§£çš„ç±»ï¼Œå¹¶ä¸ºå…¶åˆ›å»º beanã€‚</p> <p>åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Spring context å‘½åç©ºé—´çš„å…ƒç´ ã€‚æ¥è¿›è¡Œé…ç½®ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>c</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/c<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸Šé¢çš„é…ç½®è¡¨æ˜ï¼ŒSpring ä¼šæ‰«æ soundsystem åŒ…ä¸‹é¢çš„æ‰€æœ‰ç±»ï¼›</p> <hr> <p>Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¸­æ‰€æœ‰çš„ bean éƒ½ä¼šç»™å®šä¸€ä¸ª IDã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå°½ç®¡æˆ‘ä»¬æ²¡æœ‰æ˜ç¡®åœ°ä¸º SgtPeppersbean è®¾ç½® IDï¼Œä½† Spring ä¼šæ ¹æ®ç±»åä¸ºå…¶æŒ‡å®šä¸€ä¸ª IDã€‚</p> <p>å…·ä½“æ¥è®²ï¼Œè¿™ä¸ª bean æ‰€ç»™å®šçš„ ID ä¸º sgtPeppersï¼Œä¹Ÿå°±æ˜¯å°†ç±»åçš„ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå°å†™ã€‚</p> <p>å¦‚æœæƒ³ä¸ºè¿™ä¸ª bean è®¾ç½®ä¸åŒçš„ IDï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯å°†æœŸæœ›çš„ ID ä½œä¸ºå€¼ä¼ é€’ç»™ @Component æ³¨è§£ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Componet</span><span class="token punctuation">(</span><span class="token string">&quot;lonelyHeartsClub&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SgtPeppers</span> <span class="token keyword">implements</span> <span class="token class-name">CompactDisc</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="autowired-è‡ªåŠ¨è£…é…"><a href="#autowired-è‡ªåŠ¨è£…é…" class="header-anchor">#</a> @Autowired è‡ªåŠ¨è£…é…</h4> <p>è‡ªåŠ¨è£…é…å°±æ˜¯è®© Spring è‡ªåŠ¨æ»¡è¶³ bean ä¾èµ–çš„ä¸€ç§æ–¹æ³•ï¼Œåœ¨æ»¡è¶³ä¾èµ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨ Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¸­å¯»æ‰¾åŒ¹é…æŸä¸ª bean éœ€æ±‚çš„å…¶ä»– beanã€‚</p> <p>ä¸ºäº†å£°æ˜è¦è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Spring çš„ @Autowired æ³¨è§£ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> soundsystem<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayer</span> <span class="token keyword">implements</span> <span class="token class-name">MediaPlayer</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">CompactDisc</span> cd<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">public</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span><span class="token class-name">CompactDisc</span> cd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cd <span class="token operator">=</span> cd<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cd<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>å®ƒçš„æ„é€ å™¨ä¸Šæ·»åŠ äº† @Autowired æ³¨è§£ï¼Œè¿™è¡¨æ˜å½“ Spring åˆ›å»º CDPlayerbean çš„æ—¶å€™ï¼Œä¼šé€šè¿‡è¿™ä¸ªæ„é€ å™¨æ¥è¿›è¡Œå®ä¾‹åŒ–å¹¶ä¸”ä¼šä¼ å…¥ä¸€ä¸ªå¯è®¾ç½®ç»™ CompactDisc ç±»å‹çš„ beanï¼Œå°†ä¸€ä¸ª CompactDisc æ³¨å…¥åˆ° CDPlayer ä¹‹ä¸­ã€‚</p> <p>@Autowired æ³¨è§£ä¸ä»…èƒ½å¤Ÿç”¨åœ¨æ„é€ å™¨ä¸Šï¼Œè¿˜èƒ½ç”¨åœ¨å±æ€§çš„ Setter æ–¹æ³•ä¸Šã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompactDisc</span><span class="token punctuation">(</span><span class="token class-name">CompactDisc</span> cd<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cd <span class="token operator">=</span> cd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Setter æ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ã€‚@Autowired æ³¨è§£å¯ä»¥ç”¨åœ¨ç±»çš„ä»»ä½•æ–¹æ³•ä¸Šã€‚å‡è®¾ CDPlayer ç±»æœ‰ä¸€ä¸ª insertDisc() æ–¹æ³•ï¼Œ é‚£ä¹ˆ @Autowired èƒ½å¤Ÿåƒåœ¨ setCompactDisc() ä¸Šé‚£æ ·ï¼Œå‘æŒ¥å®Œå…¨ç›¸åŒçš„ä½œç”¨ï¼š</p> <p>å‡å¦‚æœ‰ä¸”åªæœ‰ä¸€ä¸ª bean åŒ¹é…ä¾èµ–éœ€æ±‚çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ª bean å°†ä¼šè¢«è£…é…è¿›æ¥ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…çš„ beanï¼Œé‚£ä¹ˆåœ¨åº”ç”¨ä¸Šä¸‹æ–‡åˆ›å»ºçš„æ—¶å€™ï¼ŒSpring ä¼šæŠ›å‡º ä¸€ä¸ªå¼‚å¸¸ã€‚ä¸ºäº†é¿å…å¼‚å¸¸çš„å‡ºç°ï¼Œä½ å¯ä»¥å°† @Autowired çš„ required å±æ€§è®¾ç½®ä¸º falseï¼š</p> <p>å°† required å±æ€§è®¾ç½®ä¸º false æ—¶ï¼ŒSpring ä¼šå°è¯•æ‰§è¡Œè‡ªåŠ¨è£…é…ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰åŒ¹é…çš„ bean çš„è¯ï¼ŒSpring å°†ä¼šè®©è¿™ä¸ª bean å¤„äºæœªè£…é…çš„çŠ¶æ€ã€‚æœªè£…é…çš„å‚æ•°çš„å€¼ä¸º nullã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span><span class="token class-name">CompactDisc</span> cd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cd <span class="token operator">=</span> cd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœæœ‰å¤šä¸ª bean éƒ½èƒ½æ»¡è¶³ä¾èµ–å…³ç³»çš„è¯ï¼ŒSpring å°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¡¨æ˜æ²¡æœ‰æ˜ç¡®æŒ‡å®šè¦é€‰æ‹©å“ªä¸ª bean è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</p> <h3 id="java-ç±»é…ç½®"><a href="#java-ç±»é…ç½®" class="header-anchor">#</a> Java ç±»é…ç½®</h3> <p>å°½ç®¡åœ¨å¾ˆå¤šåœºæ™¯ä¸‹é€šè¿‡ç»„ä»¶æ‰«æå’Œè‡ªåŠ¨è£…é…å®ç° Spring çš„è‡ªåŠ¨åŒ–é…ç½®ï¼Œä½†æœ‰æ—¶å€™è‡ªåŠ¨åŒ–é…ç½®çš„æ–¹æ¡ˆè¡Œä¸é€šï¼Œå› æ­¤éœ€è¦æ˜ç¡®é…ç½® Springã€‚</p> <p>æ¯”å¦‚è¯´ï¼Œä½ æƒ³è¦å°†ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç»„ä»¶è£…é…åˆ°ä½ çš„åº”ç”¨ä¸­ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯æ²¡æœ‰åŠæ³•åœ¨å®ƒçš„ç±»ä¸Šæ·»åŠ  @Component å’Œ @Autowired æ³¨è§£çš„ï¼Œå› æ­¤å°±ä¸èƒ½ä½¿ç”¨è‡ªåŠ¨åŒ–è£…é…çš„æ–¹æ¡ˆäº†ã€‚</p> <p>åœ¨è¿›è¡Œæ˜¾å¼é…ç½®çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§å¯é€‰æ–¹æ¡ˆï¼šJava å’Œ XMLã€‚åœ¨è¿™èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ Java é…ç½®ã€‚</p> <p>åœ¨è¿›è¡Œæ˜¾å¼é…ç½®æ—¶ï¼ŒJavaConfig æ˜¯æ›´å¥½çš„æ–¹æ¡ˆï¼Œ å› ä¸ºå®ƒæ›´ä¸ºå¼ºå¤§ã€ç±»å‹å®‰å…¨å¹¶ä¸”å¯¹é‡æ„å‹å¥½ã€‚ä¸ºå®ƒå°±æ˜¯ Java ä»£ç ï¼Œ å°±åƒåº”ç”¨ç¨‹åºä¸­çš„å…¶ä»– Java ä»£ç ä¸€æ ·ã€‚</p> <p>ä½†ä¸å…¶ä»–çš„ Java ç±»ä¸åŒçš„æ˜¯ï¼ŒJavaConfig æ˜¯é…ç½®ä»£ç ã€‚è¿™æ„å‘³ç€å®ƒä¸åº”è¯¥åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼ŒJavaConfig ä¹Ÿä¸åº”è¯¥ä¾µå…¥åˆ°ä¸šåŠ¡é€»è¾‘ä»£ç ä¹‹ä¸­ã€‚</p> <p>å°½ç®¡ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†é€šå¸¸ä¼šå°† JavaConfig æ”¾åˆ°å•ç‹¬çš„åŒ…ä¸­ï¼Œä½¿å®ƒä¸å…¶ä»–çš„åº”ç”¨ç¨‹åºé€»è¾‘åˆ†ç¦»å¼€æ¥ã€‚</p> <h4 id="configuration-æ³¨è§£-bean-æ³¨è§£"><a href="#configuration-æ³¨è§£-bean-æ³¨è§£" class="header-anchor">#</a> @Configuration æ³¨è§£ &amp; @Bean æ³¨è§£</h4> <p>é€šè¿‡ <code>@Configuration</code> æ³¨è§£è¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚</p> <p>è¦åœ¨ JavaConfig ä¸­å£°æ˜ beanï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºæ‰€éœ€ç±»å‹çš„å®ä¾‹ï¼Œç„¶åç»™è¿™ä¸ªæ–¹æ³•æ·»åŠ  <code>@Bean</code> æ³¨è§£ã€‚</p> <p>@Bean æ³¨è§£ä¼šå‘Šè¯‰ Spring è¿™ä¸ªæ–¹æ³•å°†ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¦æ³¨å†Œä¸º Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ beanã€‚æ–¹æ³•ä½“ä¸­åŒ…å«äº†æœ€ç»ˆäº§ç”Ÿ bean å®ä¾‹çš„é€»è¾‘ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>spingframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayerConfig</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">CompactDisc</span> <span class="token function">sgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œbean çš„ ID ä¸å¸¦æœ‰ @Bean æ³¨è§£çš„æ–¹æ³•åæ˜¯ä¸€æ ·çš„ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œbean çš„åå­—å°†ä¼šæ˜¯ sgtPeppersã€‚å¦‚æœä½ æƒ³ä¸ºå…¶è®¾ç½®æˆä¸€ä¸ªä¸åŒçš„åå­—çš„è¯ï¼Œå¯ä»¥é€šè¿‡ name å±æ€§æŒ‡å®šä¸€ä¸ªä¸åŒçš„åå­—ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;lonelyHeartsClubBand&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CompactDisc</span> <span class="token function">sgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™ä¸ªä½¿ç”¨äº† @Bean çš„æ³¨è§£ä¸­æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥è‡ªç”±åœ°ç¼–å†™åˆ›å»º Bean å®ä¾‹çš„é€»è¾‘ã€‚æ¯”æ–¹è¯´ï¼Œåœ¨ä¸€ç»„ CD ä¸­éšæœºé€‰æ‹©ä¸€ä¸ª CompactDisc æ¥æ’­æ”¾ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CompactDisc</span> <span class="token function">randomBeatlesCD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> choice <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WhiteAlbum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HardDaysNight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Revolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="åœ¨-javaconfig-ä¸­è£…é…-bean"><a href="#åœ¨-javaconfig-ä¸­è£…é…-bean" class="header-anchor">#</a> åœ¨ JavaConfig ä¸­è£…é… Bean</h4> <p>åœ¨ JavaConfig ä¸­è£…é… bean çš„æœ€ç®€å•æ–¹å¼å°±æ˜¯å¼•ç”¨åˆ›å»º bean çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å°±æ˜¯ä¸€ç§å£°æ˜ CDPlayer çš„å¯è¡Œæ–¹æ¡ˆï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CDPlayer</span> <span class="token function">cdPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span><span class="token function">sgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œçœ‹ä¼¼æ˜¯è°ƒç”¨äº† <code>sgtPeppers()</code> æ–¹æ³•ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ¯æ¬¡ <code>sgtPeppers()</code> éƒ½å®é™…è¢«è°ƒç”¨äº†ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹è¿”å›ã€‚å› ä¸º <code>sgtPeppers()</code> æ–¹æ³•ä¸Šæ·»åŠ äº† <code>@Bean</code> æ³¨è§£ï¼Œ Spring å°†ä¼šæ‹¦æˆªæ‰€æœ‰å¯¹å®ƒçš„è°ƒç”¨ï¼Œå¹¶è¿”å›å·²ç»åˆ›å»ºå¥½çš„ Bean å®ä¾‹ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CDPlayer</span> <span class="token function">cdPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span><span class="token function">sgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CDPlayer</span> <span class="token function">anotherCDPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span><span class="token function">sgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢ä¸¤æ¬¡è°ƒç”¨ <code>sgtPeppers()</code> è¿”å›çš„å®ä¾‹æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring ä¸­çš„ bean éƒ½æ˜¯å•ä¾‹çš„ã€‚</p> <p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è°ƒç”¨æ–¹æ³•æ¥å¼•ç”¨ bean çš„æ–¹å¼æœ‰ç‚¹ä»¤äººå›°æƒ‘ã€‚å…¶å®è¿˜æœ‰ä¸€ç§ç†è§£èµ·æ¥æ›´ä¸ºç®€å•çš„æ–¹å¼ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CDPlayer</span> <span class="token function">cdPlayer</span><span class="token punctuation">(</span><span class="token class-name">CompactDisc</span> compactDisc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span>compactDisc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™é‡Œï¼ŒcdPlayer() æ–¹æ³•è¯·æ±‚ä¸€ä¸ª CompactDisc ä½œä¸ºå‚æ•°ã€‚å½“ Spring è°ƒç”¨ cdPlayer() åˆ›å»º CDPlayerbean çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨è£…é…ä¸€ä¸ª CompactDisc åˆ°é…ç½®æ–¹æ³•ä¹‹ä¸­ã€‚</p> <p>æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ CDPlayer çš„æ„é€ å™¨å®ç°äº† DI åŠŸèƒ½ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ Setter æ–¹æ³•æ³¨å…¥ CompactDisc çš„è¯ï¼Œé‚£ä¹ˆä»£ç çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CDPlayer</span> <span class="token function">cdPlayer</span><span class="token punctuation">(</span><span class="token class-name">CompactDisc</span> compactDisc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">CDPlayer</span> cdPlayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CDPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  cdPlayer<span class="token punctuation">.</span><span class="token function">setCompactDisc</span><span class="token punctuation">(</span>compactDisc<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> cdPlayer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="componentscan-æ³¨è§£"><a href="#componentscan-æ³¨è§£" class="header-anchor">#</a> @ComponentScan æ³¨è§£</h4> <p>é€šè¿‡åœ¨é…ç½®ç±»ä¹‹ä¸Šä½¿ç”¨ @ComponentScan æ³¨è§£å¯ä»¥æŒ‡å®šè‡ªåŠ¨æ‰«æåŒ…ä¸‹é¢çš„ Beanã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages<span class="token operator">=</span><span class="token string">&quot;soundsystem&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayerConfig</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ @ComponentScan çš„ basePackages å±æ€§ä¸­å¯ä»¥æŒ‡æ˜æƒ³è¦æ‰«æåŒ…çš„åç§°ã€‚</p> <p>å¦‚æœæ²¡æœ‰ä¸º @ComponentScan è®¾ç½®ä»»ä½•å±æ€§ã€‚è¿™æ„å‘³ç€ï¼ŒæŒ‰ç…§é»˜è®¤è§„åˆ™ï¼Œå®ƒä¼šä»¥é…ç½®ç±»æ‰€åœ¨çš„åŒ…ä½œä¸ºåŸºç¡€åŒ…ã€‚</p> <p>å¦‚æœä½ æƒ³æ‰«æå¤šä¸ªåŒ…ï¼Œå¯ä»¥å°† basePackages å±æ€§è®¾ç½®ä¸ºä¸€ä¸ªæ•°ç»„ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;soundsystem&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;video&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayerConfig</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥çœç•¥ basePackagesï¼Œç®€å†™æˆï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;soundsystem&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// ---------------------</span>

<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;soundsystem&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;video&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æ··åˆä½¿ç”¨å¤šç§é…ç½®æ–¹å¼"><a href="#æ··åˆä½¿ç”¨å¤šç§é…ç½®æ–¹å¼" class="header-anchor">#</a> æ··åˆä½¿ç”¨å¤šç§é…ç½®æ–¹å¼</h3> <h4 id="åœ¨é…ç½®ç±»ä¸­å¼•å…¥å…¶ä»–é…ç½®"><a href="#åœ¨é…ç½®ç±»ä¸­å¼•å…¥å…¶ä»–é…ç½®" class="header-anchor">#</a> åœ¨é…ç½®ç±»ä¸­å¼•å…¥å…¶ä»–é…ç½®</h4> <p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªé…ç½®ç±»ï¼Œé€šè¿‡ @import æ³¨è§£å¯ä»¥å°†ä¸€ä¸ªé…ç½®ç±»å¯¼å…¥å¦ä¸€ä¸ªé…ç½®ç±»ä¸­ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">CDConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayerConfig</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">CompactDisc</span> <span class="token function">compactDisc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SgtPeppers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªæ›´é«˜çº§åˆ«çš„ SoundSystemConfigï¼Œåœ¨è¿™ä¸ªç±»ä¸­ä½¿ç”¨ @Import å°†ä¸¤ä¸ªé…ç½®ç±»ç»„åˆåœ¨ä¸€èµ·ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Import</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">CDPlayerConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">CDConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayerConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡ @ImportResource æ³¨è§£å¯ä»¥å¼•å…¥ XML é…ç½®æ–‡ä»¶ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Import</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">ImportResource</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">CDPlayerConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:cdconfig.xml&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SoundSystemConfig</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="åœ¨-xml-ä¸­å¼•å…¥å…¶ä»–é…ç½®"><a href="#åœ¨-xml-ä¸­å¼•å…¥å…¶ä»–é…ç½®" class="header-anchor">#</a> åœ¨ XML ä¸­å¼•å…¥å…¶ä»–é…ç½®</h4> <p>ä½¿ç”¨ <code>&lt;import&gt;</code> å…ƒç´ å¯ä»¥å¯¼å…¥å…¶ä»–çš„ XML é…ç½®æ–‡ä»¶ã€‚</p> <p>ä½¿ç”¨ <code>&lt;bean&gt;</code> å…ƒç´ å°†é…ç½®ç±»å¯¼å…¥åˆ° XML é…ç½®ä¸­ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>c</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/c<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>soundsystem.CDConfig<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cdplayer-config.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="é¢å‘åˆ‡é¢-aop"><a href="#é¢å‘åˆ‡é¢-aop" class="header-anchor">#</a> é¢å‘åˆ‡é¢ AOP</h2> <p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæ•£å¸ƒäºåº”ç”¨ä¸­å¤šå¤„çš„åŠŸèƒ½è¢«ç§°ä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcrosscutting concernï¼‰ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ä»æ¦‚å¿µä¸Šæ˜¯ä¸åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ç›¸åˆ†ç¦»çš„ï¼Œä½†æ˜¯ä¼ ç»Ÿå¼€å‘æ–¹å¼ä¸­ï¼Œè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹å¾€å¾€ç›´æ¥åµŒå…¥åˆ°åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä¹‹ä¸­ã€‚</p> <p>æŠŠè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡é€»è¾‘ç›¸åˆ†ç¦»æ­£æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰æ‰€è¦è§£å†³çš„é—®é¢˜ã€‚</p> <h3 id="aop-æœ¯è¯­"><a href="#aop-æœ¯è¯­" class="header-anchor">#</a> AOP æœ¯è¯­</h3> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-0-10-38.png" alt="2020-3-26-0-10-38.png"></p> <p><strong>é€šçŸ¥ï¼ˆAdviceï¼‰</strong></p> <p>åœ¨ AOP æœ¯è¯­ä¸­ï¼Œé€šçŸ¥å®šä¹‰äº†åˆ‡é¢åœ¨ä½•æ—¶ï¼Œæ‰§è¡Œä»€ä¹ˆæ“ä½œï¼›</p> <p>Spring åˆ‡é¢å¯ä»¥åº”ç”¨ 5 ç§ç±»å‹çš„é€šçŸ¥ï¼š</p> <ul><li>å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›</li> <li>åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›</li> <li>è¿”å›é€šçŸ¥ï¼ˆAfter-returningï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›</li> <li>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›</li> <li>ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚</li></ul> <p><strong>è¿æ¥ç‚¹ï¼ˆJoin Pointï¼‰</strong></p> <p>è¿æ¥ç‚¹æ˜¯åœ¨åº”ç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ’å…¥é€šçŸ¥çš„ä¸€ä¸ªç‚¹ã€‚è¿™ä¸ªç‚¹å¯ä»¥æ˜¯è°ƒç”¨æ–¹æ³•æ—¶ã€æŠ›å‡ºå¼‚å¸¸æ—¶ã€ç”šè‡³ä¿®æ”¹ä¸€ä¸ªå­—æ®µæ—¶ã€‚é€šçŸ¥å¯ä»¥åˆ©ç”¨è¿™äº›ç‚¹æ’å…¥åˆ°åº”ç”¨çš„æ­£å¸¸æµç¨‹ä¹‹ä¸­ï¼Œå¹¶æ·»åŠ æ–°çš„è¡Œä¸ºã€‚</p> <p><strong>åˆ‡ç‚¹ï¼ˆPoincutï¼‰</strong></p> <p>å¦‚æœè¯´é€šçŸ¥å®šä¹‰äº†åˆ‡é¢ä½•æ—¶åšä½•äº‹çš„è¯ï¼Œé‚£ä¹ˆåˆ‡ç‚¹å®šä¹‰äº†ä½•å¤„ï¼›</p> <p>åˆ‡ç‚¹çš„å®šä¹‰ä¼šåŒ¹é…é€šçŸ¥æ‰€è¦ç»‡å…¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥ç‚¹ã€‚</p> <p><strong>åˆ‡é¢ï¼ˆAspectï¼‰</strong></p> <p>åˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚é€šçŸ¥å’Œåˆ‡ç‚¹å…±åŒå®šä¹‰äº†åˆ‡é¢çš„å…¨éƒ¨å†…å®¹</p> <p><strong>å¼•å…¥ï¼ˆIntroductionï¼‰</strong></p> <p>å¼•å…¥å…è®¸æˆ‘ä»¬å‘ç°æœ‰çš„ç±»æ·»åŠ æ–°æ–¹æ³•æˆ–å±æ€§ã€‚å¯ä»¥åœ¨æ— éœ€ä¿®æ”¹è¿™äº›ç°æœ‰çš„ç±»çš„æƒ…å†µä¸‹ï¼Œè®©å®ƒä»¬å…·æœ‰æ–°çš„è¡Œä¸ºå’ŒçŠ¶æ€ã€‚</p> <p><strong>ç»‡å…¥ï¼ˆWeavingï¼‰</strong></p> <p>ç»‡å…¥æ˜¯æŠŠåˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚åˆ‡é¢åœ¨æŒ‡å®šçš„è¿æ¥ç‚¹è¢«ç»‡å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚</p> <h3 id="spring-ä¸­çš„-aop"><a href="#spring-ä¸­çš„-aop" class="header-anchor">#</a> Spring ä¸­çš„ AOP</h3> <p>Spring æä¾›äº† 4 ç§ç±»å‹çš„ AOP æ”¯æŒï¼š</p> <ul><li>åŸºäºä»£ç†çš„ç»å…¸ Spring AOPï¼›</li> <li>çº¯ POJO åˆ‡é¢ï¼›</li> <li>@AspectJ æ³¨è§£é©±åŠ¨çš„åˆ‡é¢ï¼›</li> <li>æ³¨å…¥å¼ AspectJ åˆ‡é¢ï¼ˆé€‚ç”¨äº Spring å„ç‰ˆæœ¬ï¼‰ã€‚</li></ul> <p>å‰ä¸‰ç§éƒ½æ˜¯ Spring AOP å®ç°çš„å˜ä½“ï¼ŒSpring AOP æ„å»ºåœ¨åŠ¨æ€ä»£ç†åŸºç¡€ä¹‹ä¸Šï¼Œå› æ­¤ï¼ŒSpring å¯¹ AOP çš„æ”¯æŒå±€é™äºæ–¹æ³•æ‹¦æˆªã€‚</p> <p>ç°åœ¨ Spring æä¾›äº†æ›´ç®€æ´å’Œå¹²å‡€çš„é¢å‘åˆ‡é¢ç¼–ç¨‹æ–¹å¼ã€‚å¼•å…¥äº†ç®€å•çš„å£°æ˜å¼ AOP å’ŒåŸºäºæ³¨è§£çš„ AOP ä¹‹åï¼ŒSpring ç»å…¸çš„ AOP çœ‹èµ·æ¥å°±æ˜¾å¾—éå¸¸ç¬¨é‡å’Œè¿‡äºå¤æ‚ï¼Œåé¢ä¸ä¼šå†ä»‹ç»ç»å…¸çš„ Spring AOPã€‚</p> <p>å€ŸåŠ© Spring çš„ aop å‘½åç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¯ POJO è½¬æ¢ä¸ºåˆ‡é¢ã€‚å®é™…ä¸Šï¼Œè¿™äº› POJO åªæ˜¯æä¾›äº†æ»¡è¶³åˆ‡ç‚¹æ¡ä»¶æ—¶æ‰€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚è™½ç„¶è¿™ç§æŠ€æœ¯éœ€è¦ XML é…ç½®ï¼Œä½†è¿™çš„ç¡®æ˜¯å£°æ˜å¼åœ°å°†å¯¹è±¡è½¬æ¢ä¸ºåˆ‡é¢çš„ç®€ä¾¿æ–¹å¼ã€‚</p> <p>Spring å€Ÿé‰´äº† AspectJ çš„åˆ‡é¢ï¼Œä»¥æä¾›æ³¨è§£é©±åŠ¨çš„ AOPã€‚æœ¬è´¨ä¸Šï¼Œå®ƒä¾ç„¶æ˜¯ Spring åŸºäºä»£ç†çš„ AOPï¼Œä½†æ˜¯ç¼–ç¨‹æ¨¡å‹å‡ ä¹ä¸ç¼–å†™æˆç†Ÿçš„ AspectJ æ³¨è§£åˆ‡é¢å®Œå…¨ä¸€è‡´ã€‚è¿™ç§ AOP é£æ ¼çš„å¥½å¤„åœ¨äºèƒ½å¤Ÿä¸ä½¿ç”¨ XML æ¥å®ŒæˆåŠŸèƒ½ã€‚</p> <p>ä¸ Spring AOP ç›¸æ¯”ï¼Œè™½ç„¶ AspectJ ç°åœ¨æ”¯æŒåŸºäºæ³¨è§£çš„åˆ‡é¢ï¼Œä½† AspectJ æœ€åˆæ˜¯ä»¥ Java è¯­è¨€æ‰©å±•çš„æ–¹å¼å®ç°çš„ã€‚è¿™ç§æ–¹å¼æœ‰ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹ã€‚é€šè¿‡ç‰¹æœ‰çš„ AOP è¯­è¨€ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¼ºå¤§å’Œç»†ç²’åº¦çš„æ§åˆ¶ï¼Œä»¥åŠæ›´ä¸°å¯Œçš„ AOP å·¥å…·é›†ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦é¢å¤–å­¦ä¹ æ–°çš„å·¥å…·å’Œè¯­æ³•ã€‚</p> <p>é€šè¿‡ä»£ç†ç±»ï¼ŒSpring åœ¨è¿è¡ŒæœŸæŠŠåˆ‡é¢ç»‡å…¥åˆ° Spring ç®¡ç†çš„ bean ä¸­ã€‚ä»£ç†ç±»å°è£…äº†ç›®æ ‡ç±»ï¼Œå¹¶æ‹¦æˆªè¢«é€šçŸ¥æ–¹æ³•çš„è°ƒç”¨ï¼Œå†æŠŠè°ƒç”¨è½¬å‘ç»™çœŸæ­£çš„ç›®æ ‡ beanã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-0-36-55.png" alt="2020-3-26-0-36-55.png"></p> <p>å„ç§ AOP æ–¹æ¡ˆå¯ä»¥æ”¯æŒçš„è¿æ¥ç‚¹æ¨¡å‹ç²’åº¦å„æœ‰åŒºåˆ«ï¼Œå› ä¸º Spring åŸºäºåŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥ Spring åªæ”¯æŒæ–¹æ³•è¿æ¥ç‚¹ã€‚</p> <p>AspectJ å’Œ JBossï¼Œé™¤äº†æ–¹æ³•åˆ‡ç‚¹ï¼Œå®ƒä»¬è¿˜æä¾›äº†å­—æ®µå’Œæ„é€ å™¨æ¥å…¥ç‚¹ã€‚Spring ç¼ºå°‘å¯¹å­—æ®µè¿æ¥ç‚¹çš„æ”¯æŒï¼Œæ— æ³•è®©æˆ‘ä»¬åˆ›å»ºç»†ç²’åº¦çš„é€šçŸ¥ï¼Œä¾‹å¦‚æ‹¦æˆªå¯¹è±¡å­—æ®µçš„ä¿®æ”¹ã€‚è€Œä¸”å®ƒä¸æ”¯æŒæ„é€ å™¨è¿æ¥ç‚¹ï¼Œæˆ‘ä»¬å°±æ— æ³•åœ¨ bean åˆ›å»ºæ—¶åº”ç”¨é€šçŸ¥ã€‚</p> <h3 id="ç¼–å†™åˆ‡ç‚¹"><a href="#ç¼–å†™åˆ‡ç‚¹" class="header-anchor">#</a> ç¼–å†™åˆ‡ç‚¹</h3> <p>åˆ‡ç‚¹ç”¨äºå‡†ç¡®å®šä½åº”è¯¥åœ¨ä»€ä¹ˆåœ°æ–¹åº”ç”¨åˆ‡é¢çš„é€šçŸ¥ã€‚é€šçŸ¥å’Œåˆ‡ç‚¹æ˜¯åˆ‡é¢çš„æœ€åŸºæœ¬å…ƒç´ ã€‚</p> <p>åœ¨ Spring AOP ä¸­ï¼Œè¦ä½¿ç”¨ AspectJ çš„åˆ‡ç‚¹è¡¨è¾¾å¼è¯­è¨€æ¥å®šä¹‰åˆ‡ç‚¹ã€‚ä½† Spring ä»…æ”¯æŒ AspectJ åˆ‡ç‚¹æŒ‡ç¤ºå™¨ï¼ˆpointcut designatorï¼‰çš„ä¸€ä¸ªå­é›†ã€‚</p> <p>ä¸‹å›¾æ˜¯ Spring AOP æ‰€æ”¯æŒçš„ AspectJ åˆ‡ç‚¹æŒ‡ç¤ºå™¨ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-0-42-26.png" alt="2020-3-26-0-42-26.png"></p> <p>å¦‚ä¸Šæ‰€å±•ç¤ºçš„è¿™äº› Spring æ”¯æŒçš„æŒ‡ç¤ºå™¨æ—¶ï¼Œæ³¨æ„åªæœ‰ execution æŒ‡ç¤ºå™¨æ˜¯å®é™…æ‰§è¡ŒåŒ¹é…çš„ï¼Œè€Œå…¶ä»–çš„æŒ‡ç¤ºå™¨éƒ½æ˜¯ç”¨æ¥é™åˆ¶åŒ¹é…çš„ã€‚</p> <p>è¿™è¯´æ˜ execution æŒ‡ç¤ºå™¨æ˜¯æˆ‘ä»¬åœ¨ç¼–å†™åˆ‡ç‚¹å®šä¹‰æ—¶æœ€ä¸»è¦ä½¿ç”¨çš„æŒ‡ç¤ºå™¨ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨å…¶ä»–æŒ‡ç¤ºå™¨æ¥é™åˆ¶æ‰€åŒ¹é…çš„åˆ‡ç‚¹ã€‚</p> <p>ğŸŒ° ä¸‹é¢ä¸¾ä¾‹å¦‚ä½•å»å®šä¹‰åˆ‡ç‚¹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Performance</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">perform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‡è®¾æˆ‘ä»¬æƒ³ç¼–å†™ Performance çš„ perform() æ–¹æ³•è§¦å‘çš„é€šçŸ¥ã€‚</p> <p>ä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿè®¾ç½®å½“ perform() æ–¹æ³•æ‰§è¡Œæ—¶è§¦å‘é€šçŸ¥çš„è°ƒç”¨ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-0-46-59.png" alt="2020-3-26-0-46-59.png"></p> <p>ä½¿ç”¨ execution() æŒ‡ç¤ºå™¨é€‰æ‹© Performance çš„ perform() æ–¹æ³•ã€‚æ–¹æ³•è¡¨è¾¾å¼ä»¥ &quot;*&quot; å·å¼€å§‹ï¼Œè¡¨æ˜äº†æˆ‘ä»¬ä¸å…³å¿ƒæ–¹æ³•è¿”å›å€¼çš„ç±»å‹ã€‚ç„¶åï¼Œæˆ‘ä»¬æŒ‡å®šäº†å…¨é™å®šç±»åå’Œæ–¹æ³•åã€‚å¯¹äºæ–¹æ³•å‚æ•°åˆ—è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªç‚¹å·ï¼ˆ..ï¼‰è¡¨æ˜åˆ‡ç‚¹è¦é€‰æ‹©ä»»æ„çš„ perform() æ–¹æ³•ï¼Œæ— è®ºè¯¥æ–¹æ³•çš„å…¥å‚æ˜¯ä»€ä¹ˆã€‚</p> <hr> <p>ç°åœ¨å‡è®¾æˆ‘ä»¬éœ€è¦é…ç½®çš„åˆ‡ç‚¹ä»…åŒ¹é… concert åŒ…ã€‚åœ¨æ­¤åœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ within() æŒ‡ç¤ºå™¨æ¥é™åˆ¶åŒ¹é…ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-0-48-36.png" alt="2020-3-26-0-48-36.png"></p> <hr> <p>Spring è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ bean() æŒ‡ç¤ºå™¨ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­ä½¿ç”¨ bean çš„ ID æ¥æ ‡è¯† beanã€‚bean() ä½¿ç”¨ bean ID æˆ– bean åç§°ä½œä¸ºå‚æ•°æ¥é™åˆ¶åˆ‡ç‚¹åªåŒ¹é…ç‰¹å®šçš„ beanã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> concert<span class="token punctuation">.</span><span class="token class-name">Performance</span><span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> and <span class="token function">bean</span><span class="token punctuation">(</span><span class="token string">'woodstock'</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ‰§è¡Œ Performance çš„ perform() æ–¹æ³•æ—¶åº”ç”¨é€šçŸ¥ï¼Œä½†é™å®š bean çš„ ID ä¸º woodstockã€‚</p> <h3 id="ä½¿ç”¨æ³¨è§£å£°æ˜åˆ‡é¢"><a href="#ä½¿ç”¨æ³¨è§£å£°æ˜åˆ‡é¢" class="header-anchor">#</a> ä½¿ç”¨æ³¨è§£å£°æ˜åˆ‡é¢</h3> <p>é€šè¿‡ @Aspect æ³¨è§£å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspect<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">AfterReturning</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspect<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">AfterThrowing</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspect<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Aspect</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspect<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Before</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Audience</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(** concert.Performance.perform(..))&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">silenceCellPhones</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Silencing cell phones&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(** concert.Performance.perform(..))&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">takeSeats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Taking seats&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;execution(** concert.Performance.perform(..))&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;CLAP CLAP CLAP!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;execution(** concert.Performance.perform(..))&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demandRefund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Demanding a refund&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Audience æœ‰å››ä¸ªæ–¹æ³•ï¼Œå®šä¹‰äº†ä¸€ä¸ªè§‚ä¼—åœ¨è§‚çœ‹æ¼”å‡ºæ—¶å¯èƒ½ä¼šåšçš„äº‹æƒ…ã€‚è¿™äº›æ–¹æ³•éƒ½ä½¿ç”¨äº†é€šçŸ¥æ³¨è§£æ¥è¡¨æ˜å®ƒä»¬åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-1-14-27.png" alt="2020-3-26-1-14-27.png"></p> <p>æ‰€æœ‰çš„è¿™äº›æ³¨è§£éƒ½ç»™å®šäº†ä¸€ä¸ªåˆ‡ç‚¹è¡¨è¾¾å¼ä½œä¸ºå®ƒçš„å€¼ï¼Œæ¥è¡¨ç¤ºè¿™äº›é€šçŸ¥ä¼šåº”ç”¨åˆ°ä»€ä¹ˆè¿æ¥ç‚¹ä¸Šã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œé€šçŸ¥å®ƒä¼šåœ¨ Performance çš„ perform() æ–¹æ³•æ‰§è¡Œæ—¶çš„å„ä¸ªæƒ…å†µä¸‹è§¦å‘ã€‚</p> <p>ç›¸åŒçš„åˆ‡ç‚¹è¡¨è¾¾å¼æˆ‘ä»¬é‡å¤äº†å››éï¼Œå¾ˆä¸å¥½ç»´æŠ¤ï¼Œä¹Ÿä¸ç®€æ´ã€‚å¦‚æœæˆ‘ä»¬åªå®šä¹‰è¿™ä¸ªåˆ‡ç‚¹ä¸€æ¬¡ï¼Œç„¶åæ¯æ¬¡éœ€è¦çš„æ—¶å€™å¼•ç”¨å®ƒï¼Œé‚£ä¹ˆè¿™ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ¡ˆã€‚</p> <p>@Pointcut æ³¨è§£èƒ½å¤Ÿå®šä¹‰å¯é‡ç”¨çš„åˆ‡ç‚¹ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Audience</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(** concert.Performance.perform(..))&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;performce()&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">silenceCellPhones</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Silencing cell phones&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;performce()&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">takeSeats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Taking seats&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;performce()&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;CLAP CLAP CLAP!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;performce()&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demandRefund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Demanding a refund&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>@Pointcut æ³¨è§£è®¾ç½®çš„å€¼æ˜¯ä¸€ä¸ªåˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œå°±åƒä¹‹å‰åœ¨é€šçŸ¥æ³¨è§£ä¸Šæ‰€è®¾ç½®çš„é‚£æ ·ã€‚é€šè¿‡åœ¨ performance() æ–¹æ³•ä¸Šæ·»åŠ  @Pointcut æ³¨è§£ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»»ä½•çš„åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­ä½¿ç”¨ performance() æ¥æ›¿ä»£ä¼ å…¥æ³¨è§£çš„åˆ‡ç‚¹è¡¨è¾¾å¼äº†ã€‚</p> <p>performance() æ–¹æ³•çš„å®é™…å†…å®¹å¹¶ä¸é‡è¦ï¼Œåœ¨è¿™é‡Œå®ƒå®é™…ä¸Šåº”è¯¥æ˜¯ç©ºçš„ã€‚å…¶å®è¯¥æ–¹æ³•æœ¬èº«åªæ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œä¾› @Pointcut æ³¨è§£ä¾é™„ã€‚</p> <h4 id="å¼€å¯ä»£ç†"><a href="#å¼€å¯ä»£ç†" class="header-anchor">#</a> å¼€å¯ä»£ç†</h4> <p>å®šä¹‰å¥½ä¸€ä¸ªåˆ‡é¢åï¼Œè¿˜éœ€è¦åœ¨ Spring é…ç½®ä¸­å¼€å¯å¯¹äºåˆ‡é¢ç±»çš„ä»£ç†ï¼›</p> <p>å¦‚æœä½ ä½¿ç”¨ JavaConfig çš„è¯ï¼Œå¯ä»¥åœ¨é…ç½®ç±»çš„ç±»çº§åˆ«ä¸Šé€šè¿‡ä½¿ç”¨ @EnableAspectJAutoProxy æ³¨è§£å¯ç”¨è‡ªåŠ¨ä»£ç†åŠŸèƒ½ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">EnableAspectJAutoProxy</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcertConfig</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">Audience</span> <span class="token function">audience</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Audience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‡å¦‚ä½ åœ¨ Spring ä¸­è¦ä½¿ç”¨ XML æ¥è£…é… bean çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ Spring aop å‘½åç©ºé—´ä¸­çš„ <code>&lt;aop:aspectj-autoproxy&gt;</code> å…ƒç´ ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>context<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token punctuation">/&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>concert.Audience<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>AspectJ è‡ªåŠ¨ä»£ç†éƒ½ä¼šä¸ºæ‰€æœ‰ä½¿ç”¨ @Aspect æ³¨è§£å£°æ˜çš„åˆ‡é¢å†…çš„åˆ‡ç‚¹æ‰€åŒ¹é…çš„ Bean åˆ›å»ºä¸€ä¸ªä»£ç†ã€‚</p> <h4 id="å¤„ç†é€šçŸ¥ä¸­çš„å‚æ•°"><a href="#å¤„ç†é€šçŸ¥ä¸­çš„å‚æ•°" class="header-anchor">#</a> å¤„ç†é€šçŸ¥ä¸­çš„å‚æ•°</h4> <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„åˆ‡é¢éƒ½å¾ˆç®€å•ï¼Œæ²¡æœ‰ä»»ä½•å‚æ•°ã€‚</p> <p>åœ¨åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­ä½¿ç”¨ args() é™å®šç¬¦å¯ä»¥æŠŠä¼ å…¥è¿æ¥ç‚¹æ–¹æ³•çš„å‚æ•°ï¼Œä¹Ÿä¼ é€’åˆ°é€šçŸ¥ä¸­å»ï¼›</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrackCounter</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> trackCounts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* soundsystem.CompactDisc.playTrack(int) &quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;&amp;&amp; args(trackNumber)&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">trackPlayed</span><span class="token punctuation">(</span><span class="token keyword">int</span> trackNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;trackPlayed(trackNumber)&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countTrack</span><span class="token punctuation">(</span><span class="token keyword">int</span> trackNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> currentCount <span class="token operator">=</span> <span class="token function">getPlayCount</span><span class="token punctuation">(</span>trackNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    trackCounts<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>trackNumber<span class="token punctuation">,</span> currentCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getPlayCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> trackNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> trackCounts<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>trackNumber<span class="token punctuation">)</span> <span class="token operator">?</span> trackCounts<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>trackNumber<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-1-34-23.png" alt="2020-3-26-1-34-23.png"></p> <p>å®ƒè¡¨æ˜ä¼ é€’ç»™ playTrack() æ–¹æ³•çš„ int ç±»å‹å‚æ•°ä¹Ÿä¼šä¼ é€’åˆ°é€šçŸ¥ä¸­å»ã€‚å‚æ•°çš„åç§° trackNumber ä¹Ÿä¸åˆ‡ç‚¹æ–¹æ³•ç­¾åä¸­çš„å‚æ•°ç›¸åŒ¹é…ã€‚</p> <h3 id="ä½¿ç”¨-xml-å£°æ˜åˆ‡é¢"><a href="#ä½¿ç”¨-xml-å£°æ˜åˆ‡é¢" class="header-anchor">#</a> ä½¿ç”¨ XML å£°æ˜åˆ‡é¢</h3> <p>åœ¨ XML ä¸­æŠŠ bean å£°æ˜ä¸ºä¸€ä¸ªåˆ‡é¢æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä» <code>&lt;aop:config&gt;</code> å…ƒç´ å¼€å§‹é…ç½®çš„ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>audience<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span>
      <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(** concert.Performance.perform(..))<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>silenceCellPhones<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span>
      <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(** concert.Performance.perform(..))<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>takeSeats<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span>
      <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(** concert.Performance.perform(..))<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>applause<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span>
      <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(** concert.Performance.perform(..))<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demandRefund<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½¿ç”¨ <code>&lt;aop:aspect&gt;</code> å…ƒç´ å£°æ˜äº†ä¸€ä¸ªç®€å•çš„åˆ‡é¢ã€‚<code>ref</code> å…ƒç´ å¼•ç”¨äº†ä¸€ä¸ª POJO beanï¼Œè¯¥ bean æä¾›äº†åœ¨åˆ‡é¢ä¸­é€šçŸ¥æ‰€è°ƒç”¨çš„æ–¹æ³•ã€‚</p> <p>åœ¨æ‰€æœ‰çš„é€šçŸ¥å…ƒç´ ä¸­ï¼Œ<code>pointcut</code> å±æ€§å®šä¹‰äº†é€šçŸ¥æ‰€åº”ç”¨çš„åˆ‡ç‚¹ï¼Œå®ƒçš„å€¼æ˜¯ä½¿ç”¨ AspectJ åˆ‡ç‚¹è¡¨è¾¾å¼è¯­æ³•æ‰€å®šä¹‰çš„åˆ‡ç‚¹ã€‚</p> <p>ä½¿ç”¨ <code>&lt;aop:pointcut&gt;</code> å°†é€šç”¨çš„åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–åˆ°ä¸€ä¸ªåˆ‡ç‚¹å£°æ˜ä¸­ï¼Œè¿™æ ·è¿™ä¸ªå£°æ˜å°±èƒ½åœ¨æ‰€æœ‰çš„é€šçŸ¥å…ƒç´ ä¸­ä½¿ç”¨äº†ã€‚åœ¨é€šçŸ¥å…ƒç´ ä¸­ï¼Œç”¨ <code>pointcut-ref</code> å±æ€§æ¥å¼•ç”¨è¿™ä¸ªå‘½ååˆ‡ç‚¹ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>audience<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span>
      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>performance<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">expressions</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(** concert.Performance.perform(..))<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span>
      <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>performance<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>silenceCellPhones<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span>
      <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>performance<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>takeSeats<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span>
      <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>performance<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>applause<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span>
      <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>performance<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demandRefund<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="ä¸ºé€šçŸ¥ä¼ é€’å‚æ•°"><a href="#ä¸ºé€šçŸ¥ä¼ é€’å‚æ•°" class="header-anchor">#</a> ä¸ºé€šçŸ¥ä¼ é€’å‚æ•°</h4> <p>å’Œåœ¨ä½¿ç”¨æ³¨è§£å£°æ˜åˆ‡é¢æ—¶ä¸€æ ·ï¼Œåœ¨åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­åŒ…å«ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä¼šä¼ é€’åˆ°é€šçŸ¥æ–¹æ³•ä¸­å»ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trackCounter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span>
      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trackPlayed<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>execution(* soundsystem.CompactDisc.playTrack(int)) and args(trackNumber)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trackPlayed<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>countTrack<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="spring-mvc"><a href="#spring-mvc" class="header-anchor">#</a> Spring MVC</h2> <p>åœ¨ Web å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†ã€å·¥ä½œæµä»¥åŠéªŒè¯éƒ½æ˜¯éœ€è¦è§£å†³çš„é‡è¦ç‰¹æ€§ã€‚HTTP åè®®çš„æ— çŠ¶æ€æ€§å†³å®šäº†è¿™äº›é—®é¢˜éƒ½ä¸é‚£ä¹ˆå®¹æ˜“è§£å†³ã€‚</p> <p>Spring çš„ Web æ¡†æ¶å°±æ˜¯ä¸ºäº†å¸®ä½ è§£å†³è¿™äº›å…³æ³¨ç‚¹è€Œè®¾è®¡çš„ã€‚Spring MVC åŸºäºæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼ˆModel-View-Controllerï¼ŒMVCï¼‰æ¨¡å¼å®ç°ï¼Œå®ƒèƒ½å¤Ÿå¸®ä½ æ„å»ºåƒ Spring æ¡†æ¶é‚£æ ·çµæ´»å’Œæ¾è€¦åˆçš„ Web åº”ç”¨ç¨‹åºã€‚</p> <h3 id="spring-mvc-å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹"><a href="#spring-mvc-å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹" class="header-anchor">#</a> Spring MVC å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹</h3> <p>ä¸‹å›¾å±•ç¤ºäº†æµè§ˆå™¨å‘é€çš„ HTTP è¯·æ±‚æ‰€ç»å†çš„è¿‡ç¨‹ï¼š</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-12-2-51.png" alt="2020-3-26-12-2-51.png"></p> <p>ç¬¬ä¸€ç«™æ˜¯ Spring çš„ DispatcherServletã€‚è¿™æ˜¯ä¸€ä¸ªå•å®ä¾‹çš„ Servlet å°†è¯·æ±‚å§”æ‰˜ç»™å…¶ä»–çš„ Spring MVC æ§åˆ¶å™¨æ¥æ‰§è¡Œå®é™…çš„å¤„ç†ã€‚</p> <p>Spring MVC æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ã€‚æ§åˆ¶å™¨æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†è¯·æ±‚çš„ Spring ç»„ä»¶ã€‚åœ¨å…¸å‹çš„åº”ç”¨ç¨‹åºä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ªæ§åˆ¶å™¨ï¼ŒDispatcherServlet éœ€è¦çŸ¥é“åº”è¯¥å°†è¯·æ±‚å‘é€ç»™å“ªä¸ªæ§åˆ¶å™¨ã€‚æ‰€ä»¥ DispatcherServlet ä»¥ä¼šæŸ¥è¯¢ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†å™¨æ˜ å°„ï¼ˆhandler mappingï¼‰ æ¥ç¡®å®šè¯·æ±‚çš„ä¸‹ä¸€ç«™åœ¨å“ªé‡Œã€‚å¤„ç†å™¨æ˜ å°„ä¼šæ ¹æ®è¯·æ±‚æ‰€æºå¸¦çš„ URL ä¿¡æ¯æ¥è¿›è¡Œå†³ç­–ã€‚</p> <p>æ‰¾åˆ°äº†ç›®æ ‡æ§åˆ¶å™¨ï¼ŒDispatcherServlet ä¼šå°†è¯·æ±‚å‘é€ç»™é€‰ä¸­çš„æ§åˆ¶å™¨ã€‚åˆ°äº†æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä¼šå¤„ç†è¯·æ±‚æºå¸¦çš„ä¿¡æ¯ã€‚æ§åˆ¶å™¨åœ¨å®Œæˆé€»è¾‘å¤„ç†åï¼Œé€šå¸¸ä¼šäº§ç”Ÿä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯éœ€è¦è¿”å›ç»™ç”¨æˆ·å¹¶åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºã€‚è¿™äº›ä¿¡æ¯è¢«ç§°ä¸ºæ¨¡å‹ï¼ˆmodelï¼‰ã€‚</p> <p>ä¸è¿‡ä»…ä»…ç»™ç”¨æˆ·è¿”å›åŸå§‹çš„ä¿¡æ¯æ˜¯ä¸å¤Ÿçš„ï¼Œè¿™äº›ä¿¡æ¯éœ€è¦ä»¥ç”¨æˆ·å‹å¥½çš„æ–¹å¼è¿›è¡Œæ ¼å¼åŒ–ï¼Œä¸€èˆ¬ä¼šæ˜¯ HTMLã€‚è¿™å«åšè§†å›¾ ï¼ˆviewï¼‰ã€‚</p> <p>æ§åˆ¶å™¨æ‰€åšçš„æœ€åä¸€ä»¶äº‹å°±æ˜¯å°†æ¨¡å‹æ•°æ®æ‰“åŒ…ï¼Œå¹¶ä¸”æ ‡ç¤ºå‡ºç”¨äºæ¸²æŸ“è¾“å‡ºçš„è§†å›¾åã€‚å®ƒæ¥ä¸‹æ¥ä¼šå°†è¯·æ±‚è¿åŒæ¨¡å‹å’Œè§†å›¾åå‘é€å› DispatcherServlet ã€‚</p> <p>ä¼ é€’ç»™ DispatcherServlet çš„è§†å›¾åå¹¶ä¸ç›´æ¥è¡¨ç¤ºæŸä¸ªç‰¹å®šçš„è§†å›¾æ–‡ä»¶ã€‚å®ƒä»…ä»…ä¼ é€’äº†ä¸€ä¸ªé€»è¾‘åç§°ï¼Œè¿™ä¸ªåå­—å°†ä¼šç”¨æ¥æŸ¥æ‰¾äº§ç”Ÿç»“æœçš„çœŸæ­£è§†å›¾ã€‚DispatcherServlet å°†ä¼šä½¿ç”¨è§†å›¾è§£æå™¨ï¼ˆview resolverï¼‰ æ¥å°†é€»è¾‘è§†å›¾ååŒ¹é…ä¸ºä¸€ä¸ªç‰¹å®šçš„è§†å›¾å®ç°ã€‚</p> <p>æœ€åï¼Œè§†å›¾å°†ä½¿ç”¨æ¨¡å‹æ•°æ®æ¸²æŸ“è¾“å‡ºï¼Œè¿™ä¸ªè¾“å‡ºä¼šé€šè¿‡å“åº”å¯¹è±¡ä¼ é€’ç»™å®¢æˆ·ç«¯ã€‚</p> <h3 id="æ­å»º-spring-mvc"><a href="#æ­å»º-spring-mvc" class="header-anchor">#</a> æ­å»º Spring MVC</h3> <h4 id="ä½¿ç”¨-servlet-å®¹å™¨é…ç½®"><a href="#ä½¿ç”¨-servlet-å®¹å™¨é…ç½®" class="header-anchor">#</a> ä½¿ç”¨ Servlet å®¹å™¨é…ç½®</h4> <p>æŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼ï¼Œåƒ DispatcherServlet è¿™æ ·çš„ Servlet ä¼šé…ç½®åœ¨ web.xml æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šæ”¾åˆ°åº”ç”¨çš„ WAR åŒ…é‡Œé¢ã€‚</p> <p>è€Œè¿™é‡Œï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Java å°† DispatcherServlet é…ç½®åœ¨ Servlet å®¹å™¨ä¸­ï¼Œè€Œä¸ä¼šå†ä½¿ç”¨ web.xml æ–‡ä»¶ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>support</span><span class="token punctuation">.</span><span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpitterWebInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRootConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">RootConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">WebConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰©å±• AbstractAnnotationConfigDispatcherServletInitializer çš„ä»»æ„ç±»éƒ½ä¼šè‡ªåŠ¨åœ°é…ç½® DispatcherServlet å’Œ Spring åº”ç”¨ä¸Šä¸‹æ–‡ï¼ŒSpring çš„åº”ç”¨ä¸Šä¸‹æ–‡ä¼šä½äºåº”ç”¨ç¨‹åºçš„ Servlet ä¸Šä¸‹æ–‡ä¹‹ä¸­ã€‚</p> <p>è¿™é‡Œé‡å†™äº†ä¸‰ä¸ªæ–¹æ³•ï¼š</p> <p>ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯ getServletMappings()ï¼Œå®ƒä¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªè·¯å¾„æ˜ å°„åˆ° Dispatcher-Servlet ä¸Šã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæ˜ å°„çš„æ˜¯ &quot;/&quot;ï¼Œè¿™è¡¨ç¤ºå®ƒä¼šæ˜¯åº”ç”¨çš„é»˜è®¤ Servletã€‚å®ƒä¼šå¤„ç†è¿›å…¥åº”ç”¨çš„æ‰€æœ‰è¯·æ±‚ã€‚</p> <p>ä¸ºäº†ç†è§£å…¶ä»–çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç†è§£ DispatcherServlet å’Œä¸€ä¸ª Servlet ç›‘å¬å™¨ï¼ˆä¹Ÿå°±æ˜¯ ContextLoaderListenerï¼‰çš„å…³ç³»ã€‚</p> <p>AbstractAnnotationConfigDispatcherServletInitializer ä¼šåŒæ—¶åˆ›å»º DispatcherServlet å’Œ ContextLoaderListenerã€‚</p> <p>DispatcherServlet åŠ è½½åŒ…å« Web ç»„ä»¶çš„ beanï¼Œå¦‚æ§åˆ¶å™¨ã€è§†å›¾è§£æå™¨ä»¥åŠå¤„ç†å™¨æ˜ å°„ï¼Œè€Œ ContextLoaderListener è¦åŠ è½½åº”ç”¨ä¸­çš„å…¶ä»– beanã€‚è¿™äº› bean é€šå¸¸æ˜¯é©±åŠ¨åº”ç”¨åç«¯çš„ä¸­é—´å±‚å’Œæ•°æ®å±‚ç»„ä»¶ã€‚</p> <ul><li>getServletConfigClasses() æ–¹æ³•è¿”å›çš„é…ç½®ç±»å°†ä¼šç”¨æ¥å®šä¹‰ DispatcherServlet åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ beanã€‚</li> <li>getRootConfigClasses() æ–¹æ³•è¿”å›é…ç½®ç±»å°†ä¼šç”¨æ¥é…ç½® ContextLoaderListener åˆ›å»ºçš„åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ beanã€‚</li></ul> <h4 id="å¯ç”¨-spring-mvc"><a href="#å¯ç”¨-spring-mvc" class="header-anchor">#</a> å¯ç”¨ Spring MVC</h4> <p>ä¸ºäº†ä½¿ç”¨ Spring MVCï¼Œç”¨æ¥é…ç½® DispatcherServlet çš„é…ç½®ç±»ä¸Šéœ€è¦åŠ ä¸€ä¸ª @EnableWebMvc æ³¨è§£ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">EnableWebMvc</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰é…ç½®è§†å›¾è§£æå™¨ï¼Œæ²¡æœ‰å¯åŠ¨ç»„ä»¶æ‰«æï¼ŒDispatcherServlet ä¼šæ˜ å°„ä¸ºåº”ç”¨çš„é»˜è®¤ Servletï¼Œæ‰€ä»¥å®ƒä¼šå¤„ç†æ‰€æœ‰çš„è¯·æ±‚ï¼ŒåŒ…æ‹¬å¯¹é™æ€èµ„æºçš„è¯·æ±‚ï¼Œå¦‚å›¾ç‰‡å’Œæ ·å¼è¡¨ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">ComponentScan</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">ViewResolver</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">DefaultServletHandlerConfigurer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">EnableWebMvc</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">WebMvcConfigurerAdapter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>view</span><span class="token punctuation">.</span><span class="token class-name">InternalResourceViewResolver</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;spittr.web&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">ViewResolver</span> <span class="token function">viewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">InternalResourceViewResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternalResourceViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/views/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span class="token string">&quot;.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> resolver<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureDefaultServletHandling</span><span class="token punctuation">(</span><span class="token class-name">DefaultServletHandlerConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    configurer<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨æ·»åŠ äº† @ComponentScan æ³¨è§£ï¼Œå› æ­¤å°†ä¼šæ‰«æ spitter.web åŒ…æ¥æŸ¥æ‰¾ç»„ä»¶ã€‚åŒ…ä¸‹é¢æ‰€æœ‰å¸¦ @Controller æ³¨è§£çš„ç±»ï¼Œéƒ½ä¼šè¢«å½“åšæ§åˆ¶å™¨å¼•å…¥ï¼›</p> <p>æ¥ä¸‹æ¥å£°æ˜äº†ä¸€ä¸ª InternalResourceViewResolver è§†å›¾è§£æå™¨ã€‚å®ƒä¼šæŸ¥æ‰¾ JSP æ–‡ä»¶ï¼Œåœ¨æŸ¥æ‰¾çš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨è§†å›¾åç§°ä¸ŠåŠ ä¸€ä¸ªç‰¹å®šçš„å‰ç¼€å’Œåç¼€ï¼ˆä¾‹å¦‚ï¼Œåä¸º home çš„è§†å›¾å°†ä¼šè§£æä¸º /WEB-INF/views/home.jspï¼‰ã€‚</p> <p>æœ€åï¼Œæ–°çš„ WebConfig ç±»è¿˜æ‰©å±•äº† WebMvcConfigurerAdapter å¹¶é‡å†™äº†å…¶ configureDefaultServletHandling() æ–¹æ³•ã€‚é€šè¿‡è°ƒç”¨ DefaultServletHandlerConfigurer çš„ enable() æ–¹æ³•ï¼Œæˆ‘ä»¬è¦æ±‚ DispatcherServlet å°†å¯¹é™æ€èµ„æºçš„è¯·æ±‚è½¬å‘åˆ° Servlet å®¹å™¨ä¸­é»˜è®¤çš„ Servlet ä¸Šï¼Œè€Œä¸æ˜¯ä½¿ç”¨ DispatcherServlet æœ¬èº«æ¥å¤„ç†æ­¤ç±»è¯·æ±‚ã€‚</p> <h3 id="ç¼–å†™æ§åˆ¶å™¨"><a href="#ç¼–å†™æ§åˆ¶å™¨" class="header-anchor">#</a> ç¼–å†™æ§åˆ¶å™¨</h3> <p>åœ¨ Spring MVC ä¸­ï¼Œæ§åˆ¶å™¨åªæ˜¯åœ¨ç±»åä¸Šæœ‰ @Controller æ³¨è§£ï¼Œå¹¶ä¸”æ–¹æ³•ä¸Šæ·»åŠ äº† @RequestMapping æ³¨è§£çš„ç±»ï¼Œè¿™ä¸ªæ³¨è§£å£°æ˜äº†å®ƒä»¬æ‰€è¦å¤„ç†çš„è¯·æ±‚ã€‚</p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢ä»£ç ä¸­ï¼Œæ§åˆ¶å™¨ç±»è¦å¤„ç†å¯¹ / çš„è¯·æ±‚ï¼Œ å¹¶æ¸²æŸ“åº”ç”¨çš„é¦–é¡µã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui</span><span class="token punctuation">.</span><span class="token class-name">Model</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>home() æ–¹æ³•å…¶å®å¹¶æ²¡æœ‰åšå¤ªå¤šçš„äº‹æƒ…ï¼šå®ƒè¿”å›äº†ä¸€ä¸ª String ç±»å‹çš„ home ã€‚è¿™ä¸ª String å°†ä¼šè¢« Spring MVC è§£è¯»ä¸ºè¦æ¸²æŸ“çš„è§†å›¾åç§°ã€‚DispatcherServlet ä¼šè¦æ±‚è§†å›¾è§£æå™¨å°†è¿™ä¸ªé€»è¾‘åç§°è§£æä¸ºå®é™…çš„è§†å›¾ã€‚</p> <h4 id="å®šä¹‰ç±»çº§åˆ«çš„è¯·æ±‚å¤„ç†"><a href="#å®šä¹‰ç±»çº§åˆ«çš„è¯·æ±‚å¤„ç†" class="header-anchor">#</a> å®šä¹‰ç±»çº§åˆ«çš„è¯·æ±‚å¤„ç†</h4> <p>æˆ‘ä»¬å¯ä»¥åœ¨ç±»åä¸Šä½¿ç”¨ @RequestMapping æ³¨è§£æ¥å®šä¹‰ç±»çº§åˆ«çš„è¯·æ±‚å¤„ç†ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui</span><span class="token punctuation">.</span><span class="token class-name">Model</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>å½“æ§åˆ¶å™¨åœ¨ç±»çº§åˆ«ä¸Šæ·»åŠ  @RequestMapping æ³¨è§£æ—¶ï¼Œè¿™ä¸ªæ³¨è§£ä¼šåº”ç”¨åˆ°æ§åˆ¶å™¨çš„æ‰€æœ‰å¤„ç†å™¨æ–¹æ³•ä¸Šã€‚å¤„ç†å™¨æ–¹æ³•ä¸Šçš„ @RequestMapping æ³¨è§£ä¼šå¯¹ç±»çº§åˆ«ä¸Šçš„ @RequestMapping çš„å£°æ˜è¿›è¡Œè¡¥å……ã€‚</p> <p>@RequestMapping çš„ value å±æ€§èƒ½å¤Ÿæ¥å—ä¸€ä¸ª String ç±»å‹çš„æ•°ç»„ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ç»™å®ƒè®¾ç½®çš„éƒ½æ˜¯ä¸€ä¸ª String ç±»å‹çš„ /ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å®ƒæ˜ å°„åˆ°å¯¹ /homepage çš„è¯·æ±‚ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequesiMapping</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/homepage&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ä¼ é€’æ¨¡å‹å±æ€§åˆ°è§†å›¾ä¸­"><a href="#ä¼ é€’æ¨¡å‹å±æ€§åˆ°è§†å›¾ä¸­" class="header-anchor">#</a> ä¼ é€’æ¨¡å‹å±æ€§åˆ°è§†å›¾ä¸­</h4> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMethod</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> spittr<span class="token punctuation">.</span><span class="token class-name">Spittle</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">spittr<span class="token punctuation">.</span>data</span><span class="token punctuation">.</span><span class="token class-name">SpittleRepository</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/spittles&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpittleController</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">SpittleRepository</span> spittleRepository<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">public</span> <span class="token class-name">SpittleController</span><span class="token punctuation">(</span><span class="token class-name">SpittleRepository</span> spittleRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>spittleRepository <span class="token operator">=</span> spittleRepository<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittles</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;splittleList&quot;</span><span class="token punctuation">,</span>
      spittleRepository<span class="token punctuation">.</span><span class="token function">findSpittles</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;spittles&quot;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ spittles() æ–¹æ³•ä¸­ç»™å®šäº†ä¸€ä¸ª Model ä½œä¸ºå‚æ•°ã€‚è¿™æ ·ï¼Œspittles() æ–¹æ³•å°±èƒ½å°† Repository ä¸­è·å–åˆ°çš„ Spittle åˆ—è¡¨å¡«å……åˆ°æ¨¡å‹ä¸­ã€‚</p> <p>Model å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ª Mapï¼ˆä¹Ÿå°±æ˜¯ key-value å¯¹çš„é›†åˆï¼‰ï¼Œå®ƒä¼šä¼ é€’ç»™è§†å›¾ï¼Œè¿™æ ·æ•°æ®å°±èƒ½æ¸²æŸ“åˆ°å®¢æˆ·ç«¯äº†ã€‚</p> <p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨é Spring ç±»å‹çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ java.util.Map æ¥ä»£æ›¿ Modelã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittles</span><span class="token punctuation">(</span><span class="token class-name">Map</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;splittleList&quot;</span><span class="token punctuation">,</span>
    spittleRepository<span class="token punctuation">.</span><span class="token function">findSpittles</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;spittles&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨ï¼Œæ•°æ®å·²ç»æ”¾åˆ°äº†æ¨¡å‹ä¸­ï¼Œåœ¨ JSP ä¸­è¯¥å¦‚ä½•è®¿é—®å®ƒå‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“è§†å›¾æ˜¯ JSP çš„æ—¶å€™ï¼Œæ¨¡å‹æ•°æ®ä¼šä½œä¸ºè¯·æ±‚å±æ€§æ”¾åˆ°è¯·æ±‚ï¼ˆrequestï¼‰ä¹‹ä¸­ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittleList}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittle_&lt;c:out value=<span class="token punctuation">&quot;</span></span><span class="token attr-name">spittle.id&quot;</span><span class="token punctuation">/&gt;</span></span>&quot;&gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittleMessage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittle.message}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittleTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittle.time}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittleLocation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>(
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittle.latitude}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>,
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittle.longitude}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>)
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="æ¥å—è¯·æ±‚ä¸­çš„æ•°æ®"><a href="#æ¥å—è¯·æ±‚ä¸­çš„æ•°æ®" class="header-anchor">#</a> æ¥å—è¯·æ±‚ä¸­çš„æ•°æ®</h4> <p>Spring MVC å…è®¸ä»¥å¤šç§æ–¹å¼å°†å®¢æˆ·ç«¯ä¸­çš„æ•°æ®ä¼ é€åˆ°æ§åˆ¶å™¨çš„å¤„ç†å™¨æ–¹æ³•ä¸­ï¼ŒåŒ…æ‹¬ï¼š</p> <ul><li>æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parameterï¼‰ã€‚</li> <li>è¡¨å•å‚æ•°ï¼ˆForm Parameterï¼‰ã€‚</li> <li>è·¯å¾„å˜é‡ï¼ˆPath Variableï¼‰ã€‚</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Spittle</span><span class="token punctuation">&gt;</span></span> <span class="token function">spittles</span><span class="token punctuation">(</span>
  <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;max&quot;</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span>MAX_LONG_AS_STRING<span class="token punctuation">)</span> <span class="token keyword">long</span> max<span class="token punctuation">,</span>
  <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span><span class="token string">&quot;20&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> spittleRepository<span class="token punctuation">.</span><span class="token function">findSpittles</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä¼šä»è¯·æ±‚ä¸­è·å–ä¸¤ä¸ªå‚æ•° max å’Œ countï¼Œå¦‚æœä¸å­˜åœ¨ä½¿ç”¨é»˜è®¤å€¼ï¼Œåé¢çš„ long max å’Œ int count è¡¨ç¤ºï¼Œä»–ä»¬ä¼šåˆ†åˆ«è¢«è½¬æ¢æˆ long ç±»å‹ å’Œ int ç±»å‹ï¼Œç„¶åç”¨ max å’Œ count ä½œä¸ºå‚æ•°çš„åå­—ï¼Œä¼ å…¥ spittles æ–¹æ³•ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/show&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showSpittles</span><span class="token punctuation">(</span>
    <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;spittle_id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">long</span> spittleId<span class="token punctuation">,</span>
    <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spittleRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>spittleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;spittle&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œ<code>/spittles/show?spittle_id=12345</code> è¿™æ ·çš„è·¯å¾„ä¸‹ï¼Œspittle_id å°±ä¼šè¢«ä½œä¸ºå‚æ•°ã€‚</p> <p>é€šè¿‡ä½¿ç”¨ <code>{}</code> å ä½ç¬¦ï¼Œä¹Ÿå¯ä»¥æŠŠè·¯å¾„çš„ä¸€éƒ¨åˆ†ä½œä¸ºå‚æ•°ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/{spittleId}&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittle</span><span class="token punctuation">(</span>
    <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;spittleId&quot;</span><span class="token punctuation">)</span> <span class="token keyword">long</span> spittleId<span class="token punctuation">,</span>
    <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spittleRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>spittleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;spittle&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®ƒå°±èƒ½å¤Ÿå¤„ç†é’ˆå¯¹ /spittles/54321 çš„è¯·æ±‚ï¼Œä¼šæŠŠ 54321 ä¼ é€’è¿›æ¥ï¼Œä½œä¸º spittleId çš„å€¼ã€‚</p> <p>å¦‚æœ @PathVariable ä¸­æ²¡æœ‰ value å±æ€§çš„è¯ï¼Œå®ƒä¼šå‡è®¾å ä½ç¬¦çš„åç§°ä¸æ–¹æ³•çš„å‚æ•°åç›¸åŒã€‚è¿™èƒ½å¤Ÿè®©ä»£ç ç¨å¾®ç®€æ´ä¸€äº›ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/{spittleId}&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittle</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">long</span> spittleId<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spittleRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>spittleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;spittle&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¤„ç†è¡¨å•"><a href="#å¤„ç†è¡¨å•" class="header-anchor">#</a> å¤„ç†è¡¨å•</h3> <p>å½“å¤„ç†æ³¨å†Œè¡¨å•çš„ POST è¯·æ±‚æ—¶ï¼Œæ§åˆ¶å™¨éœ€è¦æ¥å—è¡¨å•æ•°æ®å¹¶å°†è¡¨å•æ•°æ®ä¿å­˜ä¸º Spitter å¯¹è±¡ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui</span><span class="token punctuation">.</span><span class="token class-name">Model</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation</span><span class="token punctuation">.</span><span class="token class-name">Errors</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> spittr<span class="token punctuation">.</span><span class="token class-name">Spitter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">spittr<span class="token punctuation">.</span>data</span><span class="token punctuation">.</span><span class="token class-name">SpitterRepository</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/spitter&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpitterController</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">SpitterRepository</span> spitterRepository<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">public</span> <span class="token class-name">SpitterController</span><span class="token punctuation">(</span><span class="token class-name">SpitterRepository</span> spitterRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>spitterRepository <span class="token operator">=</span> spitterRepository<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showRegistrationForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;registerForm&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>POST<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processRegistration</span><span class="token punctuation">(</span><span class="token class-name">Spitter</span> spitter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spitterRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>spitter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;redirect:/spitter/&quot;</span> <span class="token operator">+</span> spitter<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœç”¨æˆ·åœ¨æäº¤è¡¨å•çš„æ—¶å€™ï¼Œusername æˆ– password æ–‡æœ¬åŸŸä¸ºç©ºçš„è¯ï¼Œé‚£ä¹ˆå°†ä¼šå¯¼è‡´åœ¨æ–°å»º Spitter å¯¹è±¡ä¸­ï¼Œusername æˆ– password æ˜¯ç©ºçš„ Stringã€‚è‡³å°‘è¿™æ˜¯ä¸€ç§æ€ªå¼‚çš„è¡Œä¸ºã€‚å¦‚æœè¿™ç§ç°è±¡ä¸å¤„ç†çš„è¯ï¼Œè¿™å°†ä¼šå‡ºç°å®‰å…¨é—®é¢˜ã€‚</p> <p>ä» Spring 3.0 å¼€å§‹ï¼Œåœ¨ Spring MVC ä¸­æä¾›äº†å¯¹ Java æ ¡éªŒ API çš„æ”¯æŒã€‚Java æ ¡éªŒ API å®šä¹‰äº†å¤šä¸ªæ³¨è§£ï¼Œè¿™äº›æ³¨è§£å¯ä»¥æ”¾åˆ°å±æ€§ä¸Šï¼Œä»è€Œé™åˆ¶è¿™äº›å±æ€§çš„å€¼ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-13-53-54.png" alt="2020-3-26-13-53-54.png"></p> <p>æˆ‘ä»¬æ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯å°†è¿™äº›æ³¨è§£æ·»åŠ åˆ° Spitter çš„å±æ€§ä¸Šã€‚å¦‚ä¸‹çš„ç¨‹åºæ¸…å•å±•ç°äº† Spitter ç±»ï¼Œå®ƒçš„å±æ€§å·²ç»æ·»åŠ äº†æ ¡éªŒæ³¨è§£ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints</span><span class="token punctuation">.</span><span class="token class-name">NotNull</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints</span><span class="token punctuation">.</span><span class="token class-name">Size</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span>builder</span><span class="token punctuation">.</span><span class="token class-name">EqualsBuilder</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span>builder</span><span class="token punctuation">.</span><span class="token class-name">HashCodeBuilder</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spitter</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹ processRegistration() æ–¹æ³•æ¥åº”ç”¨æ ¡éªŒåŠŸèƒ½ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>POST<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processRegistration</span><span class="token punctuation">(</span>
    <span class="token annotation punctuation">@Valid</span> <span class="token class-name">Spitter</span> spitter<span class="token punctuation">,</span>
    <span class="token class-name">Errors</span> errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;registerForm&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  spitterRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>spitter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;redirect:/spitter/&quot;</span> <span class="token operator">+</span> spitter<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Spitter å‚æ•°æ·»åŠ äº† @Valid æ³¨è§£ï¼Œè¿™ä¼šå‘ŠçŸ¥ Springï¼Œéœ€è¦ç¡®ä¿è¿™ä¸ªå¯¹è±¡æ»¡è¶³æ ¡éªŒé™åˆ¶ã€‚åœ¨ Spitter å±æ€§ä¸Šæ·»åŠ æ ¡éªŒé™åˆ¶å¹¶ä¸èƒ½é˜»æ­¢è¡¨å•æäº¤ã€‚å³ä¾¿ç”¨æˆ·æ²¡æœ‰å¡«å†™æŸä¸ªåŸŸæˆ–è€…æŸä¸ªåŸŸæ‰€ç»™å®šçš„å€¼è¶…å‡ºäº†æœ€å¤§é•¿åº¦ï¼ŒprocessRegistration() æ–¹æ³•ä¾ç„¶ä¼šè¢«è°ƒç”¨ã€‚</p> <p>å¦‚æœæœ‰æ ¡éªŒå‡ºç°é”™è¯¯çš„è¯ï¼Œé‚£ä¹ˆè¿™äº›é”™è¯¯å¯ä»¥é€šè¿‡ Errors å¯¹è±¡è¿›è¡Œè®¿é—®ï¼Œç°åœ¨è¿™ä¸ªå¯¹è±¡å·²ä½œä¸º processRegistration() æ–¹æ³•çš„å‚æ•°ã€‚</p> <h3 id="ä½¿ç”¨-spring-mvc-åˆ›å»º-rest-api"><a href="#ä½¿ç”¨-spring-mvc-åˆ›å»º-rest-api" class="header-anchor">#</a> ä½¿ç”¨ Spring MVC åˆ›å»º REST API</h3> <p>ä¸ºäº†ç†è§£ REST æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å°†å®ƒçš„é¦–å­—æ¯ç¼©å†™æ‹†åˆ†ä¸ºä¸åŒçš„æ„æˆéƒ¨åˆ†ï¼š</p> <ul><li>è¡¨è¿°æ€§ï¼ˆRepresentationalï¼‰ï¼šREST èµ„æºå®é™…ä¸Šå¯ä»¥ç”¨å„ç§å½¢å¼æ¥è¿›è¡Œè¡¨è¿°ï¼ŒåŒ…æ‹¬ XMLã€JSONï¼ˆJavaScript Object Notationï¼‰ç”šè‡³ HTML â€”â€” æœ€é€‚åˆèµ„æºä½¿ç”¨è€…çš„ä»»æ„å½¢å¼ï¼›</li> <li>çŠ¶æ€ï¼ˆStateï¼‰ï¼šå½“ä½¿ç”¨ REST çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ›´å…³æ³¨èµ„æºçš„çŠ¶æ€è€Œä¸æ˜¯å¯¹èµ„æºé‡‡å–çš„è¡Œä¸ºï¼›</li> <li>è½¬ç§»ï¼ˆTransferï¼‰ï¼šREST æ¶‰åŠåˆ°è½¬ç§»èµ„æºï¼Œå®ƒä»¥æŸç§è¡¨è¿°æ€§å½¢å¼ä»ä¸€ä¸ªåº”ç”¨è½¬ç§»åˆ°å¦ä¸€ä¸ªåº”ç”¨ã€‚</li></ul> <p>æ›´ç®€æ´åœ°è®²ï¼ŒREST å°±æ˜¯å°†èµ„æºçš„çŠ¶æ€ä»¥æœ€é€‚åˆå®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯çš„å½¢å¼ä»æœåŠ¡å™¨ç«¯è½¬ç§»åˆ°å®¢æˆ·ç«¯ï¼ˆæˆ–è€…åè¿‡æ¥ï¼‰ã€‚</p> <p>åœ¨ REST ä¸­ï¼Œèµ„æºé€šè¿‡ URL è¿›è¡Œè¯†åˆ«å’Œå®šä½ã€‚</p> <p>REST ä¸­ä¼šæœ‰è¡Œä¸ºï¼Œå®ƒä»¬æ˜¯é€šè¿‡ HTTP æ–¹æ³•æ¥å®šä¹‰çš„ã€‚å…·ä½“æ¥è®²ï¼Œä¹Ÿå°±æ˜¯ GETã€POSTã€PUTã€DELETEã€PATCH ä»¥åŠå…¶ä»–çš„ HTTP æ–¹æ³•æ„æˆäº† REST ä¸­çš„åŠ¨ä½œã€‚è¿™äº› HTTP æ–¹æ³•é€šå¸¸ä¼šåŒ¹é…ä¸ºå¦‚ä¸‹çš„ CRUD åŠ¨ä½œï¼š</p> <ul><li>Createï¼šPOST</li> <li>Readï¼šGET</li> <li>Updateï¼šPUT æˆ– PATCH</li> <li>Deleteï¼šDELETE</li></ul> <p>å°½ç®¡é€šå¸¸æ¥è®²ï¼ŒHTTP æ–¹æ³•ä¼šæ˜ å°„ä¸º CRUD åŠ¨ä½œï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸¥æ ¼çš„é™åˆ¶ã€‚æœ‰æ—¶å€™ï¼ŒPUT å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°èµ„æºï¼ŒPOST å¯ä»¥ç”¨æ¥æ›´æ–°èµ„æºã€‚</p> <h4 id="åˆ›å»ºç¬¬ä¸€ä¸ª-rest-ç«¯ç‚¹"><a href="#åˆ›å»ºç¬¬ä¸€ä¸ª-rest-ç«¯ç‚¹" class="header-anchor">#</a> åˆ›å»ºç¬¬ä¸€ä¸ª REST ç«¯ç‚¹</h4> <p>è¡¨è¿°æ˜¯ REST ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªæ–¹é¢ã€‚å®ƒæ˜¯å…³äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é’ˆå¯¹æŸä¸€èµ„æºæ˜¯å¦‚ä½•é€šä¿¡çš„ã€‚ä»»ä½•ç»™å®šçš„èµ„æºéƒ½å‡ ä¹å¯ä»¥ç”¨ä»»æ„çš„å½¢å¼æ¥è¿›è¡Œè¡¨è¿°ã€‚å¦‚æœèµ„æºçš„ä½¿ç”¨è€…æ„¿æ„ä½¿ç”¨ JSONï¼Œé‚£ä¹ˆèµ„æºå°±å¯ä»¥ç”¨ JSON æ ¼å¼æ¥è¡¨è¿°ã€‚å¦‚æœä½¿ç”¨è€…å–œæ¬¢å°–æ‹¬å·ï¼Œé‚£ç›¸åŒçš„èµ„æºå¯ä»¥ç”¨ XML æ¥è¿›è¡Œè¡¨è¿°ã€‚ç”šè‡³ txt æ ¼å¼ã€‚èµ„æºçš„æœ¬è´¨æ²¡æœ‰å˜åŒ–ï¼Œåªæ˜¯å®ƒçš„è¡¨è¿°æ–¹å¼å˜åŒ–äº†ã€‚</p> <p>éœ€è¦äº†è§£çš„æ˜¯æ§åˆ¶å™¨æœ¬èº«é€šå¸¸å¹¶ä¸å…³å¿ƒèµ„æºå¦‚ä½•è¡¨è¿°ã€‚æ§åˆ¶å™¨ä»¥ Java å¯¹è±¡çš„æ–¹å¼æ¥å¤„ç†èµ„æºã€‚æ§åˆ¶å™¨å®Œæˆäº†å®ƒçš„å·¥ä½œä¹‹åï¼Œèµ„æºæ‰ä¼šè¢«è½¬åŒ–æˆæœ€é€‚åˆå®¢æˆ·ç«¯çš„å½¢å¼ã€‚</p> <p>Spring æä¾›äº†ä¸¤ç§æ–¹æ³•å°†èµ„æºçš„ Java è¡¨è¿°å½¢å¼è½¬æ¢ä¸ºå‘é€ç»™å®¢æˆ·ç«¯çš„è¡¨è¿°å½¢å¼ï¼š</p> <ul><li>å†…å®¹åå•†ï¼ˆContent negotiationï¼‰ï¼šé€‰æ‹©ä¸€ä¸ªè§†å›¾ï¼Œå®ƒèƒ½å¤Ÿå°†æ¨¡å‹æ¸²æŸ“ä¸ºå‘ˆç°ç»™å®¢æˆ·ç«¯çš„è¡¨è¿°å½¢å¼ï¼›</li> <li>æ¶ˆæ¯è½¬æ¢å™¨ï¼ˆMessage conversionï¼‰ï¼šé€šè¿‡ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨å°†æ§åˆ¶å™¨æ‰€è¿”å›çš„å¯¹è±¡è½¬æ¢ä¸ºå‘ˆç°ç»™å®¢æˆ·ç«¯çš„è¡¨è¿°å½¢å¼ã€‚</li></ul> <p>åœ¨è¿™é‡Œç›´æ¥å°†å¦‚ä½•ä½¿ç”¨æ¶ˆæ¯è½¬æ¢å™¨ã€‚æ¶ˆæ¯è½¬æ¢ï¼ˆmessage conversionï¼‰æä¾›äº†ä¸€ç§æ›´ä¸ºç›´æ¥çš„æ–¹å¼ï¼Œå®ƒèƒ½å¤Ÿå°†æ§åˆ¶å™¨äº§ç”Ÿçš„æ•°æ®è½¬æ¢ä¸ºæœåŠ¡äºå®¢æˆ·ç«¯çš„è¡¨è¿°å½¢å¼ã€‚</p> <p>Spring è‡ªå¸¦äº†å„ç§å„æ ·çš„è½¬æ¢å™¨ã€‚</p> <p>ä¸ºäº†æ”¯æŒæ¶ˆæ¯è½¬æ¢ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ Spring MVC çš„ç¼–ç¨‹æ¨¡å‹è¿›è¡Œä¸€äº›å°è°ƒæ•´ã€‚</p> <p>å¦‚æœæƒ³ä½¿ç”¨æ¶ˆæ¯è½¬æ¢åŠŸèƒ½çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ Spring è·³è¿‡æ­£å¸¸çš„æ¨¡å‹/è§†å›¾æµç¨‹ï¼Œå¹¶ä½¿ç”¨æ¶ˆæ¯è½¬æ¢å™¨ã€‚æœ‰ä¸å°‘æ–¹å¼éƒ½èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä¸ºæ§åˆ¶å™¨æ–¹æ³•æ·»åŠ  @ResponseBody æ³¨è§£ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">,</span> produces<span class="token operator">=</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@ResponseBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Spittle</span><span class="token punctuation">&gt;</span></span> <span class="token function">spittles</span><span class="token punctuation">(</span>
    <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;max&quot;</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span>MAX_LONG_AS_STRING<span class="token punctuation">)</span> <span class="token keyword">long</span> max<span class="token punctuation">,</span>
    <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span><span class="token string">&quot;20&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> spittleRepository<span class="token punctuation">.</span><span class="token function">findSpittles</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>@ResponseBody æ³¨è§£ä¼šå‘ŠçŸ¥ Springï¼Œæˆ‘ä»¬è¦å°†è¿”å›çš„å¯¹è±¡ä½œä¸ºèµ„æºå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå®¢æˆ·ç«¯å¯æ¥å—çš„è¡¨è¿°å½¢å¼ã€‚æ›´å…·ä½“åœ°è®²ï¼ŒDispatcherServlet å°†ä¼šè€ƒè™‘åˆ°è¯·æ±‚ä¸­ Accept å¤´éƒ¨ä¿¡æ¯ï¼Œå¹¶æŸ¥æ‰¾èƒ½å¤Ÿä¸ºå®¢æˆ·ç«¯æä¾›æ‰€éœ€è¡¨è¿°å½¢å¼çš„æ¶ˆæ¯è½¬æ¢å™¨ã€‚</p> <p>ä¸¾ä¾‹æ¥è®²ï¼Œå‡è®¾å®¢æˆ·ç«¯çš„ Accept å¤´éƒ¨ä¿¡æ¯è¡¨æ˜å®ƒæ¥å— â€œapplication/jsonâ€ï¼Œå¹¶ä¸” Jackson JSON åº“ä½äºåº”ç”¨çš„ç±»è·¯å¾„ä¸‹ï¼Œé‚£ä¹ˆå°†ä¼šé€‰æ‹© MappingJacksonHttpMessageConverterã€‚æ¶ˆæ¯è½¬æ¢å™¨ä¼šå°†æ§åˆ¶å™¨è¿”å›çš„ Spittle åˆ—è¡¨è½¬æ¢ä¸º JSON æ–‡æ¡£ï¼Œå¹¶å°†å…¶å†™å…¥åˆ°å“åº”ä½“ä¸­ã€‚</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">28.419489</span><span class="token punctuation">,</span>
    <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">-81.581184</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">140038920000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">28.419136</span><span class="token punctuation">,</span>
    <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">-81.577225</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Blast off!&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">140047560000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="åœ¨è¯·æ±‚ä½“ä¸­æ¥æ”¶èµ„æºçŠ¶æ€"><a href="#åœ¨è¯·æ±‚ä½“ä¸­æ¥æ”¶èµ„æºçŠ¶æ€" class="header-anchor">#</a> åœ¨è¯·æ±‚ä½“ä¸­æ¥æ”¶èµ„æºçŠ¶æ€</h4> <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªå…³æ³¨äº† REST ç«¯ç‚¹å¦‚ä½•ä¸ºå®¢æˆ·ç«¯æä¾›èµ„æºã€‚ä½†æ˜¯ REST å¹¶ä¸æ˜¯åªè¯»çš„ï¼ŒREST API ä¹Ÿå¯ä»¥æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„èµ„æºè¡¨è¿°ã€‚</p> <p>@RequestBody ä¹Ÿèƒ½å‘Šè¯‰ Spring æŸ¥æ‰¾ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨ï¼Œå°†æ¥è‡ªå®¢æˆ·ç«¯çš„èµ„æºè¡¨è¿°è½¬æ¢ä¸ºå¯¹è±¡ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">,</span> consumes<span class="token operator">=</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@ResponseBody</span> <span class="token class-name">Spittle</span> <span class="token function">saveSpittle</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Spittle</span> spittle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> spittleRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>spittle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>@RequestMapping è¡¨æ˜å®ƒåªèƒ½å¤„ç† â€œ/spittlesâ€ï¼ˆåœ¨ç±»çº§åˆ«çš„ @RequestMapping ä¸­è¿›è¡Œäº†å£°æ˜ï¼‰çš„ POST è¯·æ±‚ã€‚POST è¯·æ±‚ä½“ä¸­é¢„æœŸè¦åŒ…å«ä¸€ä¸ª Spittle çš„èµ„æºè¡¨è¿°ã€‚</p> <p>å› ä¸º Spittle å‚æ•°ä¸Šä½¿ç”¨äº† @RequestBodyï¼Œæ‰€ä»¥ Spring å°†ä¼šæŸ¥çœ‹è¯·æ±‚ä¸­çš„ Content-Type å¤´éƒ¨ä¿¡æ¯ï¼Œå¹¶æŸ¥æ‰¾èƒ½å¤Ÿå°†è¯·æ±‚ä½“è½¬æ¢ä¸º Spittle çš„æ¶ˆæ¯è½¬æ¢å™¨ã€‚</p> <p>å¦‚æœå®¢æˆ·ç«¯å‘é€çš„ Spittle æ•°æ®æ˜¯ JSON è¡¨è¿°å½¢å¼ï¼Œé‚£ä¹ˆ Content-Type å¤´éƒ¨ä¿¡æ¯å¯èƒ½å°±ä¼šæ˜¯ â€œapplication/jsonâ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒDispatcherServlet ä¼šæŸ¥æ‰¾èƒ½å¤Ÿå°† JSON è½¬æ¢ä¸º Java å¯¹è±¡çš„æ¶ˆæ¯è½¬æ¢å™¨ã€‚</p> <p>@RequestMapping æœ‰ä¸€ä¸ª consumes å±æ€§ï¼Œæˆ‘ä»¬å°†å…¶è®¾ç½®ä¸º â€œapplication/jsonâ€ã€‚å®ƒä¼šå‘Šè¯‰ Spring è¿™ä¸ªæ–¹æ³•åªä¼šå¤„ç†å¯¹ â€œ/spittlesâ€ çš„ POST è¯·æ±‚ï¼Œå¹¶ä¸”è¦æ±‚è¯·æ±‚çš„ Content-Type å¤´éƒ¨ä¿¡æ¯ä¸º â€œapplication/jsonâ€ã€‚å¦‚æœæ— æ³•æ»¡è¶³è¿™äº›æ¡ä»¶çš„è¯ï¼Œä¼šç”±å…¶ä»–æ–¹æ³•ï¼ˆå¦‚æœå­˜åœ¨åˆé€‚çš„æ–¹æ³•çš„è¯ï¼‰æ¥å¤„ç†è¯·æ±‚ã€‚</p> <h3 id="å‘é€é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯"><a href="#å‘é€é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯" class="header-anchor">#</a> å‘é€é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯</h3> <p>ä½œä¸º @ResponseBody çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ§åˆ¶å™¨æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª ResponseEntity å¯¹è±¡ã€‚ResponseEntity ä¸­å¯ä»¥åŒ…å«å“åº”ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆå¦‚å¤´éƒ¨ä¿¡æ¯å’ŒçŠ¶æ€ç ï¼‰ä»¥åŠè¦è½¬æ¢æˆèµ„æºè¡¨è¿°çš„å¯¹è±¡ã€‚</p> <p>å› ä¸º ResponseEntity å…è®¸æˆ‘ä»¬æŒ‡å®šå“åº”çš„çŠ¶æ€ç ï¼Œæ‰€ä»¥å½“æ— æ³•æ‰¾åˆ° Spittle çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å› HTTP 404 é”™è¯¯ã€‚</p> <h3 id="åœ¨å“åº”ä¸­è®¾ç½®å¤´éƒ¨ä¿¡æ¯"><a href="#åœ¨å“åº”ä¸­è®¾ç½®å¤´éƒ¨ä¿¡æ¯" class="header-anchor">#</a> åœ¨å“åº”ä¸­è®¾ç½®å¤´éƒ¨ä¿¡æ¯</h3> <h2 id="spring-security"><a href="#spring-security" class="header-anchor">#</a> Spring Security</h2> <p>Spring Security æ˜¯ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºæä¾›å£°æ˜å¼å®‰å…¨ä¿æŠ¤çš„å®‰å…¨æ€§æ¡†æ¶ã€‚Spring Security æä¾›äº†å®Œæ•´çš„å®‰å…¨æ€§è§£å†³æ–¹æ¡ˆï¼Œå®ƒèƒ½å¤Ÿåœ¨ Web è¯·æ±‚çº§åˆ«å’Œæ–¹æ³•è°ƒç”¨çº§åˆ«å¤„ç†èº«ä»½è®¤è¯å’Œæˆæƒã€‚</p> <p>Spring Security å€ŸåŠ©ä¸€ç³»åˆ— Servlet Filter æ¥æä¾›å„ç§å®‰å…¨æ€§åŠŸèƒ½ã€‚å€ŸåŠ©äº Spring çš„å°æŠ€å·§ï¼Œæˆ‘ä»¬åªéœ€é…ç½®ä¸€ä¸ª Filter å°±å¯ä»¥äº†ã€‚</p> <p>DelegatingFilterProxy æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Servlet Filterï¼Œå®ƒæœ¬èº«æ‰€åšçš„å·¥ä½œå¹¶ä¸å¤šã€‚åªæ˜¯å°†å·¥ä½œå§”æ‰˜ç»™ä¸€ä¸ª javax.servlet.Filter å®ç°ç±»ï¼Œè¿™ä¸ªå®ç°ç±»ä½œä¸ºä¸€ä¸ª Bean æ³¨å†Œåœ¨ Spring åº”ç”¨çš„ä¸Šä¸‹æ–‡ä¸­ã€‚</p> <p><img src="https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-26-19-27-27.png" alt="2020-3-26-19-27-27.png"></p> <p>å¦‚æœä½ å–œæ¬¢åœ¨ä¼ ç»Ÿçš„ web.xml ä¸­é…ç½® Servlet å’Œ Filter çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;filter&gt;</code> å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>springSecurityFilterChain<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    org.springframework.web.filter.DelegatingFilteProxy
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Spring 3.2 å¼•å…¥äº†æ–°çš„ Java é…ç½®æ–¹æ¡ˆï¼Œå®Œå…¨ä¸å†éœ€è¦é€šè¿‡ XML æ¥é…ç½®å®‰å…¨æ€§åŠŸèƒ½äº†ã€‚å¦‚ä¸‹çš„ç¨‹åºæ¸…å•å±•ç°äº† Spring Security æœ€ç®€å•çš„ Java é…ç½®ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">spitter<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration</span><span class="token punctuation">.</span><span class="token class-name">WebSecurityConfigurerAdapter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>configuration</span><span class="token punctuation">.</span><span class="token class-name">EnableWebSecurity</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>@EnableWebSecurity æ³¨è§£å°†ä¼šå¯ç”¨ Web å®‰å…¨åŠŸèƒ½ã€‚ä½†å®ƒæœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼ŒSpring Security å¿…é¡»é…ç½®åœ¨ä¸€ä¸ªå®ç°äº† WebSecurityConfigurer çš„ bean ä¸­ï¼Œæœ€ä¸ºç®€å•çš„æ–¹å¼å°±æ˜¯æ‰©å±• WebSecurityConfigurerAdapter ç±»ã€‚</p> <p>@EnableWebSecurity å¯ä»¥å¯ç”¨ä»»æ„ Web åº”ç”¨çš„å®‰å…¨æ€§åŠŸèƒ½ã€‚å¦‚æœä½ çš„åº”ç”¨ç¢°å·§æ˜¯ä½¿ç”¨ Spring MVC å¼€å‘çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥è€ƒè™‘ä½¿ç”¨ @EnableWeb-MvcSecurity æ›¿ä»£å®ƒã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">spitter<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration</span><span class="token punctuation">.</span><span class="token class-name">WebSecurityConfigurerAdapter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>configuration</span><span class="token punctuation">.</span><span class="token class-name">EnableWebMvcSecurity</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvcSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">4/15/2020, 7:59:48 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/my-notebook/assets/js/app.98613d35.js" defer></script><script src="/my-notebook/assets/js/2.3651e544.js" defer></script><script src="/my-notebook/assets/js/139.f13f7561.js" defer></script>
  </body>
</html>
