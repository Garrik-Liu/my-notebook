(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{352:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mybatis-入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-入门"}},[t._v("#")]),t._v(" Mybatis 入门")]),t._v(" "),a("ul",[a("li",[t._v("框架是整个或部分系统的可重用设计；")]),t._v(" "),a("li",[t._v("它是我们软件开发中的一套解决方案。不同的框架解决不同的问题；")]),t._v(" "),a("li",[t._v("框架封装了很多细节，是开发者可以使用简单的方式去实现功能。提高了开发效率；")])]),t._v(" "),a("h2",{attrs:{id:"什么是持久层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是持久层"}},[t._v("#")]),t._v(" 什么是持久层")]),t._v(" "),a("ul",[a("li",[t._v("J2EE 是在 SUN 公司领导下，多家公司参与共同制定的企业级分布式应用程序开发规范；")]),t._v(" "),a("li",[t._v("J2EE 中将整个应用分成三层架构：\n"),a("ul",[a("li",[t._v("表现层：User Interface；")]),t._v(" "),a("li",[t._v("业务逻辑层：Business Logic Layer；")]),t._v(" "),a("li",[t._v("数据访问层：Data Access Layer；")])])]),t._v(" "),a("li",[t._v("持久层又被称为 “数据访问层”。也就是用来负责对数据库的访问和操作；")]),t._v(" "),a("li",[t._v("之前我们一直使用 JDBC 作为持久层技术解决方案，用它来访问和操作数据库；")]),t._v(" "),a("li",[t._v("我们还了解过 Apache 的 BDUtils，它是对 JDBC 的简单封装；")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("注意：J2EE 的三层架构和 MVC 设计模式是有区别的：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("相同点")]),t._v("：在 MVC 和三层架构中，视图层都用来展示数据给用户；")]),t._v(" "),a("li",[a("strong",[t._v("不同点")]),t._v("：\n"),a("ul",[a("li",[t._v("MVC 中，Model 层中包含了 “业务逻辑” 和 “数据库代码”；")]),t._v(" "),a("li",[t._v("三层架构中，数据访问层只用来处理和数据库相关操作；")]),t._v(" "),a("li",[t._v("三层架构中，业务逻辑层处理业务逻辑；")]),t._v(" "),a("li",[t._v("三层架构的 “业务逻辑层” + “数据访问层” = MVC 的 Model 层；")])])]),t._v(" "),a("li",[t._v("MVC 中的 Controller 主要负责，告诉 Model 处理什么数据，然后告诉 View 展示什么数据；")]),t._v(" "),a("li",[t._v("🌰 拿用户登录举例：\n"),a("ul",[a("li",[a("strong",[t._v("View")]),t._v("：用户在网页访问到登录的 HTML 页面，输入用户名和密码，点击登录，发送给服务器一条 POST 请求；")]),t._v(" "),a("li",[a("strong",[t._v("Controller")]),t._v("：POST 请求被服务器的 Servlet 处理，拿出请求中的用户名和密码参数，然后传递给对应的 Service 方法；")]),t._v(" "),a("li",[a("strong",[t._v("Model")]),t._v("：Service 方法中，拿用户名和密码去数据库进行查找和比对：\n"),a("ul",[a("li",[t._v("匹配成功：把数据库中这个用户的其他信息查询出来，然后创建 User 对象，返回给 Servlet；")]),t._v(" "),a("li",[t._v("匹配失败：返回失败信息给 Servlet；")])])]),t._v(" "),a("li",[a("strong",[t._v("Controller")]),t._v("：Servlet 拿到返回后，再对浏览器进行响应；")]),t._v(" "),a("li",[a("strong",[t._v("View")]),t._v("：浏览器通过拿到的响应，绘制页面；")])])])])]),t._v(" "),a("h2",{attrs:{id:"什么是-mybatis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-mybatis"}},[t._v("#")]),t._v(" 什么是 Mybatis")]),t._v(" "),a("ul",[a("li",[t._v("MyBatis 几乎可以代替 JDBC，是一个支持普通 SQL 查询，存储过程和高级映射的，基于 Java 的"),a("strong",[t._v("持久层框架")]),t._v("；")]),t._v(" "),a("li",[t._v("MyBatis 对 JDBC 进行了封装，屏蔽了 JDBC API 的底层访问细节，使程序对于数据库的访问和操作更加简便；")]),t._v(" "),a("li",[t._v("MyBatis 使用了 ORM 思想实现了对结果集的封装；\n"),a("ul",[a("li",[t._v("ORM：Object Relational Mapping 对象关系映射；")]),t._v(" "),a("li",[t._v("把数据库表和实体类，数据库表中字段和实体类的属性对应起来。让我们可以通过操作实体类就实现操作数据库表；")])])])]),t._v(" "),a("h2",{attrs:{id:"第一个-mybatis-实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一个-mybatis-实例"}},[t._v("#")]),t._v(" 第一个 Mybatis 实例")]),t._v(" "),a("p",[t._v("👇下面先来看一下如何去使用 Mybatis：")]),t._v(" "),a("h4",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[t._v("#")]),t._v(" 创建项目")]),t._v(" "),a("ul",[a("li",[t._v("用 IDEA 编译器；")]),t._v(" "),a("li",[t._v("使用 Maven 创建一个空的 Java 项目")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-16-1-29.png",alt:"2020-3-1-16-1-29.png"}})]),t._v(" "),a("h4",{attrs:{id:"引入依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入依赖"}},[t._v("#")]),t._v(" 引入依赖")]),t._v(" "),a("ul",[a("li",[t._v("在项目目录中的 "),a("code",[t._v("pom.xml")]),t._v(" 文件中引入依赖；\n"),a("ul",[a("li",[t._v("mybatis")]),t._v(" "),a("li",[t._v("mysql")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-16-3-34.png",alt:"2020-3-1-16-3-34.png"}})]),t._v(" "),a("h4",{attrs:{id:"创建用户表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建用户表"}},[t._v("#")]),t._v(" 创建用户表")]),t._v(" "),a("ul",[a("li",[t._v("在数据库中创建用户表 User；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-16-13-17.png",alt:"2020-3-1-16-13-17.png"}})]),t._v(" "),a("ul",[a("li",[t._v("之后填入一些数据：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-16-13-56.png",alt:"2020-3-1-16-13-56.png"}})]),t._v(" "),a("h4",{attrs:{id:"配置-mybatis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-mybatis"}},[t._v("#")]),t._v(" 配置 Mybatis")]),t._v(" "),a("ul",[a("li",[t._v("在项目目录下的 "),a("code",[t._v("/src/main/resources")]),t._v(" 目录中创建 "),a("code",[t._v("SqlMapConfig.xml")]),t._v(" 文件，作为 Mybatis 的配置文件；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-16-51-30.png",alt:"2020-3-1-16-51-30.png"}})]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8" ?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token doctype"}},[t._v('<!DOCTYPE configuration\n        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"\n        "http://mybatis.org/dtd/mybatis-3-config.dtd">')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 配置连接环境，默认使用 mysql --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("environments")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 配置 mysql 数据库的连接 --\x3e")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("environment")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- mybatis 使用 jdbc 事务管理方式 --\x3e")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("transactionManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- mybatis 使用连接池方式来获取连接 --\x3e")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pooled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 配置连接数据库所需属性 --\x3e")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.mysql.cj.jdbc.Driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jdbc:mysql://localhost:3306/my_test_db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("123456789"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("environments")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h4",{attrs:{id:"创建-user-实体类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-user-实体类"}},[t._v("#")]),t._v(" 创建 User 实体类")]),t._v(" "),a("ul",[a("li",[t._v("Mybatis 使用 ORM 对象关系映射的思想，实现了对查询结果集的封装；")]),t._v(" "),a("li",[t._v("数据表会对应一个"),a("strong",[t._v("实体类")]),t._v("；")]),t._v(" "),a("li",[t._v("将数据表中的列名，和实体类的属性是一一对应的；")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("com.garrik.Domain")]),t._v(" 包下，创建实体类 User；")]),t._v(" "),a("li",[t._v("类里面按照数据表的列名，创建私有属性；")]),t._v(" "),a("li",[t._v("并且为所有属性创建 Getter / Setter 方法；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-17-2-46.png",alt:"2020-3-1-17-2-46.png"}})]),t._v(" "),a("h4",{attrs:{id:"创建-user-类相关操作的接口类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-user-类相关操作的接口类"}},[t._v("#")]),t._v(" 创建 User 类相关操作的接口类")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在实际项目中，针对用户数据表我们会有很多 CRUD 操作；")]),t._v(" "),a("ul",[a("li",[t._v("在之前使用 JDBC 时，我们会先创建 DAO 接口类，在里面定义好所有需要的方法接口；")]),t._v(" "),a("li",[t._v("然后再去实现 DAO 接口；")]),t._v(" "),a("li",[t._v("在开发业务逻辑时，只需要使用 DAO 实现类，就可以完成增删改查的操作；")])])]),t._v(" "),a("li",[a("p",[t._v("在 MyBatis 中，我们也用类似的思想；")])]),t._v(" "),a("li",[a("p",[t._v("但我们只需要定义好接口，接口的实现类 Mybatis 会帮我去做；")])]),t._v(" "),a("li",[a("p",[t._v("在 "),a("code",[t._v("com.garrik.Mapper")]),t._v(" 包下，创建 "),a("code",[t._v("UserMapper")]),t._v(" 类；")])]),t._v(" "),a("li",[a("p",[t._v("在里面定义一个接口 "),a("code",[t._v("selectUser")]),t._v("。我们希望它可以查询所有的用户，然后放到一个集合里面返回；")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-17-17-4.png",alt:"2020-3-1-17-17-4.png"}})]),t._v(" "),a("ul",[a("li",[t._v("在 Mybatis 中，一种习惯是用 Mapper 作为接口类，和接口类对应的 XML 映射文件的后缀；")]),t._v(" "),a("li",[t._v("但是用别的后缀名称也无所谓，例如 DAO 也是可以的；")])]),t._v(" "),a("h4",{attrs:{id:"创建接口类对应的-mapper-映射文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建接口类对应的-mapper-映射文件"}},[t._v("#")]),t._v(" 创建接口类对应的 Mapper 映射文件")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在 Mybatis 中，接口类需要有一个对应的映射文件；")])]),t._v(" "),a("li",[a("p",[t._v("里面定义了每个接口应该执行什么样的 SQL 语句；")])]),t._v(" "),a("li",[a("p",[t._v("以及定义返回的结果集的类型；")])]),t._v(" "),a("li",[a("p",[t._v("在 "),a("code",[t._v("src/main/resources")]),t._v(" 目录下创建 "),a("code",[t._v("com/garrik/Mapper")]),t._v(" 目录；")])]),t._v(" "),a("li",[a("p",[t._v("然后再在目录下创建 "),a("code",[t._v("UserMapper.xml")]),t._v(" 文件；")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-17-26-42.png",alt:"2020-3-1-17-26-42.png"}})]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8" ?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token doctype"}},[t._v('<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"\n        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- namespace 属性填写对应的接口类的全限定类名。也就是包路径 + 类名 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("mapper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.garrik.Mapper.UserMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  查询所有用户  --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("selectAll"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.garrik.Domain.User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        SELECT * FROM user\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("mapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("<mapper>")]),t._v(" 元素内的 "),a("code",[t._v("namespace")]),t._v(" 内填写所对应接口类的 “全限定名称”。也就是接口类的 “包路径” + “类名”；")]),t._v(" "),a("li",[a("code",[t._v("<select>")]),t._v(" 元素里定义了一个 SQL 的 SELECT 查询；")]),t._v(" "),a("li",[a("code",[t._v("<select>")]),t._v(" 元素的 id 属性是值为，接口类的对应的方法名；")]),t._v(" "),a("li",[a("code",[t._v("resultType")]),t._v(" 属性定义返回值的类型。此处就是实体类 User 的全限定名称；")])]),t._v(" "),a("h4",{attrs:{id:"在-mybatis-配置文件中，配置映射文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-mybatis-配置文件中，配置映射文件"}},[t._v("#")]),t._v(" 在 Mybatis 配置文件中，配置映射文件")]),t._v(" "),a("ul",[a("li",[t._v("在写完了 "),a("code",[t._v("UserMapper.xml")]),t._v(" 映射文件后；")]),t._v(" "),a("li",[t._v("我们还要把新加的映射，配置到之前写的 Mybatis 配置文件中；")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("SqlMapConfig.xml")]),t._v(" 文件中加上如下标签；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-17-45-14.png",alt:"2020-3-1-17-45-14.png"}})]),t._v(" "),a("ul",[a("li",[t._v("注意 "),a("code",[t._v("<mapper>")]),t._v(" 的 "),a("code",[t._v("resource")]),t._v(" 属性后写的是 “目录路径” 不是 “包路径”。需要用 "),a("code",[t._v("/")]),t._v(" 表示目录层级关系；")])]),t._v(" "),a("h4",{attrs:{id:"编写测试类，来执行查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写测试类，来执行查询"}},[t._v("#")]),t._v(" 编写测试类，来执行查询")]),t._v(" "),a("ul",[a("li",[t._v("接下来就可以进行测试刚刚配置好的方法了；")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取配置文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStream")]),t._v(" in "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResourceAsStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SqlMapConfig.xml"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlSessionFactoryBuilder")]),t._v(" builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlSessionFactoryBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个 SqlSession 对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlSessionFactory")]),t._v(" factory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SqlSession")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("openSession")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 Mybatis 帮你创建的接口实现类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),t._v(" userMapper "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用方法，获取结果")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" users "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭 sqlsession，关闭 InputStream")]),t._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("通过 Resources 实例类，来读取 Mybatis 配置文件；")]),t._v(" "),a("li",[t._v("然后使用 SqlSessionFactoryBuilder 来用刚刚读取的配置文件，创建 SqlSessionFactory 工厂对象，创建时它会在内部对配置进行解析；")]),t._v(" "),a("li",[t._v("之后通过工厂对象创建一个 SqlSession 实例；")]),t._v(" "),a("li",[t._v("将接口类的字节码，传入到实例的 "),a("code",[t._v("getMapper")]),t._v(" 方法，可以获取到接口的实现类；")]),t._v(" "),a("li",[t._v("之后就能使用刚刚定义的 "),a("code",[t._v("selectAll")]),t._v(" 方法了；")]),t._v(" "),a("li",[t._v("下面👇是调用结果；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-3-1-17-49-57.png",alt:"2020-3-1-17-49-57.png"}})]),t._v(" "),a("h2",{attrs:{id:"mybatis-xml-方式的基本用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-xml-方式的基本用法"}},[t._v("#")]),t._v(" MyBatis XML 方式的基本用法")]),t._v(" "),a("h2",{attrs:{id:"mybatis-注解方式的基本用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-注解方式的基本用法"}},[t._v("#")]),t._v(" MyBatis 注解方式的基本用法")]),t._v(" "),a("h2",{attrs:{id:"mybatis-动态-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-动态-sql"}},[t._v("#")]),t._v(" MyBatis 动态 SQL")]),t._v(" "),a("h2",{attrs:{id:"mybatis-代码生成器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-代码生成器"}},[t._v("#")]),t._v(" MyBatis 代码生成器")])])}),[],!1,null,null,null);s.default=e.exports}}]);