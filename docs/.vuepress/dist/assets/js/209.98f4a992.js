(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{420:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mongodb-基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-基础知识"}},[t._v("#")]),t._v(" MongoDB 基础知识")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/core/document/",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"什么是-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-mongodb"}},[t._v("#")]),t._v(" 什么是 MongoDB")]),t._v(" "),a("p",[t._v("MongoDB 是一个基于分布式文件存储的数据库.\n属于 NoSql (非关系型数据库) 的一种\n旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。")]),t._v(" "),a("p",[t._v("MongoDB 是一个介于关系数据库和非关系数据库之间的产品")]),t._v(" "),a("p",[t._v("MongoDB 将数据存储为一个文档，数据结构由键值(key => value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。")]),t._v(" "),a("h2",{attrs:{id:"概念解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概念解析"}},[t._v("#")]),t._v(" 概念解析")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("SQL术语/概念")]),t._v(" "),a("th",[t._v("MongoDB术语/概念")]),t._v(" "),a("th",[t._v("解释/说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("database")]),t._v(" "),a("td",[t._v("database")]),t._v(" "),a("td",[t._v("数据库")])]),t._v(" "),a("tr",[a("td",[t._v("table")]),t._v(" "),a("td",[t._v("collection")]),t._v(" "),a("td",[t._v("数据库表/集合")])]),t._v(" "),a("tr",[a("td",[t._v("row")]),t._v(" "),a("td",[t._v("document")]),t._v(" "),a("td",[t._v("数据记录行/文档")])]),t._v(" "),a("tr",[a("td",[t._v("column")]),t._v(" "),a("td",[t._v("field")]),t._v(" "),a("td",[t._v("数据字段/域")])]),t._v(" "),a("tr",[a("td",[t._v("index")]),t._v(" "),a("td",[t._v("index")]),t._v(" "),a("td",[t._v("索引")])]),t._v(" "),a("tr",[a("td",[t._v("table joins")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("表连接, MongoDB不支持")])]),t._v(" "),a("tr",[a("td",[t._v("primary key")]),t._v(" "),a("td",[t._v("primary key")]),t._v(" "),a("td",[t._v("主键, MongoDB自动将"),a("code",[t._v("_id")]),t._v("字段设置为主键")])])])]),t._v(" "),a("ul",[a("li",[t._v("文档 (document) 是 MongoDB 中数据的基本单元，非常类似于关系型数据库管理系统中的行")]),t._v(" "),a("li",[t._v("集合（collection）可以看作是一个拥有动态模式（dynamic schema）的表 (table)")]),t._v(" "),a("li",[t._v("数据库（database）用以存放集合, MongoDB 的一个实例可以拥有多个相互独立的数据库")]),t._v(" "),a("li",[t._v("主键 "),a("code",[t._v("_id")]),t._v(" 在文档所属的集合中是唯一的")])]),t._v(" "),a("h2",{attrs:{id:"数据库-database"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库-database"}},[t._v("#")]),t._v(" 数据库 - database")]),t._v(" "),a("p",[t._v("在 MongoDB 中，多个文档组成集合，而多个集合可以组成数据库")]),t._v(" "),a("p",[t._v("在 mongodb 中可以建立多个数据库。每个数据库都有独立的权限，即便是在磁盘上，不同的数据库也放置在不同的文件中。按照经验，我们将有关一个应用程序的所有数据都存储在同一个数据库中。要想在同一个MongoDB服务器上存放多个应用程序或者用户的数据，就需要使用不同的数据库。")]),t._v(" "),a("p",[t._v('MongoDB 的默认数据库为 "db"，该数据库存储在 data 目录中。')]),t._v(" "),a("h3",{attrs:{id:"数据库命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库命名"}},[t._v("#")]),t._v(" 数据库命名")]),t._v(" "),a("p",[t._v("数据库名可以是满足以下条件的任意 UTF-8 字符串:")]),t._v(" "),a("ul",[a("li",[t._v("不能是空字符串")]),t._v(" "),a("li",[t._v("不得含有 "),a("code",[t._v("空格")]),t._v("、"),a("code",[t._v(".")]),t._v("、"),a("code",[t._v("$")]),t._v("、"),a("code",[t._v("/")]),t._v("、"),a("code",[t._v("\\")]),t._v(" 和 "),a("code",[t._v("\\0 (空字符)")])]),t._v(" "),a("li",[t._v("数据库名区分大小写, 推荐全部小写")]),t._v(" "),a("li",[t._v("最多64字节")])]),t._v(" "),a("p",[t._v("记住一点，数据库最终会变成文件系统里的文件，而数据库名就是相应的文件名")]),t._v(" "),a("p",[t._v("有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("admin")]),t._v(': 从权限的角度来看，这是 "root" 数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。')]),t._v(" "),a("li",[a("code",[t._v("local")]),t._v(": 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合")]),t._v(" "),a("li",[a("code",[t._v("config")]),t._v(": 当 Mongo 用于分片设置时，config 数据库在内部使用，用于保存分片的相关信息。")])]),t._v(" "),a("h3",{attrs:{id:"基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),a("h4",{attrs:{id:"显示数据库列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示数据库列表"}},[t._v("#")]),t._v(" 显示数据库列表")]),t._v(" "),a("p",[a("code",[t._v("show dbs")]),t._v(" 命令可以显示数据库列表。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show dbs\nadmin   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".000GB\nconfig  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".000GB\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".000GB\n")])])]),a("h4",{attrs:{id:"显示当前数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示当前数据库"}},[t._v("#")]),t._v(" 显示当前数据库")]),t._v(" "),a("p",[a("code",[t._v("db")]),t._v(" 命令可以显示当前数据库对象或集合。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])])]),a("h4",{attrs:{id:"创建-切换-数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-切换-数据库"}},[t._v("#")]),t._v(" 创建/切换 数据库")]),t._v(" "),a("p",[a("code",[t._v("use")]),t._v(" + "),a("code",[t._v("数据库名")]),t._v(" 命令可以连接到一个指定的数据库, 如果数据库不存在，则创建数据库.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" use mytest\nswitched to db mytest\n")])])]),a("p",[t._v("刚创建的数据库并不在数据库的列表中, 要显示它，我们需要向数据库插入一些数据。")]),t._v(" "),a("p",[t._v("MongoDB 中默认的数据库为 "),a("code",[t._v("test")])]),t._v(" "),a("h4",{attrs:{id:"删除数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除数据库"}},[t._v("#")]),t._v(" 删除数据库")]),t._v(" "),a("p",[a("code",[t._v("db.dropDatabase()")]),t._v(" 命令可以删除当前数据库.")]),t._v(" "),a("h2",{attrs:{id:"集合-collection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集合-collection"}},[t._v("#")]),t._v(" 集合 - collection")]),t._v(" "),a("p",[t._v("集合就是一组文档，如果将MongoDB中的一个文档比喻为关系型数据库中的一行，那么一个集合就相当于一张表。")]),t._v(" "),a("p",[t._v("集合存在于数据库中，集合没有固定的结构，一个集合里面的文档可以是各式各样的，这被称为 『 动态模式 』")]),t._v(" "),a("p",[t._v("实例:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.baidu.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"百度"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.google.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Google"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.runoob.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"num"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("虽然 MongoDB 对集合中的文档类型没有要求, 但通常情况下我们插入集合的数据都会有一定的关联性.  这么做有如下几个原因:")]),t._v(" "),a("ul",[a("li",[t._v("一个集合里存放多种类型的文档, 会增加开发人员查询特定类型文档的难度.")]),t._v(" "),a("li",[t._v("在包含多个文档类型的集合中查找数据速度也会变慢, 会降低性能.")]),t._v(" "),a("li",[t._v("创建索引时，需要使用文档的附加结构（特别是创建唯一索引时）。索引是按照集合来定义的。在一个集合中只放入一种类型的文档，可以更有效地对集合进行索引.")])]),t._v(" "),a("p",[t._v("当第一个文档插入时，集合就会被创建。")]),t._v(" "),a("h3",{attrs:{id:"集合命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集合命名"}},[t._v("#")]),t._v(" 集合命名:")]),t._v(" "),a("ul",[a("li",[t._v("集合名不能是空字符串。")]),t._v(" "),a("li",[t._v("集合名不能含有 "),a("code",[t._v("\\0（空字符)")]),t._v("，这个字符表示集合名的结尾。")]),t._v(" "),a("li",[t._v("集合名不能以 "),a("code",[t._v("system.")]),t._v(" 开头，这是为系统集合保留的前缀。")]),t._v(" "),a("li",[t._v("用户创建的集合名字不能含有保留字符。有些驱动程序的确支持在集合名里面包含，这是因为某些系统生成的集合中包含该字符。除非你要访问这种系统创建的集合，否则千万不要在名字里出现 "),a("code",[t._v("$")]),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"子集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子集合"}},[t._v("#")]),t._v(" 子集合")]),t._v(" "),a("p",[t._v("组织集合的一种惯例是使用“.”分隔不同命名空间的子集合。例如，一个具有博客功能的应用可能包含两个集合，分别是 "),a("code",[t._v("blog.posts")]),t._v(" 和 "),a("code",[t._v("blog.authors")]),t._v("。这是为了使组织结构更清晰，这里的 blog 集合（这个集合甚至不需要存在）跟它的子集合没有任何关系。")]),t._v(" "),a("p",[t._v("在 MongoDB 中，使用子集合来组织数据非常高效，值得推荐。")]),t._v(" "),a("h3",{attrs:{id:"基本操作-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作-2"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),a("h4",{attrs:{id:"查看已有集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看已有集合"}},[t._v("#")]),t._v(" 查看已有集合")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show collections\ntest1\ntest2\ntest3\n")])])]),a("h4",{attrs:{id:"创建集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建集合"}},[t._v("#")]),t._v(" 创建集合")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("createCollection()")]),t._v(" 方法来创建集合。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.createCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name, options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[t._v("name: 要创建的集合名称")]),t._v(" "),a("li",[t._v("options: 可选参数, 指定有关内存大小及索引的选项")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("capped")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("（可选）如果为 true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。当该值为 true 时，必须指定 size 参数。")])]),t._v(" "),a("tr",[a("td",[t._v("autoIndexId")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("（可选）如为 true，自动在 _id 字段创建索引。默认为 false。")])]),t._v(" "),a("tr",[a("td",[t._v("size")]),t._v(" "),a("td",[t._v("数值")]),t._v(" "),a("td",[t._v("（可选）为固定集合指定一个最大值（以字节计）。如果 capped 为 true，也需要指定该字段。")])]),t._v(" "),a("tr",[a("td",[t._v("max")]),t._v(" "),a("td",[t._v("数值")]),t._v(" "),a("td",[t._v("（可选）指定固定集合中包含文档的最大数量。")])])])]),t._v(" "),a("p",[t._v("在插入文档时，MongoDB 首先检查固定集合的 size 字段，然后检查 max 字段。")]),t._v(" "),a("h4",{attrs:{id:"插入集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插入集合"}},[t._v("#")]),t._v(" 插入集合")]),t._v(" "),a("p",[t._v("在 MongoDB 中，你不需要创建集合。当你插入一些文档时，MongoDB 会自动创建集合。")]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.COLLECTION_NAME.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DOCUMENT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.test4.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test4'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nWriteResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nInserted"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show collections\ntest1\ntest2\ntest3\ntest4\n")])])]),a("h4",{attrs:{id:"删除集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除集合"}},[t._v("#")]),t._v(" 删除集合")]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.COLLECTION_NAME.drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("\b实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.mycol2.drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("如果成功删除选定集合，则 "),a("code",[t._v("drop()")]),t._v(" 方法返回 "),a("code",[t._v("true")]),t._v("，否则返回 "),a("code",[t._v("false")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"文档-document"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档-document"}},[t._v("#")]),t._v(" 文档 - document")]),t._v(" "),a("p",[t._v("文档是 MongoDB 的核心概念。文档就是键值对的一个有序集.")]),t._v(" "),a("p",[t._v("文档的数据结构和 JSON 基本一样。所有存储在集合中的数据都是 BSON 格式。")]),t._v(" "),a("p",[t._v("BSON 是一种类似于 JSON 的二进制形式的存储格式, 简称 Binary JSON。")]),t._v(" "),a("p",[t._v("\b实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"site"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.runoob.com"')]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v('"site"')]),t._v(" 和 "),a("code",[t._v('"name"')]),t._v(' 是这个文档的 "键" (key), '),a("code",[t._v('"www.runoob.com"')]),t._v(" 和 "),a("code",[t._v('"菜鸟教程"')]),t._v(' 是 "值" (value)')]),t._v(" "),a("p",[t._v("文档中的值可以是多种不同的数据类型.  在一个集合中各个文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型.")]),t._v(" "),a("p",[t._v("MongoDB 区分类型和大小写. 例如，下面的两个文档是不同的：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"文档键命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档键命名"}},[t._v("#")]),t._v(" 文档键命名")]),t._v(" "),a("ul",[a("li",[t._v("文档的键是字符串")]),t._v(" "),a("li",[t._v("键不能含有 "),a("code",[t._v("\\0 (空字符)")]),t._v("。这个字符用来表示键的结尾")]),t._v(" "),a("li",[a("code",[t._v(".")]),t._v(" 和 "),a("code",[t._v("$")]),t._v(" 有特别的意义，只有在特定环境下才能使用")]),t._v(" "),a("li",[t._v("以下划线 "),a("code",[t._v("_")]),t._v(" 开头的键是保留的 (不是严格要求的)")]),t._v(" "),a("li",[t._v("一个文档内不能有重复的键")])]),t._v(" "),a("h3",{attrs:{id:"基本操作-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作-3"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),a("h4",{attrs:{id:"插入文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插入文档"}},[t._v("#")]),t._v(" 插入文档")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("insert()")]),t._v(" 或 "),a("code",[t._v("save()")]),t._v(" 方法向集合中插入文档, 如果该集合不在该数据库中， MongoDB 会自动创建该集合并插入文档.")]),t._v(" "),a("p",[t._v("\b语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.COLLECTION_NAME.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("插入文档到 col 集合中:")]),t._v(" "),a("p",[t._v("\b实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),t._v(", \n    description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 是一个 Nosql 数据库'")]),t._v(",\n    by: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'菜鸟教程'")]),t._v(",\n    url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.runoob.com'")]),t._v(",\n    tags: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'database'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NoSQL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    likes: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("也可以将文档定义为一个变量:")]),t._v(" "),a("p",[t._v("\b实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" document "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("title: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),t._v(", \n    description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 是一个 Nosql 数据库'")]),t._v(",\n    by: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'菜鸟教程'")]),t._v(",\n    url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.runoob.com'")]),t._v(",\n    tags: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'database'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NoSQL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    likes: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nWriteResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nInserted"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n")])])]),a("h4",{attrs:{id:"查看已插入文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看已插入文档"}},[t._v("#")]),t._v(" 查看已插入文档")]),t._v(" "),a("p",[t._v("\b语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.COLLECTION_NAME.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("\b实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col."),a("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_id"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"56064886ade2f21f36b03134"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB 教程"')]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB 是一个 Nosql 数据库"')]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.runoob.com"')]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tags"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongodb"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"database"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NoSQL"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"likes"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"更新文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新文档"}},[t._v("#")]),t._v(" 更新文档")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("update()")]),t._v(" 和 "),a("code",[t._v("save()")]),t._v(" 方法来更新集合中的文档")]),t._v(" "),a("p",[a("code",[t._v("update()")]),t._v(" 方法用于更新已存在的文档:")]),t._v(" "),a("p",[t._v("\b语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     upsert: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("boolean"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n     multi: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("boolean"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n     writeConcern: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("query")]),t._v(" : update 的查询条件，类似 sql update 查询内 where 后面的。")]),t._v(" "),a("li",[a("code",[t._v("update")]),t._v(" : update 的对象和一些更新的操作符（如 "),a("code",[t._v("$")]),t._v(","),a("code",[t._v("$inc")]),t._v("...）等，也可以理解为 sql update 查询内 set 后面的")]),t._v(" "),a("li",[a("code",[t._v("upsert")]),t._v(" : 可选，这个参数的意思是，如果不存在 update 的记录，是否插入 objNew , true 为插入，默认是 false，不插入。")]),t._v(" "),a("li",[a("code",[t._v("multi")]),t._v(" : 可选，mongodb 默认是 false,只更新找到的第一条记录，如果这个参数为 true, 就把按条件查出来多条记录全部更新。")]),t._v(" "),a("li",[a("code",[t._v("writeConcern")]),t._v(" : 可选，抛出异常的级别。")])]),t._v(" "),a("p",[t._v("\b实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 是一个 Nosql 数据库'")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'菜鸟教程'")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.runoob.com'")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tags"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'database'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NoSQL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"likes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$set")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nWriteResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nMatched"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nUpserted"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nModified"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("."),a("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("pretty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_id"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"56064f89ade2f21f36b03136"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB 是一个 Nosql 数据库"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.runoob.com"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tags"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongodb"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"database"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NoSQL"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"likes"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[a("code",[t._v("save()")]),t._v(" 方法通过传入的文档来替换已有文档。")]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     writeConcern: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("document")]),t._v(" : 文档数据。")]),t._v(" "),a("li",[a("code",[t._v("writeConcern")]),t._v(" :可选，抛出异常的级别。")])]),t._v(" "),a("p",[t._v("实例:")]),t._v(" "),a("p",[t._v("以下实例中我们替换了 _id 为 "),a("code",[t._v("56064f89ade2f21f36b03136")]),t._v(" 的文档数据：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("db.col.save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_id"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"56064f89ade2f21f36b03136"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB 是一个 Nosql 数据库"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Runoob"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.runoob.com"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tags"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongodb"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NoSQL"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"likes"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("110")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"删除文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除文档"}},[t._v("#")]),t._v(" 删除文档")]),t._v(" "),a("p",[a("code",[t._v("remove()")]),t._v("方法用来移除集合中的数据")]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     justOne: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("boolean"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",\n     writeConcern: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("query")]),t._v(" :（可选）删除的文档的条件。")]),t._v(" "),a("li",[a("code",[t._v("justOne")]),t._v(" : （可选）如果设为 true 或 1，则只删除一个文档。")]),t._v(" "),a("li",[a("code",[t._v("writeConcern")]),t._v(" :（可选）抛出异常的级别。")])]),t._v(" "),a("p",[t._v("实例\b:")]),t._v(" "),a("p",[t._v("移除 "),a("code",[t._v("title")]),t._v(" 为 'MongoDB 教程' 的文档:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nWriteResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nRemoved"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除了两条数据")]),t._v("\n")])])]),a("p",[t._v("只想删除第一条找到的记录可以设置 "),a("code",[t._v("justOne")]),t._v(" 为 "),a("code",[t._v("1")]),t._v(":")]),t._v(" "),a("p",[t._v("实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("删除所有数据，可以使用以下方式:")]),t._v(" "),a("p",[t._v("实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"查询文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询文档"}},[t._v("#")]),t._v(" 查询文档")]),t._v(" "),a("p",[t._v("查询文档使用 "),a("code",[t._v("find()")]),t._v(" 方法")]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query, projection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("query")]),t._v(" ：可选，使用查询操作符指定查询条件")]),t._v(" "),a("li",[a("code",[t._v("projection")]),t._v(" ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。")])]),t._v(" "),a("p",[t._v("需要以易读的方式来读取数据，可以使用 "),a("code",[t._v("pretty()")]),t._v(" 方法:")]),t._v(" "),a("p",[t._v("实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.col.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("操作")]),t._v(" "),a("th",[t._v("格式")]),t._v(" "),a("th",[t._v("范例")]),t._v(" "),a("th",[t._v("RDBMS中的类似语句")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:<value>}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"by":"菜鸟教程"}).pretty()')])]),t._v(" "),a("td",[t._v("where by = '菜鸟教程'")])]),t._v(" "),a("tr",[a("td",[t._v("小于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$lt:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$lt:50}}).pretty()')])]),t._v(" "),a("td",[t._v("where likes < 50")])]),t._v(" "),a("tr",[a("td",[t._v("小于或等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$lte:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$lte:50}}).pretty()')])]),t._v(" "),a("td",[t._v("where likes <= 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$gt:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$gt:50}}).pretty()')])]),t._v(" "),a("td",[t._v("where likes > 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于或等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$gte:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$gte:50}}).pretty()')])]),t._v(" "),a("td",[t._v("where likes >= 50")])]),t._v(" "),a("tr",[a("td",[t._v("不等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$ne:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$ne:50}}).pretty()')])]),t._v(" "),a("td",[t._v("where likes != 50")])])])]),t._v(" "),a("p",[a("strong",[t._v("AND 条件:")])]),t._v(" "),a("p",[a("code",[t._v("find()")]),t._v(" 方法可以传入多个键 ( key )，每个键 ( key ) 以逗号隔开.")]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("key1:value1, key2:value2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("OR 条件:")])]),t._v(" "),a("p",[t._v("OR 条件语句使用了关键字 "),a("code",[t._v("$or")])]),t._v(" "),a("p",[t._v("语法:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$or")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("key1: value1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("key2:value2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("AND 和 OR 联合使用:")]),t._v(" "),a("p",[t._v("实例:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("db.col.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"likes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gt")]),t._v(":50"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", \n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$or")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB 教程"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等价于 WHERE likes > 50 AND (by = '菜鸟教程' OR title = 'MongoDB 教程')")]),t._v("\n")])])]),a("h2",{attrs:{id:"元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#元数据"}},[t._v("#")]),t._v(" 元数据")]),t._v(" "),a("p",[t._v("不太懂, 下回再说")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.runoob.com/mongodb/mongodb-databases-documents-collections.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[t._v("#")]),t._v(" 数据类型")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("数据类型")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("String")]),t._v(" "),a("td",[t._v("字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。")])]),t._v(" "),a("tr",[a("td",[t._v("Integer")]),t._v(" "),a("td",[t._v("整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。")])]),t._v(" "),a("tr",[a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("布尔值。用于存储布尔值（真/假）。")])]),t._v(" "),a("tr",[a("td",[t._v("Double")]),t._v(" "),a("td",[t._v("双精度浮点值。用于存储浮点值。")])]),t._v(" "),a("tr",[a("td",[t._v("Min/Max keys")]),t._v(" "),a("td",[t._v("将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。")])]),t._v(" "),a("tr",[a("td",[t._v("Array")]),t._v(" "),a("td",[t._v("用于将数组或列表或多个值存储为一个键。")])]),t._v(" "),a("tr",[a("td",[t._v("Timestamp")]),t._v(" "),a("td",[t._v("时间戳。记录文档修改或添加的具体时间。")])]),t._v(" "),a("tr",[a("td",[t._v("Object")]),t._v(" "),a("td",[t._v("用于内嵌文档。")])]),t._v(" "),a("tr",[a("td",[t._v("Null")]),t._v(" "),a("td",[t._v("用于创建空值。")])]),t._v(" "),a("tr",[a("td",[t._v("Symbol")]),t._v(" "),a("td",[t._v("符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。")])]),t._v(" "),a("tr",[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v("日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。")])]),t._v(" "),a("tr",[a("td",[t._v("Object ID")]),t._v(" "),a("td",[t._v("对象 ID。用于创建文档的 ID。")])]),t._v(" "),a("tr",[a("td",[t._v("Binary Data")]),t._v(" "),a("td",[t._v("二进制数据。用于存储二进制数据。")])]),t._v(" "),a("tr",[a("td",[t._v("Code")]),t._v(" "),a("td",[t._v("代码类型。用于在文档中存储 JavaScript 代码。")])]),t._v(" "),a("tr",[a("td",[t._v("Regular expression")]),t._v(" "),a("td",[t._v("正则表达式类型。用于存储正则表达式。")])])])]),t._v(" "),a("h3",{attrs:{id:"objectid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#objectid"}},[t._v("#")]),t._v(" ObjectId")]),t._v(" "),a("p",[t._v("ObjectId 类似唯一主键，可以很快的去生成和排序，包含 12 bytes")]),t._v(" "),a("ul",[a("li",[t._v("前 4 个字节表示创建 unix 时间戳,格林尼治时间 UTC 时间，比北京时间晚了 8 个小时")]),t._v(" "),a("li",[t._v("接下来的 3 个字节是机器标识码")]),t._v(" "),a("li",[t._v("紧接的两个字节由进程 id 组成 PID")]),t._v(" "),a("li",[t._v("最后三个字节是随机数")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/cB7Ce75.jpg",alt:"2875754375-5a19268f0fd9b_articlex"}})]),t._v(" "),a("p",[t._v("MongoDB 中存储的文档必须有一个 "),a("code",[t._v("_id")]),t._v(" 键。这个键的值可以是任何类型的，默认是个 ObjectId 对象")]),t._v(" "),a("p",[t._v("由于 ObjectId 中保存了创建的时间戳，所以你不需要为你的文档保存时间戳字段\n可以通过 "),a("code",[t._v("getTimestamp")]),t._v(" 函数来获取文档的创建时间")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" var newObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" newObject.getTimestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nISODate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2017-11-25T07:21:10Z"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ObjectId 转为字符串:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" newObject.str\n\n5a1919e63df83ce79df8b38f\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);