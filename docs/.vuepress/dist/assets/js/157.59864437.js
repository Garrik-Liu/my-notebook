(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{367:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"servlet-filter-listener"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#servlet-filter-listener"}},[t._v("#")]),t._v(" Servlet & Filter & Listener")]),t._v(" "),a("h2",{attrs:{id:"什么是-servlet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-servlet"}},[t._v("#")]),t._v(" 什么是 Servlet")]),t._v(" "),a("ul",[a("li",[t._v("Servlet 是运行在服务器的 Java 小程序，是 sun 公司提供的一套规范（接口）")]),t._v(" "),a("li",[t._v("用来处理客户端请求，和发出响应；")]),t._v(" "),a("li",[t._v("当服务器收到请求，就会按照一定的规则调用代码，然后返回给客户端响应；")])]),t._v(" "),a("h2",{attrs:{id:"servlet-快速入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#servlet-快速入门"}},[t._v("#")]),t._v(" Servlet 快速入门")]),t._v(" "),a("h3",{attrs:{id:"创建-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-service"}},[t._v("#")]),t._v(" 创建 service")]),t._v(" "),a("ul",[a("li",[t._v("在项目目录中 "),a("code",[t._v("JavaResource/src")]),t._v(" 下，创建一个包名称为 "),a("code",[t._v("com.xxxx.servlet")]),t._v("；")]),t._v(" "),a("li",[t._v("在包中创建一个 class 文件，名为 "),a("code",[t._v("FirstServlet.java")]),t._v("；")]),t._v(" "),a("li",[t._v("在该 class 中实现 Servlet 接口，也就是实现它没有完成的方法：\n"),a("ul",[a("li",[t._v("主要是 "),a("code",[t._v("service")]),t._v(" 方法，该方法用于处理请求和返回；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-22-16-28-57.png",alt:"2020-1-22-16-28-57.png"}})]),t._v(" "),a("ul",[a("li",[t._v("在 "),a("code",[t._v("web.xml")]),t._v(" 中进行 Servlet 配置：\n"),a("ul",[a("li",[a("code",[t._v("<servlet>")]),t._v(" 里面定义 servlet 的名字，和类实现的位置；")]),t._v(" "),a("li",[a("code",[t._v("<servlet-mapping>")]),t._v(" 里面做一个映射，对应的 api 访问对应的服务；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-22-16-30-55.png",alt:"2020-1-22-16-30-55.png"}})]),t._v(" "),a("ul",[a("li",[t._v("在 "),a("code",[t._v("service")]),t._v(" 方法中，通过 "),a("code",[t._v("HttpServiceResponse")]),t._v(" 对象来进行响应：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-22-16-31-20.png",alt:"2020-1-22-16-31-20.png"}})]),t._v(" "),a("p",[t._v("之后访问对应的 URL 就可以对 Servlet 发起请求，并获得响应了。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-22-22-36-7.png",alt:"2020-1-22-22-36-7.png"}})]),t._v(" "),a("h3",{attrs:{id:"生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("init")]),t._v("：\n"),a("ul",[a("li",[t._v("默认，第一次接收到请求访问的时候创建对象，调用此方法；")]),t._v(" "),a("li",[t._v("对象被创建完后，会被缓存。之后接收请求，就不调用此方法了；")]),t._v(" "),a("li",[t._v("通过配置可以设置在服务器启动时创建对象，调用此方法：\n"),a("ul",[a("li",[t._v("通过 "),a("code",[t._v("<load-on-startup>")]),t._v(" 来让服务器启动时创建 servlet 对象；")]),t._v(" "),a("li",[t._v("中间的数字，是创建的优先级；")]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-24-13-16-31.png",alt:"2020-1-24-13-16-31.png"}})])])])])]),t._v(" "),a("li",[a("strong",[t._v("service")]),t._v("：\n"),a("ul",[a("li",[t._v("每次接收到请求的时候被调用；")])])]),t._v(" "),a("li",[a("strong",[t._v("destory")]),t._v("：\n"),a("ul",[a("li",[t._v("当 servel 销毁前被调用；")]),t._v(" "),a("li",[t._v("服务器关系，servlet 销毁；")])])])]),t._v(" "),a("h3",{attrs:{id:"servlet-配置信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#servlet-配置信息"}},[t._v("#")]),t._v(" Servlet 配置信息")]),t._v(" "),a("h4",{attrs:{id:"config-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-参数"}},[t._v("#")]),t._v(" config 参数")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("init")]),t._v(" 方法里的 ServletConfig 类型参数可以用来：\n"),a("ul",[a("li",[t._v("获取 servlet 的配置信息；")]),t._v(" "),a("li",[t._v("获取 web.xml 中的初始化参数；")]),t._v(" "),a("li",[t._v("获取 servletContext 上下文对象；")])])])]),t._v(" "),a("p",[t._v("在 xml 里定义初始化参数：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-24-14-44-18.png",alt:"2020-1-24-14-44-18.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-24-14-42-0.png",alt:"2020-1-24-14-42-0.png"}})]),t._v(" "),a("h4",{attrs:{id:"url-patten"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-patten"}},[t._v("#")]),t._v(" url-patten")]),t._v(" "),a("p",[t._v("web.xml 中 Servlet 对应的 url 匹配方式有三种：")]),t._v(" "),a("ul",[a("li",[t._v("完全匹配：\n"),a("ul",[a("li",[t._v("必须 url 和定义的路径完全一样，才可以匹配；")]),t._v(" "),a("li",[a("code",[t._v("<url-pattern>/FirstServlet</url-pattern>")])]),t._v(" "),a("li",[t._v("示例 URL："),a("code",[t._v("http://localhost:8080/myWeb/FirstServlet")])])])]),t._v(" "),a("li",[t._v("目录匹配：\n"),a("ul",[a("li",[t._v("只要 url 中包括了定义的路径，就可以匹配；")]),t._v(" "),a("li",[a("code",[t._v("<url-pattern>/FirstServlet/*</url-pattern>")])]),t._v(" "),a("li",[t._v("示例 URL："),a("code",[t._v("http://localhost:8080/myWeb/FirstServlet/123")])])])]),t._v(" "),a("li",[t._v("扩展名匹配：\n"),a("ul",[a("li",[t._v("只有 url 最后以定义的后缀结尾，就可以匹配；")]),t._v(" "),a("li",[a("code",[t._v("<url-pattern>*.FirstServlet</url-pattern>")])]),t._v(" "),a("li",[t._v("示例 URL："),a("code",[t._v("http://localhost:8080/myWeb/123.FirstServlet")])])])])]),t._v(" "),a("h4",{attrs:{id:"缺省-servlet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺省-servlet"}},[t._v("#")]),t._v(" 缺省 Servlet")]),t._v(" "),a("ul",[a("li",[t._v("访问的 Servlet 不存在时，就会找缺省的路径对应的 Servlet；")]),t._v(" "),a("li",[a("code",[t._v("<url-patternn>/</url-patternn>")])])]),t._v(" "),a("h4",{attrs:{id:"全局-web-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局-web-xml"}},[t._v("#")]),t._v(" 全局 web.xml")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-24-15-24-14.png",alt:"2020-1-24-15-24-14.png"}})]),t._v(" "),a("ul",[a("li",[t._v("应用所部署到的服务器也有一个 web.xml 文件；")]),t._v(" "),a("li",[t._v("它对于所有部署到服务器上的应用都有效；")]),t._v(" "),a("li",[t._v("之前没在应用里设置缺省 Servlet 的时候，就是应用的全局 web.xml 里的缺省 Servlet；")]),t._v(" "),a("li",[t._v("当在做路径匹配的时候，先去应用自己的 web.xml 查找，找不到再去全局的里面找；")])]),t._v(" "),a("h4",{attrs:{id:"静态资源加载过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态资源加载过程"}},[t._v("#")]),t._v(" 静态资源加载过程")]),t._v(" "),a("ul",[a("li",[t._v("在 "),a("code",[t._v("http://域名:端口/应用名/")]),t._v(" 后面写的静态资源，在被请求时，依旧去找有没有匹配的 Servlet。服务器会拿 "),a("code",[t._v("<url-pattern>")]),t._v(" 进行匹配；")]),t._v(" "),a("li",[t._v("如果有，则加载对应的 Servlet；")]),t._v(" "),a("li",[t._v("如果没有就去在应用目录下找缺省 Servlet；")]),t._v(" "),a("li",[t._v("如果应用自己没有缺省 Servlet，就去找全局的缺省 Servlet；")]),t._v(" "),a("li",[t._v("全局缺省 Servlet 对应是名为 default 的 Servlet；")]),t._v(" "),a("li",[t._v("default Servlet 会到当前应用的 WebContent 目录中去找对应名称的静态资源；")]),t._v(" "),a("li",[a("code",[t._v("http://域名:端口/应用名/")]),t._v(" 后面什么都不写，则默认去找 WebContent 目录中的 index.html 文件；")]),t._v(" "),a("li",[t._v("如果找到了，就响应给服务器；")]),t._v(" "),a("li",[t._v("如果没有，就报 404；")])]),t._v(" "),a("details",{staticClass:"custom-block details",attrs:{open:"open"}},[a("summary",[t._v("例子：")]),t._v(" "),a("p",[t._v("在项目 WebContent 下创建一个 haha.html 文件；")]),t._v(" "),a("p",[t._v("然后访问这个文件，服务器就会返回它；")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-24-15-44-57.png",alt:"2020-1-24-15-44-57.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-24-15-44-29.png",alt:"2020-1-24-15-44-29.png"}})])]),t._v(" "),a("h2",{attrs:{id:"反射机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反射机制"}},[t._v("#")]),t._v(" 反射机制")]),t._v(" "),a("h3",{attrs:{id:"类的加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类的加载"}},[t._v("#")]),t._v(" 类的加载")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("当程序要使用某个类时，如果类还没有加载到内存中。系统会通过"),a("strong",[t._v("加载，连接，初始化")]),t._v("三步来实现呢对类的初始化：")]),t._v(" "),a("ul",[a("li",[t._v("加载：将 class 文件读入内存，并为之创建一个 Class 对象（字节码对象）；")]),t._v(" "),a("li",[t._v("连接：\n"),a("ul",[a("li",[t._v("验证：是否有正确的内部结构，并与其他类协调一致；")]),t._v(" "),a("li",[t._v("准备：负责为类的静态成员分配内存，并设置默认初始化值；")])])]),t._v(" "),a("li",[t._v("初始化：初始化成员变量；")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("加载时机")]),t._v("：（执行以下操作时，会进行类的加载）")]),t._v(" "),a("ul",[a("li",[t._v("创建类的实例；")]),t._v(" "),a("li",[t._v("访问类的静态变量，为静态变量赋值；")]),t._v(" "),a("li",[t._v("调用类的静态方法；")]),t._v(" "),a("li",[t._v("初始化某个类的子类；")]),t._v(" "),a("li",[t._v("使用反射方式来强制创建某个类或者接口对应的 java.lang.Class 对象；")])])])]),t._v(" "),a("h3",{attrs:{id:"类加载器-class-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类加载器-class-loader"}},[t._v("#")]),t._v(" 类加载器 Class Loader")]),t._v(" "),a("ul",[a("li",[t._v("负责将 .class 文件加载到内存中，并为之生成对应的 Class 对象（字节码对象）；")]),t._v(" "),a("li",[t._v("我们并不需要掌握加载机制，但通过了解类加载机制，可以更好的了解程序运行；")]),t._v(" "),a("li",[t._v("类加载器分类：\n"),a("ul",[a("li",[t._v("根类加载器：负责 Java 核心类加载；")]),t._v(" "),a("li",[t._v("扩展类加载器：负责 jar 包的加载；")]),t._v(" "),a("li",[t._v("系统类加载器：负责 JVM 启动时，加载来自 java 命令的 class 文件；")])])])]),t._v(" "),a("h3",{attrs:{id:"什么是反射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是反射"}},[t._v("#")]),t._v(" 什么是反射")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("创建对象的三个阶段：")]),t._v(" "),a("ul",[a("li",[t._v("源文件阶段 “.java 文件”；")]),t._v(" "),a("li",[t._v("编译成字节码阶段 “.class 文件”；")]),t._v(" "),a("li",[t._v("创建对象阶段 “new 对象名称”；")])])]),t._v(" "),a("li",[a("p",[t._v("内省：在运行时能够获取 JavaBean 当中的属性名称和 get 和 set 方法；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("反射")])]),t._v(" "),a("ul",[a("li",[t._v("Java 反射机制是在运行状态中，对于任意的一个类，拿到字节码之后，都能访问这个类的所有属性和方法；")]),t._v(" "),a("li",[t._v("通过字节码还能创建对象；")]),t._v(" "),a("li",[a("strong",[t._v("这种动态获取信息以及动态调用对象的方法的功能被称为“反射机制”")]),t._v("；")]),t._v(" "),a("li",[t._v("要想使用反射，必须获取字节码文件；")])])]),t._v(" "),a("li",[a("p",[t._v("获取字节码文件：")]),t._v(" "),a("ul",[a("li",[t._v("Object 类的 "),a("code",[t._v("getClass()")]),t._v(" 方法；")]),t._v(" "),a("li",[t._v("静态属性 class；")]),t._v(" "),a("li",[t._v("Class 类中静态方法 "),a("code",[t._v("forName()")]),t._v("；")]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-22-23-19-31.png",alt:"2020-1-22-23-19-31.png"}})])])])]),t._v(" "),a("h3",{attrs:{id:"“反射机制”-实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#“反射机制”-实践"}},[t._v("#")]),t._v(" “反射机制” 实践")]),t._v(" "),a("h4",{attrs:{id:"通过字节码创建对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过字节码创建对象"}},[t._v("#")]),t._v(" 通过字节码创建对象")]),t._v(" "),a("p",[t._v("先创建一个类：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-23-0-15-32.png",alt:"2020-1-23-0-15-32.png"}})]),t._v(" "),a("p",[t._v("然后用字节码去创建对象：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-23-0-11-52.png",alt:"2020-1-23-0-11-52.png"}})]),t._v(" "),a("h4",{attrs:{id:"获取字段，设置字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取字段，设置字段"}},[t._v("#")]),t._v(" 获取字段，设置字段")]),t._v(" "),a("p",[a("strong",[t._v("获取公共字段")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("getField()")]),t._v(" 方法返回一个 Field 对象，该对象反射类中指定的 public 字段；")]),t._v(" "),a("li",[a("code",[t._v("set()")]),t._v(" 方法来为指定的对象，设置对应字段的值；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-23-0-17-5.png",alt:"2020-1-23-0-17-5.png"}})]),t._v(" "),a("p",[a("strong",[t._v("获取私有字段")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("getDeclaredField()")]),t._v(" 方法返回一个 Field 对象，该对象反射类中指定的已声明字段；")]),t._v(" "),a("li",[a("code",[t._v("setAccessible()")]),t._v(" 方法让私有字段变得允许访问；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-23-0-28-2.png",alt:"2020-1-23-0-28-2.png"}})]),t._v(" "),a("h4",{attrs:{id:"获取方法，执行方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取方法，执行方法"}},[t._v("#")]),t._v(" 获取方法，执行方法")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-23-0-38-7.png",alt:"2020-1-23-0-38-7.png"}})]),t._v(" "),a("h3",{attrs:{id:"tomcat-反射加载-servlet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-反射加载-servlet"}},[t._v("#")]),t._v(" Tomcat 反射加载 Servlet")]),t._v(" "),a("h2",{attrs:{id:"使用注解创建-servlet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用注解创建-servlet"}},[t._v("#")]),t._v(" 使用注解创建 Servlet")]),t._v(" "),a("ul",[a("li",[t._v("之前创建 Servlet 时，每次都要去 "),a("code",[t._v("web.xml")]),t._v(" 下添加 "),a("code",[t._v("<servlet>")]),t._v(" 和 "),a("code",[t._v("<servlet-mapping>")]),t._v("；")]),t._v(" "),a("li",[t._v("从 Servlet 3.0 开始，可以直接使用 “注解” 的形式去使用 Servlet；")]),t._v(" "),a("li",[t._v("创建过程：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-0-40-4.png",alt:"2020-1-26-0-40-4.png"}})]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-0-40-54.png",alt:"2020-1-26-0-40-54.png"}})]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-0-41-53.png",alt:"2020-1-26-0-41-53.png"}})]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-0-42-29.png",alt:"2020-1-26-0-42-29.png"}})])])]),t._v(" "),a("li",[t._v("创建好的 Servlet 上会有一个 "),a("code",[t._v('@WebServlet("/myServlet")')]),t._v(" ：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-0-54-20.png",alt:"2020-1-26-0-54-20.png"}})]),t._v(" "),a("li",[t._v("这个就是一个注解；")]),t._v(" "),a("li",[t._v("贴上注解之后，就不用去 web.xml 中手动配置了；")]),t._v(" "),a("li",[t._v("注解中括号内的内容，就是 url-pattern 的内容；")])])]),t._v(" "),a("li",[t._v("注意，为了让注解生效。"),a("code",[t._v("web.xml")]),t._v(" 当中的 "),a("code",[t._v("metadata-complete")]),t._v(" 要设置为 "),a("code",[t._v("false")]),t._v("。它表示，是否扫描类当中定义的注解；\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-0-58-7.png",alt:"2020-1-26-0-58-7.png"}})])])])]),t._v(" "),a("h2",{attrs:{id:"httpservlet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#httpservlet"}},[t._v("#")]),t._v(" HttpServlet")]),t._v(" "),a("ul",[a("li",[t._v("用上面 👆 方法，直接 new 的 Servlet 就是一个 HttpServlet；")]),t._v(" "),a("li",[t._v("HttpServlet 专门用来负责处理 http 请求与响应；")]),t._v(" "),a("li",[t._v("HttpServlet 是 GenericServlet 的子类；\n"),a("ul",[a("li",[a("code",[t._v("class HttpServlet extends GenericServlet")]),t._v("；")])])]),t._v(" "),a("li",[t._v("GenericServlet 实现了 Servlet 接口；\n"),a("ul",[a("li",[a("code",[t._v("class GenericServlet implements Servlet")]),t._v("；")])])]),t._v(" "),a("li",[t._v("HttpServlet 方法：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-1-14-15.png",alt:"2020-1-26-1-14-15.png"}})]),t._v(" "),a("li",[a("strong",[t._v("service 方法")]),t._v("：无论接收 get 或 post 请求，都执行；\n"),a("ul",[a("li",[t._v("一旦写了 service 方法，就并不会再执行 doGet 或 doPost 方法；")])])]),t._v(" "),a("li",[a("strong",[t._v("doGet 方法")]),t._v("：接收到 get 方法时执行；")]),t._v(" "),a("li",[a("strong",[t._v("doPost 方法")]),t._v("：接收到 post 方法时执行；")])])]),t._v(" "),a("li",[t._v("HttpServlet 内部方法调用过程：\n"),a("ul",[a("li",[t._v("当接收到一个请求，Tomcat 会先找对应的 Servlet 的 service 方法；")]),t._v(" "),a("li",[t._v("如果 Servlet 没有 service 方法，就去它的父类 HttpServlet 中找；\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-16-56-41.png",alt:"2020-1-26-16-56-41.png"}})])])]),t._v(" "),a("li",[t._v("父类当中找到 service 是参数为 ServletRequest，它会在内部把参数转化为 HttpServletRequest；")]),t._v(" "),a("li",[t._v("转换完毕后，会继续调用参数为 HttpServletRequest 的 service 方法；\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-16-57-35.png",alt:"2020-1-26-16-57-35.png"}})]),t._v(" "),a("li",[t._v("如果在自己实现的 HttpServlet 中，定义了 service 方法，那么就会覆盖上面这个方法。自己定义的 service 会被调用；")]),t._v(" "),a("li",[t._v("自己没有定义 service 方法的话，就会根据请求方法（get，post，put，delete）来调用对应的方法；")])])])])])]),t._v(" "),a("h2",{attrs:{id:"案例：用户登录功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#案例：用户登录功能"}},[t._v("#")]),t._v(" 案例：用户登录功能")]),t._v(" "),a("ul",[a("li",[t._v("需求： 用户输入用户名和密码，程序需要去数据库验证登录是否正确；")]),t._v(" "),a("li",[t._v("步骤：\n"),a("ul",[a("li",[t._v("到数据库创建一个 “用户表”:")]),t._v(" "),a("li",[t._v("编写 html 登录页面；")]),t._v(" "),a("li",[t._v("创建 LoginServlet；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-17-4-6.png",alt:"2020-1-26-17-4-6.png"}})]),t._v(" "),a("p",[t._v("创建用户表：")]),t._v(" "),a("ul",[a("li",[t._v("id；")]),t._v(" "),a("li",[t._v("name；")]),t._v(" "),a("li",[t._v("password；")]),t._v(" "),a("li",[t._v("email；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-17-11-7.png",alt:"2020-1-26-17-11-7.png"}})]),t._v(" "),a("p",[t._v("Java 项目中创建数据表的映射：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-17-12-31.png",alt:"2020-1-26-17-12-31.png"}})]),t._v(" "),a("p",[t._v("创建 HTML 页面：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-1-26-17-42-27.png",alt:"2020-1-26-17-42-27.png"}})]),t._v(" "),a("p",[t._v("创建 LoginServlet：")]),t._v(" "),a("ul",[a("li",[t._v("先创建一个 com.myWeb.login 包；")]),t._v(" "),a("li",[t._v("然后创建 Servlet；")]),t._v(" "),a("li",[t._v("里面只用 "),a("code",[t._v("service")]),t._v(" 方法就可以了；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-1-21-23-51.png",alt:"2020-2-1-21-23-51.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-1-21-27-41.png",alt:"2020-2-1-21-27-41.png"}})]),t._v(" "),a("p",[t._v("把 Servlet 对应的地址填写到 form 表单中：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-1-22-36-0.png",alt:"2020-2-1-22-36-0.png"}})]),t._v(" "),a("p",[t._v("在编写 LoginServlet 的业务逻辑之前，先引入 JDBC 相关 jar 包：")]),t._v(" "),a("ul",[a("li",[t._v("dbutils；")]),t._v(" "),a("li",[t._v("druid；")]),t._v(" "),a("li",[t._v("mysql-connector-java；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-1-22-33-41.png",alt:"2020-2-1-22-33-41.png"}})]),t._v(" "),a("p",[t._v("把之前用过的 JdbcUtil 文件，还有数据库配置文件引入项目。用以连接数据库：")]),t._v(" "),a("ul",[a("li",[t._v("注意，因为 resources 目录下的 db.properties 文件，在运行时已经被编译成字节码；")]),t._v(" "),a("li",[t._v("所以我们不能按照硬盘中的路径去获取配置文件；")]),t._v(" "),a("li",[t._v("需要通过这个方法："),a("code",[t._v('JDBCUtil.class.getClassLoader().getResource("db.properties").getPath()')])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-1-22-12-53.png",alt:"2020-2-1-22-12-53.png"}})]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("JDBCUtils 代码：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myWeb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Statement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alibaba"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("druid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DruidDataSourceFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" ds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取配置文件")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取配置文件字节码路径")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" db_properties_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"db.properties"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),t._v(" in "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("db_properties_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建数据源（连接池）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过配置文件创建数据源")]),t._v("\n      ds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DruidDataSourceFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取数据源")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取连接对象")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO Auto-generated catch block")]),t._v("\n      e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Statement")]),t._v(" st"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 释放资源")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("st "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        st"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("接下来，编写 LoginServlet 的业务逻辑：")]),t._v(" "),a("ul",[a("li",[t._v("获取请求参数；\n"),a("ul",[a("li",[t._v("使用 "),a("code",[t._v("request")]),t._v(" 对象的 "),a("code",[t._v("getParamter")]),t._v(" 方法；")])])]),t._v(" "),a("li",[t._v("使用 dbutils 连接到数据库；")]),t._v(" "),a("li",[t._v("检查用户名和密码是否正确；\n"),a("ul",[a("li",[t._v("登陆成功，显示用户所有信息；")]),t._v(" "),a("li",[t._v("登录失败，给出错误信息；")])])])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@WebServlet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/LoginServlet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoginServlet")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServlet")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取请求参数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 dbutils 连接到数据库")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryRunner")]),t._v(" qr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryRunner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 去数据库进行查询")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT * FROM user WHERE name = ? AND password = ?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" qr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanHandler")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO Auto-generated catch block")]),t._v("\n      e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查用户名和密码是否正确")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Login Success\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Login Fail"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"servletcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#servletcontext"}},[t._v("#")]),t._v(" ServletContext")]),t._v(" "),a("h4",{attrs:{id:"什么是-servletcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-servletcontext"}},[t._v("#")]),t._v(" 什么是 ServletContext")]),t._v(" "),a("ul",[a("li",[t._v("ServletContext 代表一个 web 应用的上下文对象；")]),t._v(" "),a("li",[t._v("里面封装的都是 web 应用相关信息；")]),t._v(" "),a("li",[t._v("一个 ServletContext 对应一个应用；")]),t._v(" "),a("li",[t._v("在服务器一启动的时候就会创建；")]),t._v(" "),a("li",[t._v("在服务器关闭的时候销毁；")])]),t._v(" "),a("h4",{attrs:{id:"获取上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取上下文"}},[t._v("#")]),t._v(" 获取上下文")]),t._v(" "),a("ul",[a("li",[t._v("通过 "),a("code",[t._v("init")]),t._v(" 方法当中的一个参数 "),a("code",[t._v("ServletConfig")]),t._v(" 来获取；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-14-39-11.png",alt:"2020-2-2-14-39-11.png"}})]),t._v(" "),a("h4",{attrs:{id:"获取-web-应用中某一个资源的绝对路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取-web-应用中某一个资源的绝对路径"}},[t._v("#")]),t._v(" 获取 Web 应用中某一个资源的绝对路径")]),t._v(" "),a("ul",[a("li",[t._v("通过 "),a("code",[t._v('context.getRealPath("文件名")')]),t._v(" 方法去获取路径;")]),t._v(" "),a("li",[t._v("它会将 Web 应用的根目录的绝对路径，和上面的文件名进行拼接；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-14-43-1.png",alt:"2020-2-2-14-43-1.png"}})]),t._v(" "),a("ul",[a("li",[t._v("因为写在 "),a("code",[t._v("src")]),t._v(" 目录下的文件会被编译成字节码，所以文件的路径也会改变；")]),t._v(" "),a("li",[t._v("需要使用类加载器，获取字节码文件目录的路径；")]),t._v(" "),a("li",[t._v("然后去字节码文件目录中获取资源的路径；")])]),t._v(" "),a("ul",[a("li",[t._v("下面 👇 项目中，在 "),a("code",[t._v("src")]),t._v(" 目录下，和 "),a("code",[t._v("com.myWeb.login")]),t._v(" 包下分别放了一个 "),a("code",[t._v("abc.html")]),t._v(" 文件；")]),t._v(" "),a("li",[t._v("代码中，各自展示了两个文件的路径的获取方法；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-16-40-12.png",alt:"2020-2-2-16-40-12.png"}})]),t._v(" "),a("h4",{attrs:{id:"servletcontext-是一个域对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#servletcontext-是一个域对象"}},[t._v("#")]),t._v(" ServletContext 是一个域对象")]),t._v(" "),a("ul",[a("li",[t._v("什么是域对象：能够存取数据的对象；")]),t._v(" "),a("li",[t._v("ServletContext 域对象的作用范围：\n"),a("ul",[a("li",[t._v("整个 Web 应用；")]),t._v(" "),a("li",[t._v("所有的 Servlet 都可以用它存取数据；")]),t._v(" "),a("li",[t._v("数据是可以共享的；")])])]),t._v(" "),a("li",[t._v("写数据："),a("code",[t._v("setAttribute(String name, Object value)")]),t._v("；")]),t._v(" "),a("li",[t._v("取数据："),a("code",[t._v("getAttribute(String name)")]),t._v("；")]),t._v(" "),a("li",[t._v("删数据："),a("code",[t._v("removeAttribute(String name)")]),t._v("；")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletConfig")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletContext")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getServletContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Garrik"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"response-对象-request-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-对象-request-对象"}},[t._v("#")]),t._v(" Response 对象 & Request 对象")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-17-8-55.png",alt:"2020-2-2-17-8-55.png"}})]),t._v(" "),a("ul",[a("li",[t._v("浏览器发送一个请求到 Tomcat 引擎；")]),t._v(" "),a("li",[t._v("引擎找到对应的 Web 应用，并创建 request 对象和 response 对象；")]),t._v(" "),a("li",[t._v("找到应用后，根据应用的 Web.xml 的 url-pattern 的内容创建 Servlet 对象；")]),t._v(" "),a("li",[t._v("之后调用 Servlet 对象的 service 方法，并且把 request 对象和 response 对象传入到方法中；")]),t._v(" "),a("li",[t._v("拿到 response 对象后，根据业务逻辑的需求，可以向其中写一些内容；")]),t._v(" "),a("li",[t._v("写完后，响应被存放到一个 response 缓冲区中；")]),t._v(" "),a("li",[t._v("当方法执行完之后，缓冲区中的数据就会被 Tomcat 取出；")]),t._v(" "),a("li",[t._v("然后 Tomcat 再向其中添加一些服务器相关信息；")]),t._v(" "),a("li",[t._v("之后把所有东西作为响应，返回给浏览器；")])]),t._v(" "),a("h3",{attrs:{id:"response-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-对象"}},[t._v("#")]),t._v(" Response 对象")]),t._v(" "),a("h4",{attrs:{id:"设置响应"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置响应"}},[t._v("#")]),t._v(" 设置响应")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-17-22-45.png",alt:"2020-2-2-17-22-45.png"}})]),t._v(" "),a("p",[a("strong",[t._v("设置响应行")]),t._v("：")]),t._v(" "),a("p",[a("code",[t._v("response.setState(int code)")])]),t._v(" "),a("p",[a("strong",[t._v("设置响应头")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("添加响应头：\n"),a("ul",[a("li",[t._v("字符串类型："),a("code",[t._v("addHeader(String name, String value)")])]),t._v(" "),a("li",[t._v("数值类型："),a("code",[t._v("addIntHeader(String name, Int value)")])]),t._v(" "),a("li",[t._v("日期类型："),a("code",[t._v("addDateHeader(String name, Date value)")])])])]),t._v(" "),a("li",[t._v("修改响应头：\n"),a("ul",[a("li",[t._v("字符串类型："),a("code",[t._v("setHeader(String name, String value)")])]),t._v(" "),a("li",[t._v("数值类型："),a("code",[t._v("setIntHeader(String name, Int value)")])]),t._v(" "),a("li",[t._v("日期类型："),a("code",[t._v("setDateHeader(String name, Date value)")])])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-17-26-49.png",alt:"2020-2-2-17-26-49.png"}})]),t._v(" "),a("p",[a("strong",[t._v("设置响应体")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("设置编码格式：\n"),a("ul",[a("li",[t._v("默认编码格式：")]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v('setCharacterEncoding("UTF-8")')]),t._v(" 方法，来设置编码格式为 “UTF-8”；")]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v('setHeader("Content-Type", "text/html;charset=UTF-8")')]),t._v(" 来告诉浏览器用 UTF-8 编码解析响应；")]),t._v(" "),a("li",[t._v("上面 👆 两个操作可以简写为："),a("code",[t._v('setContentType("text/html;charset=UTF-8")')])])])]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("write")]),t._v(" 方法来写：\n"),a("ul",[a("li",[a("code",[t._v('response.getWrite().write("要写的内容")')]),t._v("；\n"),a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-18-25-31.png",alt:"2020-2-2-18-25-31.png"}})])])]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("OutPutStream")]),t._v(" 方法来写：\n"),a("ul",[a("li",[t._v("通过二进制流的形式来输入，输出文件；")]),t._v(" "),a("li",[t._v("FileInputStream：\n"),a("ul",[a("li",[a("code",[t._v("read")]),t._v(" 方法读取一个字节；")]),t._v(" "),a("li",[a("code",[t._v("read(byte[] b)")]),t._v(" 一次读取多个字节，并存到数组 b 中；")]),t._v(" "),a("li",[a("code",[t._v("close")]),t._v(" 方法停止读取；")]),t._v(" "),a("li",[t._v("读取全部数据代码：")]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-18-36-51.png",alt:"2020-2-2-18-36-51.png"}})])])]),t._v(" "),a("li",[t._v("FileOutputStream：\n"),a("ul",[a("li",[t._v("通过 Response 对象的 "),a("code",[t._v("getOutputStream()")]),t._v(" 方法获取输出流；")]),t._v(" "),a("li",[t._v("通过输出流的 "),a("code",[t._v("write")]),t._v(" 方法来把内容写到缓冲区；")])])])])]),t._v(" "),a("li",[t._v("注意，"),a("code",[t._v("getWrite()")]),t._v(" 和 "),a("code",[t._v("getOutputStream()")]),t._v(" 不能同时使用；")])]),t._v(" "),a("h4",{attrs:{id:"响应图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应图片"}},[t._v("#")]),t._v(" 响应图片")]),t._v(" "),a("p",[t._v("用 OutPutStream 方法来响应一个图片给浏览器。")]),t._v(" "),a("ul",[a("li",[t._v("获取资源路径；")]),t._v(" "),a("li",[t._v("创建输入流，读取资源；")]),t._v(" "),a("li",[t._v("通过输出流，把资源写到响应缓冲区；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-19-51-10.png",alt:"2020-2-2-19-51-10.png"}})]),t._v(" "),a("h4",{attrs:{id:"文件下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件下载"}},[t._v("#")]),t._v(" 文件下载")]),t._v(" "),a("p",[t._v("需求：把服务器当中的文件下载到电脑中；")]),t._v(" "),a("ul",[a("li",[t._v("通过 "),a("code",[t._v("<a>")]),t._v(" 标签来发送一个 Servlet 请求，把文件名发给服务器；")]),t._v(" "),a("li",[t._v("设置 "),a("code",[t._v("Content-Type")]),t._v(" 为文件对应的 MIME 类型：\n"),a("ul",[a("li",[a("code",[t._v('response.setContentType("MIME 类型")')])])])]),t._v(" "),a("li",[t._v("设置 "),a("code",[t._v("Content-Disposition")]),t._v(" 响应头，告诉浏览器以附件的形式去下载文件，而不是自动解析：\n"),a("ul",[a("li",[a("code",[t._v('response.setHeader("Content-Disposition", "attachment;filename=文件名")')])])])]),t._v(" "),a("li",[t._v("通过二进制流的形式，读取文件，然后再写入到缓存区；")]),t._v(" "),a("li",[t._v("之后响应给浏览器；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-16-31.png",alt:"2020-2-2-20-16-31.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-15-53.png",alt:"2020-2-2-20-15-53.png"}})]),t._v(" "),a("h4",{attrs:{id:"重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[t._v("#")]),t._v(" 重定向")]),t._v(" "),a("ul",[a("li",[t._v("什么是重定向：\n"),a("ul",[a("li",[t._v("去服务器中找 Servlet_1；")]),t._v(" "),a("li",[t._v("Servlet_1 让我去找 Servlet_2；")]),t._v(" "),a("li",[t._v("于是我再发一个请求到 Servlet_2；")])])]),t._v(" "),a("li",[t._v("状态码：302；")]),t._v(" "),a("li",[t._v("特点：\n"),a("ul",[a("li",[t._v("要访问两次服务器；")]),t._v(" "),a("li",[t._v("浏览器地址栏发生变化；")])])]),t._v(" "),a("li",[t._v("设置重定向：\n"),a("ul",[a("li",[t._v("设置状态码：302")]),t._v(" "),a("li",[t._v("设置响应头："),a("code",[t._v("location: 新地址")]),t._v(" "),a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-17-31-38.png",alt:"2020-2-2-17-31-38.png"}})])])]),t._v(" "),a("li",[t._v("封装好的重定向方法：\n"),a("ul",[a("li",[t._v("通过 "),a("code",[t._v("sendRedirect")]),t._v(" 方法可以直接设置重定向；")]),t._v(" "),a("li",[t._v("上面 👆 的代码可以写成：")]),t._v(" "),a("li",[a("code",[t._v('response.sendRedirect("/bei/servlet2")')])])])]),t._v(" "),a("li",[t._v("定时刷新重定向：\n"),a("ul",[a("li",[t._v("通过响应头 "),a("code",[t._v("refresh: 时间;url=新地址")]),t._v(" 可以设置多少秒之后，重定向到新地址；")]),t._v(" "),a("li",[t._v("例如: "),a("code",[t._v('response.setHeader("refresh", "3;url=http://www.baidu.com")')])])])])]),t._v(" "),a("h3",{attrs:{id:"request-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-对象"}},[t._v("#")]),t._v(" Request 对象")]),t._v(" "),a("h4",{attrs:{id:"设置请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置请求"}},[t._v("#")]),t._v(" 设置请求")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-30-25.png",alt:"2020-2-2-20-30-25.png"}})]),t._v(" "),a("p",[a("strong",[t._v("获取请求行")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("获取请求方法："),a("code",[t._v("String getMethod()")]),t._v("：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-37-51.png",alt:"2020-2-2-20-37-51.png"}})])])]),t._v(" "),a("li",[t._v("获取请求资源：\n"),a("ul",[a("li",[a("code",[t._v("String getRequestURL()")]),t._v("：")]),t._v(" "),a("li",[a("code",[t._v("String getRequestURI()")]),t._v("：")]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-36-20.png",alt:"2020-2-2-20-36-20.png"}})])])]),t._v(" "),a("li",[t._v("获取应用名称："),a("code",[t._v("String getContextPath()")]),t._v("：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-36-34.png",alt:"2020-2-2-20-36-34.png"}})])])]),t._v(" "),a("li",[t._v("获取 GET 请求查询参数："),a("code",[t._v("String getQueryString()")]),t._v("：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-36-50.png",alt:"2020-2-2-20-36-50.png"}})])])])]),t._v(" "),a("p",[a("strong",[t._v("获取请求头")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("获取所有的请求头名称：\n"),a("ul",[a("li",[t._v("获取所有 “请求头名称” 组成的迭代器：")]),t._v(" "),a("li",[a("code",[t._v("Enumeration<String> headerNames = request.getHeaderNames()")])]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("headerNames.hasMoreElements()")]),t._v(" 判断是否指针后面还有元素；")]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("headerNames.nextElement()")]),t._v(" 将指针移到后一个元素上；")])])]),t._v(" "),a("li",[t._v("获取指定的请求头内容： - "),a("code",[t._v('request.getHeader("请求头名称")')])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-20-47-55.png",alt:"2020-2-2-20-47-55.png"}})]),t._v(" "),a("p",[a("strong",[t._v("获取请求体")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("获取一个值："),a("code",[t._v('request.getParameter("参数名称")')])]),t._v(" "),a("li",[t._v("获取多个值："),a("code",[t._v('request.getParameterValues("参数名称")')])]),t._v(" "),a("li",[t._v("获取所有请求参数名称：\n"),a("ul",[a("li",[a("code",[t._v("Enumeration<String> parameterNames = request.getParameterNames()")])])])]),t._v(" "),a("li",[t._v("获取所有请求参数：\n"),a("ul",[a("li",[a("code",[t._v("Map<String, String[]> parameterMap = request.getParameterMap()")])])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-21-7-34.png",alt:"2020-2-2-21-7-34.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-21-6-48.png",alt:"2020-2-2-21-6-48.png"}})]),t._v(" "),a("p",[a("strong",[t._v("中文请求乱码")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("可以通过 "),a("code",[t._v('request.setCharacterEncoding("UTF-8")')]),t._v(" 来设置请求体的编码格式；")]),t._v(" "),a("li",[t._v("但是这个方法只适用于 POST 请求；")])]),t._v(" "),a("h4",{attrs:{id:"请求转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求转发"}},[t._v("#")]),t._v(" 请求转发")]),t._v(" "),a("p",[a("strong",[t._v("重定向和请求转发的区别")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("重定向：\n"),a("ul",[a("li",[t._v("找到 Servlet_1，通过设置响应，告诉浏览器再次发请求到 Servlet_2；")]),t._v(" "),a("li",[t._v("总共发送两次请求；")]),t._v(" "),a("li",[t._v("地址栏会发生变化；")])])]),t._v(" "),a("li",[t._v("请求转发：\n"),a("ul",[a("li",[t._v("找到 Servlet_1，之后在 Servlet_1 当中直接转发给 Servlet_2；")]),t._v(" "),a("li",[t._v("只需要发送一次请求；")]),t._v(" "),a("li",[t._v("浏览器地址栏不会发生变化；")])])])]),t._v(" "),a("p",[a("strong",[t._v("实现转发")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("通过请求对象获取一个转发器：\n"),a("ul",[a("li",[a("code",[t._v('RequestDispatcher disp = request.getRequestDispatcher("/Servlet_2")')])])])]),t._v(" "),a("li",[t._v("通过转发器进行转发：\n"),a("ul",[a("li",[a("code",[t._v("disp.forward(request, response)")])])])])]),t._v(" "),a("p",[a("strong",[t._v("Request 域对象")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("在一次请求过程当中，request 是共享的；")]),t._v(" "),a("li",[t._v("在一个 Servlet 当中设置的参数，转发给另外一个 Servlet 也可以获取到；")])]),t._v(" "),a("p",[t._v("下图 👇 中，Servlet_1 中设置的参数，在 Servlet_2 中也可以获取：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-21-28-9.png",alt:"2020-2-2-21-28-9.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-2-21-28-24.png",alt:"2020-2-2-21-28-24.png"}})]),t._v(" "),a("h2",{attrs:{id:"filter-过滤器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filter-过滤器"}},[t._v("#")]),t._v(" Filter 过滤器")]),t._v(" "),a("h4",{attrs:{id:"过滤器介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过滤器介绍"}},[t._v("#")]),t._v(" 过滤器介绍")]),t._v(" "),a("ul",[a("li",[t._v("filter 是对客户端访问资源的过滤，符合条件放行，不符合条件不放行；")]),t._v(" "),a("li",[t._v("并且可以对目标资源，访问前后进行逻辑处理；")]),t._v(" "),a("li",[t._v("过滤器的访问流程：\n"),a("ul",[a("li",[t._v("在发送一个请求时， web 容器会先到 filter 当中，创建三个参数，res，req，chain；")]),t._v(" "),a("li",[t._v("请求在过滤器当中，被放行之后，才能够访问到对应的资源；")]),t._v(" "),a("li",[t._v("中间的过滤器可能有多个，在一个过滤器当中，可以调用另外一个过滤器；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-7-23-20-35.png",alt:"2020-2-7-23-20-35.png"}})]),t._v(" "),a("h4",{attrs:{id:"过滤器编写步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过滤器编写步骤"}},[t._v("#")]),t._v(" 过滤器编写步骤")]),t._v(" "),a("ul",[a("li",[t._v("编写一个过滤器类去实现 Filter 接口；\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-7-23-23-13.png",alt:"2020-2-7-23-23-13.png"}})])])]),t._v(" "),a("li",[t._v("在 web.xml 中进行配置：\n"),a("ul",[a("li",[t._v("配置 filter-class，给声明过滤器；")]),t._v(" "),a("li",[t._v("配置 filter-mapping，指明对哪些资源进行过滤；")]),t._v(" "),a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-7-23-24-51.png",alt:"2020-2-7-23-24-51.png"}})])])])]),t._v(" "),a("h4",{attrs:{id:"过滤器方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过滤器方法"}},[t._v("#")]),t._v(" 过滤器方法")]),t._v(" "),a("ul",[a("li",[t._v("init 方法：\n"),a("ul",[a("li",[t._v("当 filter 对象创建时调用；\n"),a("ul",[a("li",[t._v("服务器启动时创建 filter 对象；")])])]),t._v(" "),a("li",[t._v("参数：filterconfig\n"),a("ul",[a("li",[t._v("当前 filter 对象的配置信息；")])])])])]),t._v(" "),a("li",[t._v("dofitter 方法：\n"),a("ul",[a("li",[t._v("当匹配到 mapping 时调用 dofilter；")]),t._v(" "),a("li",[t._v("参数：res，req，FilterChain：\n"),a("ul",[a("li",[t._v("FilterChain：\n"),a("ul",[a("li",[t._v("过滤器链对象；")]),t._v(" "),a("li",[t._v("内部维护着各个 filter 的索引，并且知道所有 filter 的顺序；")]),t._v(" "),a("li",[t._v("是根据 mapping 的顺序来执行的；")])])])])])])]),t._v(" "),a("li",[t._v("destroy 方法：\n"),a("ul",[a("li",[t._v("当 filter 对象销毁时调用；")]),t._v(" "),a("li",[t._v("关闭服务器时销毁对象；")])])])]),t._v(" "),a("h2",{attrs:{id:"listner-监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#listner-监听器"}},[t._v("#")]),t._v(" Listner 监听器")]),t._v(" "),a("h4",{attrs:{id:"代理设计模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代理设计模式"}},[t._v("#")]),t._v(" 代理设计模式")]),t._v(" "),a("ul",[a("li",[t._v("什么是代理模式：当某一个对象发生某一个事件时，通知另一个对象，让另一个对象做某事")]),t._v(" "),a("li",[t._v("代理设计模式步骤：\n"),a("ul",[a("li",[t._v("定义协议；")]),t._v(" "),a("li",[t._v("遵守协议；")]),t._v(" "),a("li",[t._v("成为代理；")]),t._v(" "),a("li",[t._v("调用代理方法；")])])]),t._v(" "),a("li",[t._v("监听器的内部使用的就是代理模式；")])]),t._v(" "),a("h4",{attrs:{id:"监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听器"}},[t._v("#")]),t._v(" 监听器")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("什么是监听器：")]),t._v(" "),a("ul",[a("li",[t._v("能监听某个对象的状态变化的组件；")]),t._v(" "),a("li",[t._v("在 Java Web，中用来监听 “域对象“ 的变化；\n"),a("ul",[a("li",[t._v("request 域;")]),t._v(" "),a("li",[t._v("session 域;")]),t._v(" "),a("li",[t._v("servletContext 域;")])])])])]),t._v(" "),a("li",[a("p",[t._v("监听器相关的概念：")]),t._v(" "),a("ul",[a("li",[t._v("事件源：被监听的对象；")]),t._v(" "),a("li",[t._v("监听器：监听事件源的对象；")]),t._v(" "),a("li",[t._v("注册监听器：监听器与事件源相绑定；")]),t._v(" "),a("li",[t._v("响应行为：监听到事件源变化时，去做什么事情；")])])]),t._v(" "),a("li",[a("p",[t._v("监听器划分：")]),t._v(" "),a("ul",[a("li",[t._v("三个监听域对象的创建与销毁：\n"),a("ul",[a("li",[t._v("ServletContextListener")]),t._v(" "),a("li",[t._v("HttpSessionListener")]),t._v(" "),a("li",[t._v("ServletRequestListener")])])]),t._v(" "),a("li",[t._v("三个监听域对象当中属性变化：\n"),a("ul",[a("li",[t._v("ServletContextAttributeListener")]),t._v(" "),a("li",[t._v("HttpSessionAttributeListener")]),t._v(" "),a("li",[t._v("ServletRequestAttributeListener")])])])])])]),t._v(" "),a("h4",{attrs:{id:"监听器编写步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听器编写步骤"}},[t._v("#")]),t._v(" 监听器编写步骤")]),t._v(" "),a("ul",[a("li",[t._v("编写一个监听器类去实现监听器接口：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-7-23-17-4.png",alt:"2020-2-7-23-17-4.png"}})])])]),t._v(" "),a("li",[t._v("web.xml 中进行配置：\n"),a("ul",[a("li",[a("img",{attrs:{src:"https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-2-7-23-17-18.png",alt:"2020-2-7-23-17-18.png"}})])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);