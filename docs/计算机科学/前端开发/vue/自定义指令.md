# 自定义指令

在之前的学习里, 我们已经看到好多 Vue 指令了.  例如: `v-bind`, `v-on`, `v-if` 等等.  虽然这些内置的指令已经功能强大到足以满足大部分的业务需求.  但是有的时候我们还是需要自己去对 DOM 进行底层操作.  这时候就需要我们去自定义指令了.

## 注册指令

注册自定义指令和注册组件的方式很像, 分为全局注册, 和局部注册.  比如现在我们希望注册一个 `v-focus` 来让 `<input>` 元素在初始化时自动获得焦点.  

通过 `Vue.directive` 方法我们可以全局注册一个指令:

``` js
Vue.directive('focus', {
    // 指令选项
});
```

局部注册的话就在所在 Vue 组件的选项对象中下的 `directives` 属性中定义指令.

``` js
new Vue({
    el: `#app`,
    deirectives: {
        focues: {
            // 指令选项
        }
    }
})
```

注册完之后你就可以在模板中的元素上使用这个 `v-focus` 指令了.  注意, 注册的时候, 指令名不需要加 `v-`.  

上面代码只是注册了指令, 具体的功能还没实现.  线面介绍自定义指令的各个选项.

## 钩子函数

自定义指令的选项是有几个钩子函数组成的.

* `bind`: 只调用一次, 指令第一次绑定到元素的时候调用, 可以定义一个在绑定时执行一次的初始化动作.
* `inserted`: 被绑定元素插入父节点时调用 
* `update`: 被绑定元素所在的模板更新时调用
* `componentUpdated`: 被绑定元素所在的模板完成一次更新周期时调用
* `unbind`: 只调用一次, 指令从元素解绑时调用

### 钩子函数参数

指令钩子函数会被传入以下参数:

我们可以根据想要实现的功能, 在不同的钩子函数内写不同的代码逻辑.  例如上面的 `v-focus`, 我们希望元素在插入到父节点的时候就调用, 那很显然我们要在 `inserted` 钩子下写代码.

