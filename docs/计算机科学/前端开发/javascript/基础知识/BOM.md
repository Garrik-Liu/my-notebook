# BOM

BOM ( Browser Object Model ) æ˜¯æŒ‡æµè§ˆå™¨å¯¹è±¡æ¨¡å‹, BOM æä¾›äº†ä¸ç½‘é¡µå†…å®¹æ— å…³çš„ï¼Œå¯ä»¥ä¸æµè§ˆå™¨çª—å£è¿›è¡Œäº’åŠ¨çš„å¯¹è±¡ç»“æ„ã€‚

## `window` å¯¹è±¡

- [MDN æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/API/Window)
- [W3cubDocs æ–‡æ¡£](https://docs.w3cub.com/dom/window/)

window æ˜¯ BOM çš„æ ¸å¿ƒå¯¹è±¡, è¡¨ç¤ºæµè§ˆå™¨çš„ä¸€ä¸ªå®ä¾‹. åœ¨æµè§ˆå™¨ä¸­ï¼Œwindow å¯¹è±¡æœ‰åŒé‡è§’è‰²ï¼Œå®ƒæ—¢æ˜¯é€šè¿‡ JavaScript è®¿é—®æµè§ˆå™¨çª—å£çš„ä¸€ä¸ªæ¥å£ï¼Œåˆæ˜¯ ECMAScript è§„å®šçš„ Global å¯¹è±¡ã€‚

åœ¨æ ‡ç­¾æµè§ˆå™¨ï¼ˆæ¯”å¦‚ Firefoxï¼‰ä¸­ï¼Œæ¯ä¸ªæ ‡ç­¾å…·æœ‰è‡ªå·±çš„ window å¯¹è±¡, åŒä¸€ä¸ªçª—å£çš„æ ‡ç­¾ä¹‹é—´ä¸ä¼šå…±äº«ä¸€ä¸ª window å¯¹è±¡. æœ‰ä¸€äº›æ–¹æ³•ï¼Œå¦‚ window.resizeTo å’Œ window.resizeBy ä¹‹ç±»çš„æ–¹æ³•ä¼šä½œç”¨äºæ•´ä¸ªçª—å£è€Œä¸æ˜¯ window å¯¹è±¡æ‰€å±çš„é‚£ä¸ªæ ‡ç­¾ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå¦‚æœæ— æ³•æ°å½“åœ°ä½œç”¨äºæ ‡ç­¾ï¼Œåˆ™ä¼šå°†å…¶ä½œç”¨äºçª—å£ã€‚

### çª—å£å…³ç³»

- `window.top` å¯¹è±¡å§‹ç»ˆæŒ‡å‘æœ€ä¸Šå±‚ï¼ˆæœ€å¤–å±‚ï¼‰çª—å£ã€‚
- `window.parent` å¯¹è±¡åˆ™å§‹ç»ˆæŒ‡å‘å½“å‰çª—å£çš„çˆ¶çª—å£ã€‚å¦‚æœå½“å‰çª—å£æ˜¯æœ€ä¸Šå±‚çª—å£ï¼Œåˆ™ `parent` ç­‰äº `top`
- `window.self` å¯¹è±¡ï¼Œå§‹ç»ˆä¼šæŒ‡å‘ `window`

```js
window.top === window; // true
window.parent === window.top; // true
window.self === window; // true
```

### çª—å£ä½ç½® & åƒç´ æ¯”

åœ¨ Firefox ä¸­ `screenX` å’Œ `screenY` å±æ€§åˆ†åˆ«ç”¨äºè¡¨ç¤ºçª—å£ç›¸å¯¹äºå±å¹•å·¦è¾¹å’Œä¸Šè¾¹çš„è·ç¦»ã€‚

IEã€Safariã€Opera å’Œ Chrome ä¹Ÿéƒ½æä¾›äº† `screenLeft` å’Œ `screenTop` å±æ€§æ¥è¡¨ç¤ºç›¸åŒçš„ä½ç½®ä¿¡æ¯ã€‚

è·¨æµè§ˆå™¨å–å¾—è·ç¦»å€¼ï¼š

```js
var leftPos =
  typeof window.screenLeft == "number" ? window.screenLeft : window.screenX;
var topPos =
  typeof window.screenTop == "number" ? window.screenTop : window.screenY;
```

å¯ä»¥ä½¿ç”¨ `moveTo()` å’Œ `moveBy()` æ–¹æ³•ç§»åŠ¨çª—å£ ( ä¾æµè§ˆå™¨è€Œå®šï¼Œä»¥ä¸Šæ–¹æ³•å¯èƒ½ä¼šè¢«éƒ¨åˆ†æˆ–å…¨éƒ¨ç¦ç”¨ ) è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

- `moveTo()` æ¥æ”¶è¦ç§»åŠ¨åˆ°çš„æ–°ä½ç½®çš„ç»å¯¹åæ ‡ `x` å’Œ `y`ã€‚
- `moveBy()` åˆ™æ¥æ”¶ç›¸å¯¹å½“å‰ä½ç½®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šç§»åŠ¨çš„åƒç´ æ•°ã€‚

```js
// æŠŠçª—å£ç§»åŠ¨åˆ°å·¦ä¸Šè§’
window.moveTo(0, 0);

// æŠŠçª—å£å‘ä¸‹ç§»åŠ¨100åƒç´ 
window.moveBy(0, 100);

// æŠŠçª—å£ç§»åŠ¨åˆ°åæ ‡ä½ç½®(200, 300)
window.moveTo(200, 300);

// æŠŠçª—å£å‘å·¦ç§»åŠ¨50åƒç´ 
window.moveBy(-50, 0);
```

---

ã€ **CSS åƒç´ ** ã€æ˜¯ Web å¼€å‘ä¸­ä½¿ç”¨çš„ç»Ÿä¸€åƒç´ å•ä½ï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘å•ä½ï¼Œå¤§å°å›ºå®šä¸º 1/96 è‹±å¯¸ã€‚è¿™æ ·åœ¨ä¸åŒè®¾å¤‡ä¸Šï¼Œ1 ä¸ª CSS åƒç´ çš„å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ã€‚

- ğŸŒ° ä½åˆ†è¾¨ç‡å¹³æ¿è®¾å¤‡ä¸Š 12 CSS åƒç´ çš„æ–‡å­—ï¼Œåº”è¯¥ä¸é«˜æ¸… 4K å±å¹•ä¸‹ 12 CSS åƒç´ çš„æ–‡å­—å…·æœ‰ç›¸åŒå¤§å°ã€‚

ä½†æ˜¯ä¸åŒè®¾å¤‡å…·æœ‰ä¸åŒçš„ç‰©ç†åƒç´ æ•°é‡ï¼Œå³å±å¹•å®é™…çš„åˆ†è¾¨ç‡ã€‚æ‰€ä»¥éœ€è¦æŠŠç‰©ç†åƒç´ æ•°è½¬æ¢ä¸ºè½¬æ¢ä¸º CSS åƒç´ æ•°ã€‚ä¸åŒåƒç´ å¯†åº¦çš„å±å¹•ä¸‹å°±ä¼šæœ‰ä¸åŒçš„ã€Œ **ç¼©æ”¾ç³»æ•°** ã€

![2020-09-16-15-03-05](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-15-03-05.png)

ç‰©ç†åƒç´ ä¸ CSS åƒç´ ä¹‹é—´çš„è½¬æ¢æ¯”ç‡ç”± `window.devicePixelRatio` å±æ€§æä¾›ã€‚

- ğŸŒ° å¦‚æœ `window.devicePixelRatio` çš„å€¼æ˜¯ `3`ï¼Œåˆ™ 12 CSS åƒç´ çš„æ–‡å­—ï¼Œå®é™…ä¸Šå°±ä¼šç”¨ 36 åƒç´ çš„ç‰©ç†åƒç´ æ¥æ˜¾ç¤ºã€‚

### çª—å£å¤§å°

æä¾›äº† 4 ä¸ªå±æ€§ç¡®å®šä¸€ä¸ªçª—å£çš„å¤§å°:

- `innerWidth`: æµè§ˆå™¨è§†å£ï¼ˆ viewport ï¼‰å®½åº¦, åŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡
- `innerHeight`: æµè§ˆå™¨çª—å£çš„è§†å£ï¼ˆ viewport ï¼‰é«˜åº¦ï¼ŒåŒ…æ‹¬æ°´å¹³æ»šåŠ¨æ¡ã€‚
- `outerWidth`: æ•´ä¸ªæµè§ˆå™¨çª—å£çš„å®½åº¦ã€‚
- `outerHeight`: æ•´ä¸ªæµè§ˆå™¨çª—å£çš„é«˜åº¦ã€‚

![2020-09-16-08-11-21](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-08-11-21.png)

å¯ä»¥ä½¿ç”¨ `resizeTo()` å’Œ `resizeBy()` æ–¹æ³•è°ƒæ•´çª—å£å¤§å° ( å¯èƒ½è¢«æµè§ˆå™¨ç¦ç”¨ )

- `resizeTo()` æ¥æ”¶æ–°çš„å®½åº¦å’Œé«˜åº¦å€¼ã€‚
- `resizeBy()` æ¥æ”¶å®½åº¦å’Œé«˜åº¦å„è¦ç¼©æ”¾å¤šå°‘ã€‚

```js
// ç¼©æ”¾åˆ°100Ã—100
window.resizeTo(100, 100);

// ç¼©æ”¾åˆ°200Ã—150
window.resizeBy(100, 50);

// ç¼©æ”¾åˆ°300Ã—300
window.resizeTo(300, 300);
```

### è§†å£ä½ç½®

æµè§ˆå™¨çª—å£å°ºå¯¸é€šå¸¸æ— æ³•æ»¡è¶³å®Œæ•´æ˜¾ç¤ºæ•´ä¸ªé¡µé¢ï¼Œä¸ºæ­¤ç”¨æˆ·å¯ä»¥é€šè¿‡æ»šåŠ¨åœ¨æœ‰é™çš„è§†å£ä¸­æŸ¥çœ‹æ–‡æ¡£ã€‚

- `window.scrollX` é¡µé¢æ°´å¹³æ–¹å‘æ»šåŠ¨çš„åƒç´ å€¼ã€‚ç­‰åŒäº `window.pageXoffset`ã€‚
- `window.scrollY` é¡µé¢å‚ç›´æ–¹å‘æ»šåŠ¨çš„åƒç´ å€¼ã€‚ç­‰åŒäº `window.pageYoffset`ã€‚

![2020-09-16-09-37-15](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-09-37-15.png)

å¯ä»¥ä½¿ç”¨ `scroll()`ã€`scrollTo()` å’Œ `scrollBy()` æ–¹æ³•æ»šåŠ¨é¡µé¢ã€‚è¿™ 3 ä¸ªæ–¹æ³•éƒ½æ¥æ”¶è¡¨ç¤ºç›¸å¯¹è§†å£è·ç¦»çš„ `x` å’Œ `y` åæ ‡ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åœ¨å‰ä¸¤ä¸ªæ–¹æ³•ä¸­è¡¨ç¤ºè¦æ»šåŠ¨åˆ°çš„åæ ‡ï¼Œåœ¨æœ€åä¸€ä¸ªæ–¹æ³•ä¸­è¡¨ç¤ºæ»šåŠ¨çš„è·ç¦»ã€‚

```js
// ç›¸å¯¹äºå½“å‰è§†å£å‘ä¸‹æ»šåŠ¨100åƒç´ 
window.scrollBy(0, 100);

// ç›¸å¯¹äºå½“å‰è§†å£å‘å³æ»šåŠ¨40åƒç´ 
window.scrollBy(40, 0);

// æ»šåŠ¨åˆ°é¡µé¢å·¦ä¸Šè§’
window.scroll(0, 0);

// æ»šåŠ¨åˆ°è·ç¦»å±å¹•å·¦è¾¹åŠé¡¶è¾¹å„100åƒç´ çš„ä½ç½®
window.scrollTo(100, 100);
```

### å¯¼èˆª & æ‰“å¼€æ–°çª—å£

`window.open()` æ–¹æ³•å¯ä»¥ç”¨äºå¯¼èˆªåˆ°æŒ‡å®š URLï¼Œä¹Ÿå¯ä»¥ç”¨äºæ‰“å¼€æ–°æµè§ˆå™¨çª—å£ã€‚æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼š

- **ç›®æ ‡ URL**ã€‚
- **ç›®æ ‡çª—å£å**ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„çª—å£æˆ– Frame çš„åå­—ï¼Œåˆ™ä¼šåœ¨å¯¹åº”çš„çª—å£æˆ– Frame ä¸­æ‰“å¼€ URLã€‚å¦åˆ™å°±ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çª—å£å¹¶å°†å…¶å‘½åä¸ºæŒ‡å®šå€¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„çª—å£åã€‚
- **ç‰¹æ€§å­—ç¬¦ä¸²**ï¼Œç”¨äºæŒ‡å®šæ–°çª—å£çš„é…ç½®ã€‚æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„è®¾ç½®å­—ç¬¦ä¸²ï¼Œç”¨äºæŒ‡å®šæ–°çª—å£åŒ…å«çš„ç‰¹æ€§ã€‚
  - å¦‚æœæ‰“å¼€çš„ä¸æ˜¯æ–°çª—å£ï¼Œåˆ™å¿½ç•¥ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚
  - å¦‚æœæ²¡æœ‰ä¼ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œåˆ™æ–°çª—å£ä¼šå¸¦æœ‰æ‰€æœ‰é»˜è®¤çš„æµè§ˆå™¨ç‰¹æ€§ã€‚
- **å¸ƒå°”å€¼**ï¼Œè¡¨ç¤ºæ–°çª—å£åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­ï¼Œæ˜¯å¦æ›¿ä»£å½“å‰åŠ è½½é¡µé¢ã€‚

ç¬¬äºŒä¸ªå‚æ•°ã€Œ ç›®æ ‡çª—å£å ã€çš„å–å€¼å¯ä»¥æ˜¯ä¸€äº›ç‰¹æ®Šçš„çª—å£åï¼š

- `_self`: å½“å‰é¡µé¢ã€‚
- `_blank`: æ–°çª—å£æ‰“å¼€ã€‚
- `_parent`: å½“å‰çª—å£çš„çˆ¶çª—å£ã€‚å¦‚æœæ²¡æœ‰ `parent` çª—å£ï¼Œæ­¤é€‰é¡¹ä¸ `_self` ç›¸åŒã€‚
- `_top`: æœ€å¤–å±‚çª—å£ï¼Œå¦‚æœå½“å‰çª—å£å°±æ˜¯æœ€ä¸Šå±‚ï¼Œæ­¤é€‰é¡¹ä¸ `_self` ç›¸åŒã€‚

ç¬¬ä¸‰ä¸ªå‚æ•°ã€Œ ç‰¹æ€§å­—ç¬¦ä¸² ã€ï¼Œç”¨äºæŒ‡å®šæ–°çª—å£çš„é…ç½®ã€‚ä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›é€‰é¡¹ï¼š

![2020-09-16-09-56-25](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-09-56-25.png)

![2020-09-16-09-57-06](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-09-57-06.png)

```js
window.open(
  "http://www.wrox.com/",
  "wroxWindow",
  "height=400,width=400,top=10,left=10,resizable=yes"
);
```

- è¿™è¡Œä»£ç ä¼šæ‰“å¼€ä¸€ä¸ªå¯ç¼©æ”¾çš„æ–°çª—å£ï¼Œå¤§å°ä¸º 400 åƒç´  Ã—400 åƒç´ ï¼Œä½äºç¦»å±å¹•å·¦è¾¹åŠé¡¶è¾¹å„ 10 åƒç´ çš„ä½ç½®ã€‚

`window.open()` æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹æ–°å»ºçª—å£çš„å¼•ç”¨ã€‚ä¸æ™®é€š `window` å¯¹è±¡æ²¡æœ‰åŒºåˆ«ã€‚

å¯ä»¥ä½¿ç”¨ `close()` æ–¹æ³•å…³é—­æ–°æ‰“å¼€çš„çª—å£ã€‚

æ–°åˆ›å»ºçª—å£çš„ `window` å¯¹è±¡æœ‰ä¸€ä¸ªå±æ€§ `opener`ï¼ŒæŒ‡å‘æ‰“å¼€å®ƒçš„çª—å£ã€‚

```js
let wroxWin = window.open(
  "http://www.wrox.com/",
  "wroxWindow",
  "height=400,width=400,top=10,left=10,resizable=yes"
);
wroxWin.close();

alert(wroxWin.opener === window); // true
```

#### å¼¹çª—å±è”½ç¨‹åº

å¦‚æœæµè§ˆå™¨å†…ç½®çš„å¼¹çª—å±è”½ç¨‹åºé˜»æ­¢äº†å¼¹çª—ï¼Œé‚£ä¹ˆ `window.open()` å¾ˆå¯èƒ½ä¼šè¿”å› `null`ã€‚æ­¤æ—¶ï¼Œåªè¦æ£€æŸ¥è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼å°±å¯ä»¥çŸ¥é“å¼¹çª—æ˜¯å¦è¢«å±è”½äº†ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œå¼¹çª—ä¹Ÿå¯èƒ½è¢«æµè§ˆå™¨æ‰©å±•æˆ–å…¶ä»–ç¨‹åºå±è”½ï¼Œæ­¤æ—¶ `window.open()` é€šå¸¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚

å› æ­¤è¦å‡†ç¡®æ£€æµ‹å¼¹çª—æ˜¯å¦è¢«å±è”½ï¼Œé™¤äº†æ£€æµ‹ `window.open()` çš„è¿”å›å€¼ï¼Œè¿˜è¦æŠŠå®ƒç”¨ `try/catch` åŒ…è£…èµ·æ¥ã€‚

```js
let blocked = false;

try {
  let wroxWin = window.open("http://www.wrox.com", "_blank");
  if (wroxWin == null) {
    blocked = true;
  }
} catch (ex) {
  blocked = true;
}
if (blocked) {
  alert("The popup was blocked!");
}
```

### å®šæ—¶å™¨

- `setTimeout()` æŒ‡å®šåœ¨ä¸€æ®µæ—¶é—´åæ‰§è¡ŒæŸäº›ä»£ç ã€‚
- `setInterval()` æŒ‡å®šæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡ŒæŸäº›ä»£ç ã€‚

`setTimeout()` æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

- è¦æ‰§è¡Œçš„ä»£ç 
- ç­‰å¾…çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰å‘Šè¯‰ JavaScript å¼•æ“åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°è¿‡åæŠŠä»»åŠ¡æ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ã€‚

è°ƒç”¨ `setTimeout()` æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥è¶…æ—¶æ’æœŸä»»åŠ¡çš„æ•°å€¼ IDã€‚è°ƒç”¨ `clearTimeout()` æ–¹æ³•å¹¶ä¼ å…¥è¶…æ—¶ ID å¯ä»¥å–æ¶ˆç­‰å¾…ä¸­çš„æ’æœŸä»»åŠ¡ã€‚

- åªè¦æ˜¯åœ¨æŒ‡å®šæ—¶é—´åˆ°è¾¾ä¹‹å‰è°ƒç”¨ `clearTimeout()`ï¼Œå°±å¯ä»¥å–æ¶ˆè¶…æ—¶ä»»åŠ¡ã€‚åœ¨ä»»åŠ¡æ‰§è¡Œåå†è°ƒç”¨ `clearTimeout()` æ²¡æœ‰æ•ˆæœã€‚

```js
// è®¾ç½®è¶…æ—¶ä»»åŠ¡
let timeoutId = setTimeout(() => alert("Hello world!"), 1000);

// å–æ¶ˆè¶…æ—¶ä»»åŠ¡
clearTimeout(timeoutId);
```

`setInterval()` ä¸ `setTimeout()` çš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼ã€‚ä½†è¦æ³¨æ„ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡çš„æ˜¯æ¯éš”æŒ‡å®šæ—¶é—´ï¼Œå°±ä¼šå‘é˜Ÿåˆ—å†æ·»åŠ ä¸€æ¬¡ä»»åŠ¡ã€‚ä¸ç®¡ä¸Šä¸€ä¸ªä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œä»¥åŠæ‰§è¡Œè¦èŠ±å¤šé•¿æ—¶é—´ã€‚

`setInterval()` æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªå¾ªç¯å®šæ—¶ä»»åŠ¡ IDï¼Œå¯ä»¥è°ƒç”¨ `clearInterval()` å¹¶ä¼ å…¥å®šæ—¶ IDï¼Œæ¥å–æ¶ˆå¾ªç¯å®šæ—¶ã€‚å¦‚æœä¸€ç›´ä¸ç®¡å®ƒï¼Œé‚£ä¹ˆå®šæ—¶ä»»åŠ¡ä¼šä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°å…³é—­é¡µé¢ã€‚

```js
let num = 0,
  intervalId = null;
let max = 10;

let incrementNumber = function() {
  num++;

  // å¦‚æœè¾¾åˆ°æœ€å¤§å€¼ï¼Œåˆ™å–æ¶ˆæ‰€æœ‰æœªæ‰§è¡Œçš„ä»»åŠ¡
  if (num == max) {
    clearInterval(intervalId);
    alert("Done");
  }
};

intervalId = setInterval(incrementNumber, 500);
```

ğŸ‘† ä¸Šé¢è¿™ä¸ªæ¨¡å¼ä¹Ÿå¯ä»¥ä½¿ç”¨ `setTimeout()` æ¥å®ç°ï¼š

```js
let num = 0;
let max = 10;
let incrementNumber = function() {
  num++;

  // å¦‚æœè¿˜æ²¡æœ‰è¾¾åˆ°æœ€å¤§å€¼ï¼Œå†è®¾ç½®ä¸€ä¸ªè¶…æ—¶ä»»åŠ¡
  if (num < max) {
    setTimeout(incrementNumber, 500);
  } else {
    alert("Done");
  }
};

setTimeout(incrementNumber, 500);
```

ä¸Šé¢è¿™ç§å†™æ³•ï¼Œä¸éœ€è¦æ‰‹åŠ¨å–æ¶ˆå¾ªç¯å®šæ—¶ä»»åŠ¡ã€‚è€Œä¸”å¯ä»¥ä¿è¯ä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰ä¼šå¼€å§‹æ‰§è¡Œä¸‹ä¸€æ¬¡ä»»åŠ¡ã€‚

### ç³»ç»Ÿå¯¹è¯æ¡†

ä½¿ç”¨ `alert()`ã€`confirm()` å’Œ `promt()` æ–¹æ³•ï¼Œå¯ä»¥è®©æµè§ˆå™¨è°ƒç”¨ç³»ç»Ÿå¯¹è¯æ¡†å‘ç”¨æˆ·æ˜¾ç¤ºæ¶ˆæ¯ã€‚

- å®ƒä»¬çš„å¤–è§‚ç”±æ“ä½œç³»ç»Ÿæˆ–è€…æµè§ˆå™¨å†³å®šï¼Œæ— æ³•ä½¿ç”¨ CSS è®¾ç½®ã€‚
- éƒ½æ˜¯åŒæ­¥çš„æ¨¡æ€å¯¹è¯æ¡†ï¼Œå³åœ¨å®ƒä»¬æ˜¾ç¤ºçš„æ—¶å€™ï¼Œä»£ç ä¼šåœæ­¢æ‰§è¡Œã€‚

é€šè¿‡ `alert()` æ˜¾ç¤ºã€Œ **è­¦ç¤ºæ¡†** ã€ï¼Œåªæœ‰ä¸€ä¸ª OK æŒ‰é’®ã€‚é€šå¸¸ç”¨äºå‘ç”¨æˆ·æ˜¾ç¤ºä¸€äº›ä»–ä»¬æ— æ³•æ§åˆ¶çš„æ¶ˆæ¯ï¼Œæ¯”å¦‚æŠ¥é”™ã€‚

- æ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ã€‚ä¼ å…¥å­—ç¬¦ä¸²ä¼šæ˜¾ç¤ºåœ¨å¼¹æ¡†ä¸­ã€‚å¦‚æœä¸æ˜¯ä¸€ä¸ªåŸå§‹å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šè°ƒç”¨è¿™ä¸ªå€¼çš„ `toString()` æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

![2020-09-16-13-46-08](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-13-46-08.png)

é€šè¿‡è°ƒç”¨ `confirm()` æ¥æ˜¾ç¤ºã€Œ **ç¡®è®¤æ¡†** ã€ã€‚æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼šCancel å’Œ OKã€‚ç”¨æˆ·é€šè¿‡å•å‡»ä¸åŒçš„æŒ‰é’®è¡¨æ˜å¸Œæœ›æ¥ä¸‹æ¥æ‰§è¡Œä»€ä¹ˆæ“ä½œã€‚

- æ–¹æ³•çš„è¿”å›å€¼ï¼Œ`true` è¡¨ç¤ºå•å‡»äº† OK æŒ‰é’®ï¼Œ`false` è¡¨ç¤ºå•å‡»äº† Cancel æŒ‰é’®ï¼Œæˆ–è€…å•å‡» X å›¾æ ‡å…³é—­äº†ç¡®è®¤æ¡†ã€‚

```js
if (confirm("Are you sure?")) {
  alert("I'm so glad you're sure!");
} else {
  alert("I'm sorry to hear you're not sure.");
}
```

![2020-09-16-13-47-35](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-13-47-35.png)

é€šè¿‡è°ƒç”¨ `prompt()` æ–¹æ³•æ˜¾ç¤ºã€Œ **æç¤ºæ¡†** ã€ã€‚ç”¨é€”æ˜¯æç¤ºç”¨æˆ·è¾“å…¥æ¶ˆæ¯ã€‚é™¤äº† OK å’Œ Cancel æŒ‰é’®ï¼Œæç¤ºæ¡†è¿˜ä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œè®©ç”¨æˆ·è¾“å…¥å†…å®¹ã€‚

- æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šè¦æ˜¾ç¤ºç»™ç”¨æˆ·çš„æ–‡æœ¬ï¼Œå’Œæ–‡æœ¬æ¡†çš„é»˜è®¤å€¼ã€‚
- å¦‚æœç”¨æˆ·å•å‡»äº† OK æŒ‰é’®ï¼Œåˆ™ `prompt()` ä¼šè¿”å›æ–‡æœ¬æ¡†ä¸­çš„å€¼ã€‚å¦‚æœç”¨æˆ·å•å‡»äº† Cancel æŒ‰é’®ï¼Œæˆ–è€…å¯¹è¯æ¡†è¢«å…³é—­ï¼Œåˆ™ `prompt()` ä¼šè¿”å› `null`ã€‚

```js
let result = prompt("What is your name? ", "");
if (result !== null) {
  alert("Welcome, " + result);
}
```

![2020-09-16-13-50-56](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-13-50-56.png)

## `location` å¯¹è±¡

- [MDN æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/API/Location)
- [W3cubDocs æ–‡æ¡£](https://docs.w3cub.com/dom/location/)

`location` æ˜¯æœ€æœ‰ç”¨çš„ BOM å¯¹è±¡ä¹‹ä¸€ï¼Œæä¾›äº†å½“å‰çª—å£ä¸­åŠ è½½æ–‡æ¡£çš„ä¿¡æ¯ï¼Œä»¥åŠé€šå¸¸çš„å¯¼èˆªåŠŸèƒ½ã€‚

å®ƒæ—¢æ˜¯ `window` çš„å±æ€§ï¼Œä¹Ÿæ˜¯ `document` çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`window.location` å’Œ `document.location` æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚

### å¸¸ç”¨å±æ€§

location å¯¹è±¡ä¸Šä¿å­˜ç€å½“å‰çª—å£æ‰€åŠ è½½çš„æ–‡æ¡£çš„ URL åœ°å€ä¿¡æ¯ï¼š

å‡è®¾æµè§ˆå™¨å½“å‰åŠ è½½çš„ URL æ˜¯ `http://foouser:barpassword@www.wrox.com:80/WileyCDA/?q=javascript#contents`

|        å±æ€§         |                             å€¼                             |                               è¯´æ˜                                |
| :-----------------: | :--------------------------------------------------------: | :---------------------------------------------------------------: |
|   `location.hash`   |                       `"#contents"`                        |                 URL æ•£åˆ—å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºå­—ç¬¦ä¸²                  |
|   `location.host`   |                    `"www.wrox.com:80"`                     |                         æœåŠ¡å™¨ååŠç«¯å£å·                          |
| `location.hostname` |                      `"www.wrox.com"`                      |                             æœåŠ¡å™¨å                              |
|   `location.href`   | `"http://www.wrox.com:80/WileyCDA/?q=javascript#contents"` | å½“å‰åŠ è½½é¡µé¢çš„å®Œæ•´ URLã€‚`location` çš„ `toString()` æ–¹æ³•è¿”å›è¿™ä¸ªå€¼ |
| `location.pathname` |                       `"/WileyCDA/"`                       |                    URL ä¸­çš„è·¯å¾„å’Œï¼ˆæˆ–ï¼‰æ–‡ä»¶å                     |
|   `location.port`   |                           `"80"`                           |          è¯·æ±‚çš„ç«¯å£ã€‚å¦‚æœ URL ä¸­æ²¡æœ‰ç«¯å£ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²          |
| `location.protocol` |                         `"http:"`                          |            é¡µé¢ä½¿ç”¨çš„åè®®ã€‚é€šå¸¸æ˜¯ "http:" æˆ– "https:"             |
|  `location.search`  |                     `"?q=javascript"`                      |              URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä»¥é—®å·å¼€å¤´               |
| `location.username` |                        `"foouser"`                         |                        åŸŸåå‰æŒ‡å®šçš„ç”¨æˆ·å                         |
| `location.password` |                      `"barpassword"`                       |                         åŸŸåå‰æŒ‡å®šçš„å¯†ç                           |
|  `location.origin`  |                  `"http://www.wrox.com"`                   |                        URL çš„æºåœ°å€ã€‚åªè¯»                         |

### è§£æ URL æŸ¥è¯¢å­—ç¬¦ä¸²

`location.search` è¿”å›äº†ä»é—®å·å¼€å§‹ç›´åˆ° URL æœ«å°¾çš„æ‰€æœ‰å†…å®¹ï¼Œä½†æ²¡æœ‰åŠæ³•é€ä¸ªè®¿é—®æ¯ä¸ªæŸ¥è¯¢å‚æ•°ã€‚

ä¸‹é¢çš„å‡½æ•°è§£æäº†æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªä»¥æ¯ä¸ªæŸ¥è¯¢å‚æ•°ä¸ºå±æ€§çš„å¯¹è±¡ã€‚

```js
let getQueryStringArgs = function() {
  // å–å¾—æ²¡æœ‰å¼€å¤´é—®å·çš„æŸ¥è¯¢å­—ç¬¦ä¸²
  let qs = location.search.length > 0 ? location.search.substring(1) : "",
    // ä¿å­˜æ•°æ®çš„å¯¹è±¡
    args = {};

  // æŠŠæ¯ä¸ªå‚æ•°æ·»åŠ åˆ° args å¯¹è±¡
  for (let item of qs.split("&").map((kv) => kv.split("="))) {
    // å› ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²é€šå¸¸æ˜¯è¢«ç¼–ç åçš„æ ¼å¼
    // æ‰€ä»¥éœ€è¦ä½¿ç”¨ decodeURIComponent() è§£ç 
    let name = decodeURIComponent(item[0]),
      value = decodeURIComponent(item[1]);
    if (name.length) {
      args[name] = value;
    }
  }

  return args;
};
```

### æ“ä½œåœ°å€

é€šè¿‡ç»™ `location.assign()` æ–¹æ³•ä¼ å…¥ä¸€ä¸ª URL å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŠ è½½ç»™å®š URL çš„å†…å®¹èµ„æºåˆ°å½“å‰çª—å£ã€‚

æ‰§è¡Œä¸‹é¢è¿™è¡Œä»£ç ï¼Œä¼šç«‹å³å¯¼èˆªåˆ° URL æŒ‡å®šçš„é¡µé¢ä¸Šã€‚åŒæ—¶åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­å¢åŠ ä¸€æ¡è®°å½•ã€‚

```js
location.assign("https://www.baidu.com");
```

å¦‚æœç»™ `location.href` æˆ– `window.location` è®¾ç½®ä¸€ä¸ª URLï¼Œä¹Ÿä¼šæœ‰åŒæ ·çš„æ•ˆæœã€‚

```js
location.assign("https://www.baidu.com");
// ç­‰ä»·äº
window.location = "https://www.baidu.com";
location.href = "https://www.baidu.com";
```

ä¿®æ”¹ `location` å¯¹è±¡çš„å±æ€§ä¹Ÿä¼šä¿®æ”¹å½“å‰åŠ è½½çš„é¡µé¢ã€‚

- é™¤äº† `hash` ä¹‹å¤–ï¼Œåªè¦ä¿®æ”¹ `location` çš„ä¸€ä¸ªå±æ€§ï¼Œå°±ä¼šå¯¼è‡´é¡µé¢é‡æ–°åŠ è½½æ–° URLã€‚
- ä¿®æ”¹ `hash` çš„å€¼ä¼šåœ¨æµè§ˆå™¨å†å²ä¸­å¢åŠ ä¸€æ¡æ–°è®°å½•ã€‚å¯ä»¥å‰è¿›åé€€ã€‚

```js
// å‡è®¾å½“å‰ URL ä¸ºhttp://www.wrox.com/WileyCDA/

// æŠŠ URL ä¿®æ”¹ä¸ºhttp://www.wrox.com/WileyCDA/#section1
location.hash = "#section1";

// æŠŠ URL ä¿®æ”¹ä¸ºhttp://www.wrox.com/WileyCDA/?q=javascript
location.search = "?q=javascript";

// æŠŠ URL ä¿®æ”¹ä¸ºhttp://www.somewhere.com/WileyCDA/
location.hostname = "www.somewhere.com";

// æŠŠ URL ä¿®æ”¹ä¸ºhttp://www.somewhere.com/mydir/
location.pathname = "mydir";

// æŠŠ URL ä¿®æ”¹ä¸ºhttp://www.somewhere.com:8080/WileyCDA/
Location.port = 8080;
```

---

ä½¿ç”¨ `replace()` æ–¹æ³•å¯ä»¥è®©å½“å‰çª—å£é‡æ–°åŠ è½½åˆ°æŒ‡å®šçš„ URLï¼Œä¸”ä¸ä¼šå¢åŠ å†å²è®°å½•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ä¸èƒ½ "åé€€" åˆ°å‰ä¸€ä¸ªé¡µé¢äº†ã€‚

```js
location.replace("https://www.baidu.com/");
```

---

`reload()` èƒ½é‡æ–°åŠ è½½å½“å‰æ˜¾ç¤ºçš„é¡µé¢ã€‚

- å¦‚æœä¸ä¼ å‚æ•°ï¼Œé¡µé¢ä¼šä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼é‡æ–°åŠ è½½ã€‚ä¼šå°½å¯èƒ½ä»ç¼“å­˜ä¸­åŠ è½½é¡µé¢ã€‚
- å¦‚æœæƒ³å¼ºåˆ¶ä»æœåŠ¡å™¨é‡æ–°åŠ è½½ï¼Œåˆ™å°† `true` ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚

```js
location.reload(); // é‡æ–°åŠ è½½ï¼Œå¯èƒ½æ˜¯ä»ç¼“å­˜åŠ è½½
location.reload(true); // é‡æ–°åŠ è½½ï¼Œä»æœåŠ¡å™¨åŠ è½½
```

## `screen` å¯¹è±¡

- [MDN æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/API/Screen)
- [W3cubDocs æ–‡æ¡£](https://docs.w3cub.com/dom/screen/)

`window.screen` å¯¹è±¡æä¾›æ˜¾ç¤ºå™¨ç›¸å…³ä¿¡æ¯ã€‚

|     å±æ€§      |                     è¯´æ˜                     |
| :-----------: | :------------------------------------------: |
| `availHeight` |     å±å¹•åƒç´ é«˜åº¦å‡å»ç³»ç»Ÿç»„ä»¶é«˜åº¦ï¼ˆåªè¯»ï¼‰     |
|  `availLeft`  | æ²¡æœ‰è¢«ç³»ç»Ÿç»„ä»¶å ç”¨çš„å±å¹•çš„æœ€å·¦ä¾§åƒç´ ï¼ˆåªè¯»ï¼‰ |
|  `availTop`   | æ²¡æœ‰è¢«ç³»ç»Ÿç»„ä»¶å ç”¨çš„å±å¹•çš„æœ€é¡¶ç«¯åƒç´ ï¼ˆåªè¯»ï¼‰ |
| `availWidth`  |     å±å¹•åƒç´ å®½åº¦å‡å»ç³»ç»Ÿç»„ä»¶å®½åº¦ï¼ˆåªè¯»ï¼‰     |
| `colorDepth`  |  è¡¨ç¤ºå±å¹•é¢œè‰²çš„ä½æ•°ï¼›å¤šæ•°ç³»ç»Ÿæ˜¯ 32ï¼ˆåªè¯»ï¼‰   |
|   `height`    |                 å±å¹•åƒç´ é«˜åº¦                 |
|    `left`     |            å½“å‰å±å¹•å·¦è¾¹çš„åƒç´ è·ç¦»            |
| `pixelDepth`  |              å±å¹•çš„ä½æ·±ï¼ˆåªè¯»ï¼‰              |
|     `top`     |            å½“å‰å±å¹•é¡¶ç«¯çš„åƒç´ è·ç¦»            |
|    `width`    |                 å±å¹•åƒç´ å®½åº¦                 |
| `orientation` |   è¿”å› Screen Orientation API ä¸­å±å¹•çš„æœå‘   |

![2020-09-16-14-44-43](https://garrik-default-imgs.oss-accelerate.aliyuncs.com/imgs/2020-09-16-14-44-43.png)

## `history` å¯¹è±¡

- [MDN æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/API/History)
- [W3cubDocs æ–‡æ¡£](https://docs.w3cub.com/dom/history/)

`window.history` å¯¹è±¡è¡¨ç¤ºå½“å‰çª—å£ä½¿ç”¨ä»¥æ¥ç”¨æˆ·çš„å¯¼èˆªå†å²è®°å½•ã€‚äºå®‰å…¨è€ƒè™‘ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ä¼šæš´éœ²ç”¨æˆ·è®¿é—®è¿‡çš„ URLï¼Œä½†æ˜¯å¯ä»¥æ§åˆ¶é¡µé¢çš„å‰è¿›å’Œåé€€ã€‚

`go()` æ–¹æ³•å¯ä»¥åœ¨ç”¨æˆ·å†å²è®°å½•ä¸­æ²¿ä»»ä½•æ–¹å‘å¯¼èˆªã€‚åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š

- å¯ä»¥æ˜¯æ•´æ•°ï¼Œè¡¨ç¤ºå‰è¿›æˆ–åé€€å¤šå°‘æ­¥ã€‚
- å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæµè§ˆå™¨ä¼šå¯¼èˆªåˆ°å†å²ä¸­åŒ…å«è¯¥å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚å¯èƒ½å‰è¿›ï¼Œä¹Ÿå¯èƒ½æ˜¯åé€€ã€‚

### å‰è¿› & åé€€

```js
// åé€€ä¸€é¡µ
history.go(-1);

// å‰è¿›ä¸€é¡µ
history.go(1);

// å‰è¿›ä¸¤é¡µ
history.go(2);

// å¯¼èˆªåˆ°æœ€è¿‘çš„ wrox.com é¡µé¢
history.go("wrox.com");

// å¯¼èˆªåˆ°æœ€è¿‘çš„ nczonline.net é¡µé¢
history.go("nczonline.net");
```

`back()` å’Œ `forward()` æ–¹æ³•å¯ä»¥ç›´æ¥æ§åˆ¶å‰è¿›ä¸€æ­¥å’Œåé€€ä¸€æ­¥ã€‚

```js
// åé€€ä¸€é¡µ
history.back();

// å‰è¿›ä¸€é¡µ
history.forward();
```

`length` å±æ€§åæ˜ äº†å†å²è®°å½•çš„æ•°é‡ã€‚å¯¹äºçª—å£ä¸­åŠ è½½çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œ`history.length` ç­‰äº `1`ã€‚

```js
if (history.length == 1) {
  // è¿™æ˜¯ç”¨æˆ·çª—å£ä¸­çš„ç¬¬ä¸€ä¸ªé¡µé¢
}
```

### å†å²çŠ¶æ€ç®¡ç†

ç”¨æˆ·æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šè§¦å‘é¡µé¢åˆ·æ–°çš„æ—¶ä»£æ—©å·²è¿‡å»ï¼Œå•é¡µé¢åº”ç”¨é‡Œçš„å¾ˆå¤šæ“ä½œä¸ä¼šäº§ç”Ÿæ–°çš„å†å²è®°å½•ï¼Œè€Œç”¨æˆ·å´ä¹ æƒ¯äºç”¨ã€Œ åé€€ ã€å’Œã€Œ å‰è¿› ã€æ¥åˆ‡æ¢è‡³è‡ªå·±ä¸Šä¸€æ­¥ï¼Œæˆ–åä¸€æ­¥æ“ä½œã€‚å¦‚ä½•åˆç†åœ°è¿›è¡Œå†å²è®°å½•ç®¡ç†ï¼Œå°±å˜æˆäº†ç°ä»£ Web å¼€å‘çš„ä¸€ä¸ªéš¾é¢˜ã€‚

`hashchange` äº‹ä»¶ä¼šåœ¨é¡µé¢ URL çš„ `hash` å˜åŒ–æ—¶è¢«è§¦å‘ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ­¤æ—¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚å…·ä½“ç»†èŠ‚æˆ‘ä»¬åœ¨ã€Œ äº‹ä»¶ ã€é‚£ä¸€ç« å†è®²ã€‚

HTML5 ä¸º history å¯¹è±¡å¢åŠ äº†æ–¹ä¾¿çš„çŠ¶æ€ç®¡ç†ç‰¹æ€§ã€‚ä½¿ç”¨ `history.pushState()` æ–¹æ³•å¯ä»¥å‘å½“å‰æµè§ˆå™¨ä¼šè¯çš„å†å²å †æ ˆæ·»åŠ ä¸€ä¸ªæ–°çºªå½•ï¼Œå¹¶ä¸”è¯¥è®°å½•ä¸ä¸€ä¸ªçŠ¶æ€å¯¹è±¡å…³è”ã€‚

æ–¹æ³•æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼š

- **`state` å¯¹è±¡**ï¼šä¸æ–°å†å²è®°å½•ç›¸å…³è”ï¼Œå¯ä»¥æ˜¯ä»»ä½•å¯ä»¥åºåˆ—åŒ–çš„å¯¹è±¡ã€‚åº”è¯¥åŒ…å«æ­£ç¡®åˆå§‹åŒ–é¡µé¢æ‰€å¿…éœ€çš„çŠ¶æ€ä¿¡æ¯ã€‚
- **æ–°çŠ¶æ€çš„æ ‡é¢˜**ï¼šå½“å‰å¤§å¤šæ•°æµè§ˆå™¨éƒ½å¿½ç•¥æ­¤å‚æ•°ï¼Œå°½ç®¡å°†æ¥å¯èƒ½ä¼šä½¿ç”¨å®ƒã€‚å¯ä»¥ä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªçŸ­æ ‡é¢˜ã€‚
- **ç›¸å¯¹ URL**ï¼ˆ å¯é€‰çš„ ï¼‰ï¼šæµè§ˆå™¨ä¸ä¼šåŠ è½½æ­¤ URLã€‚ å¦‚æœæœªæŒ‡å®šæ­¤å‚æ•°ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºæ–‡æ¡£çš„å½“å‰ URLã€‚

âš ï¸ æ³¨æ„ï¼Œè¦ç¡®ä¿é€šè¿‡ `pushState()` è®¾ç½®çš„æ¯ä¸ª URL éƒ½å¯¹åº”ç€æœåŠ¡å™¨ä¸Šä¸€ä¸ªçœŸå®çš„ç‰©ç† URLã€‚å¦åˆ™ï¼Œå•å‡»ã€Œ åˆ·æ–° ã€æŒ‰é’®ä¼šå¯¼è‡´ 404 é”™è¯¯ã€‚

```js
let stateObject = { foo: "bar" };

history.pushState(stateObject, "My title", "baz.html");
```

å½“ pushState() æ‰§è¡Œåï¼Œä¸€ä¸ªæ–°çš„å†å²è®°å½•è¢«åˆ›å»ºã€‚å¦‚æœç”¨æˆ·æ‰§è¡Œã€Œ åé€€ ã€æ“ä½œã€‚å°±ä¼šè§¦å‘ `window` å¯¹è±¡ä¸Šçš„ `popstate` äº‹ä»¶ã€‚

äº‹ä»¶å¤„ç†å‡½æ•°æ¥æ”¶ä¸€ä¸ª `event` äº‹ä»¶å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œäº‹ä»¶å¯¹è±¡æœ‰ä¸€ä¸ª `state` å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯¹åº”å†å²è®°å½•çš„ `state` å¯¹è±¡ã€‚å¦‚æœå†å²è®°å½•å¹¶ä¸æ˜¯é€šè¿‡ `pushState()` æ–¹æ³•æ·»åŠ çš„ï¼Œåˆ™ `event.state` å€¼ä¸º `null`ã€‚

åŸºäºè¿™ä¸ªçŠ¶æ€ï¼Œä½ å¯ä»¥æŠŠé¡µé¢é‡ç½®ä¸ºå¯¹åº”çš„çŠ¶æ€ã€‚

```js
window.addEventListener("popstate", (event) => {
  let state = event.state;
  if (state) {
    processState(state); // æ ¹æ®è¯¥çŠ¶æ€ï¼Œå¤„ç†é¡µé¢ã€‚
  }
});
```

å…·ä½“æ“ä½œå±•ç¤ºï¼š

```js
window.addEventListener("popstate", (event) => {
  console.log(event.state);
});

history.pushState({ number: 1 }, "state_1");
history.pushState({ number: 2 }, "state_2");
history.pushState({ number: 3 }, "state_3");
```

ä¸Šè¿°ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œä¸‰æ¡å†å²è®°å½•è¢«æ·»åŠ è¿›æµè§ˆå™¨ã€‚é¡µé¢æ­¤æ—¶çš„çŠ¶æ€ä¸º `{ number: 3 }`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·æœ€å¤šå¯ä»¥ã€Œ åé€€ ã€ä¸‰æ¬¡ï¼š

- ç¬¬ 1 æ¬¡åé€€ï¼Œæ‰“å°çŠ¶æ€ `{number: 2}`
- ç¬¬ 2 æ¬¡åé€€ï¼Œæ‰“å°çŠ¶æ€ `{number: 1}`
- ç¬¬ 3 æ¬¡åé€€ï¼Œæ‰“å°çŠ¶æ€ `null` ä¹Ÿå°±æ˜¯æœ€å¼€å§‹çš„çŠ¶æ€ã€‚

å¯ä»¥ä½¿ç”¨ `history.state` è·å–å½“å‰çš„çŠ¶æ€å¯¹è±¡ã€‚

```js
console.log(history.state); // { number: 1 }
```

å¯ä»¥ä½¿ç”¨ `replaceState()` æ¥æ›´æ–°å½“å‰è®°å½•çš„çŠ¶æ€ã€‚æ›´æ–°çŠ¶æ€ä¸ä¼šåˆ›å»ºæ–°å†å²è®°å½•ï¼Œåªä¼šè¦†ç›–å½“å‰çŠ¶æ€ã€‚æ–¹æ³•æ¥æ”¶ä¸ `pushState()` åŒæ ·çš„å‰ä¸¤ä¸ªå‚æ•°ã€‚

- ç»§ç»­æ‹¿ä¸Šé¢ ğŸ‘† çš„ä»£ç ä¸¾ä¾‹ï¼Œå‡è®¾æˆ‘ç°åœ¨çš„é¡µé¢çŠ¶æ€ä¸º `{number: 2}`ã€‚ç„¶åæˆ‘æ‰§è¡Œä¸‹é¢ ğŸ‘‡ è¿™æ¡è¯­å¥ã€‚

```js
history.replaceState({ number: 222 }, "state_2");
```

- ä¹‹åï¼Œæˆ‘ç‚¹å‡»ã€Œ å‰è¿› ã€æŒ‰é’®ï¼Œé¡µé¢çŠ¶æ€å˜ä¸º `{number: 3}`ï¼Œç„¶åæˆ‘å†ç‚¹å‡»ã€Œ åé€€ ã€ï¼Œæ­¤æ—¶é¡µé¢çŠ¶æ€å˜ä¸º `{number: 222}`

## `navigator` å¯¹è±¡

- [MDN æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator)
- [W3cubDocs æ–‡æ¡£](https://docs.w3cub.com/dom/window/navigator/)
