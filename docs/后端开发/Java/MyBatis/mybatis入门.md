# Mybatis 入门

- 框架是整个或部分系统的可重用设计；
- 它是我们软件开发中的一套解决方案。不同的框架解决不同的问题；
- 框架封装了很多细节，是开发者可以使用简单的方式去实现功能。提高了开发效率；

## 什么是持久层

- J2EE 是在 SUN 公司领导下，多家公司参与共同制定的企业级分布式应用程序开发规范；
- J2EE 中将整个应用分成三层架构：
  - 表现层：User Interface；
  - 业务逻辑层：Business Logic Layer；
  - 数据访问层：Data Access Layer；
- 持久层又被称为 “数据访问层”。也就是用来负责对数据库的访问和操作；
- 之前我们一直使用 JDBC 作为持久层技术解决方案，用它来访问和操作数据库；
- 我们还了解过 Apache 的 BDUtils，它是对 JDBC 的简单封装；

::: warning
注意：J2EE 的三层架构和 MVC 设计模式是有区别的：

- **相同点**：在 MVC 和三层架构中，视图层都用来展示数据给用户；
- **不同点**：
  - MVC 中，Model 层中包含了 “业务逻辑” 和 “数据库代码”；
  - 三层架构中，数据访问层只用来处理和数据库相关操作；
  - 三层架构中，业务逻辑层处理业务逻辑；
  - 三层架构的 “业务逻辑层” + “数据访问层” = MVC 的 Model 层；
- MVC 中的 Controller 主要负责，告诉 Model 处理什么数据，然后告诉 View 展示什么数据；
- 🌰 拿用户登录举例：
  - **View**：用户在网页访问到登录的 HTML 页面，输入用户名和密码，点击登录，发送给服务器一条 POST 请求；
  - **Controller**：POST 请求被服务器的 Servlet 处理，拿出请求中的用户名和密码参数，然后传递给对应的 Service 方法；
  - **Model**：Service 方法中，拿用户名和密码去数据库进行查找和比对：
    - 匹配成功：把数据库中这个用户的其他信息查询出来，然后创建 User 对象，返回给 Servlet；
    - 匹配失败：返回失败信息给 Servlet；
  - **Controller**：Servlet 拿到返回后，再对浏览器进行响应；
  - **View**：浏览器通过拿到的响应，绘制页面；

:::

## 什么是 Mybatis

- MyBatis 几乎可以代替 JDBC，是一个支持普通 SQL 查询，存储过程和高级映射的，基于 Java 的**持久层框架**；
- MyBatis 对 JDBC 进行了封装，屏蔽了 JDBC API 的底层访问细节，使程序对于数据库的访问和操作更加简便；
- MyBatis 使用了 ORM 思想实现了对结果集的封装；
  - ORM：Object Relational Mapping 对象关系映射；
  - 把数据库表和实体类，数据库表中字段和实体类的属性对应起来。让我们可以通过操作实体类就实现操作数据库表；
