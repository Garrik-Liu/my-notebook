# 基本指南

## 什么是 Express ?

Node.js 基于 Chrome 的 V8引擎，使 JavaScript 可以脱离于浏览器，在服务器上运行。因为有了 Node.js, 让前端开发人员也可以去写后端代码.

因为 Node.js 只提供一些底层功能，开发者需要在此基础上编写很多冗长的代码。

Express 作为一个架构与 Node.js 之上，以中间件, 路由, 模板引擎为核心, 提供了很多简单易用的 API 和 一系列强大的特性的轻量 Web 应用框架.

Express 是一个自身功能极简，完全是由路由和中间件构成一个的 web 开发框架：从本质上来说，一个 Express 应用就是在调用各种中间件。

Express 之于 Node.js，就像 jQuery 之于 JavaScript;


### 一个 Node.js 程序

假如创建一个 Node.js 服务器, 这整个程序就是一个 JavaScript 函数。这整个程序所做的事情就是接收请求，然后根据请求的内容去返回相应响应。比如说浏览器请求主页，它就会返回一个 HTML 文件。

在不用 Express 的情况下，过程就像下图：

![Screen Shot 2018-07-09 at 11.43.22 AM](https://i.imgur.com/pSx1DBJ.png)

JavaScript 函数接收请求，在这里被称作 request handler。

Node.js's HTTP server 处理 客户端 与 函数 之间的连接，所以我不用去管什么网络协议问题。

在函数之中，它接收两个参数，请求对象 和 响应对象。

Node.js 程序简单来说就是处理 请求 和 响应。没有很复杂，但是因为原生提供的功能比较底层，所以代码量很大。使用框架可以让编写更简洁。

![Screen Shot 2018-07-09 at 11.52.16 AM](https://i.imgur.com/g9ccPiM.png)

不用x像原生代码里写一个巨大的 request handler。Express 把它根据请求内容拆分成很多小函数，有的处理所有的请求，有的只处理 GET 请求，有的只处理针对一个特定 URL 的请求，等等。

### 一个 Express 程序

``` js
// 引入模块
var express = require('express');

// 建立 express app
var app = express();

app.get('/', (req, res) => {
    res.send("Hello World!");
})

app.listen(3000, function() {
    console.log("监听3000端口");
})
```

### Express 的 "小" 理念

Express 框架并不会给你的代码限制在一个固定刻板的结构内.

因为模块化机制, 程序一般都是以 Express 框架为主体, 结合各种外部模块, 去实现具体功能.

但提供了灵活性的同时, 这也使 Express 只提供了最基本的功能, 很多时候, 我们需要去找适合项目的第三方模块. 

## Express 核心

一直都在说, Express 让 Node.js 编写变的简单, 但是具体是怎么做到的呢?

这主要是依靠于 Express 的两个核心特性:

* Middleware
* Routing

### 中间件

在原生的 Node Web 程序里, 服务器接收客户端发来的请求, 然后经过请求处理函数( request handler )处理后, 返回给客户端一个响应.  

这个请求处理函数往往随着需求的增加而增大, 最后难以管理. 在 Express 里, 大函数被拆分成了多个小函数, 每个函数只处理一小部分任务, 这些小函数就被称作 **中间件**

中间件再根据执行的先后顺序构成 中间件链条.

### 路由

不同于中间件什么请求都处理，路由根据 客户端发送过来的 URL 或者 HTTP 方法 来做出相应的处理.
